!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="07c2287a-ffe4-36f3-bcf0-d36a12c3fbb9")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_dig-icons_assets_ui-icon_line_video","./c_dig-icons_assets_ui-icon_line_no-fill","./c_dig-icons_assets_ui-icon_line_pdf","react","./c_icon_templates_stateless_index","./c_spectrum_svg_icon_bundle","./c_react-use_misc_util","./c_shared_components_templates_modal_template","./c_api_v2_unauthed_client","./c_gdd_migration_ui_utils","./c_shortcuts_conversion_utils","./c_icon_shortcuts_icon","./e_data_modules_stormcrow"],(function(e,t,o,n,i,s,a,l,r,c,u,d,f,g,p,h){"use strict";function _(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var m=_(a);const S="browse_save_as";async function v({files:e,template:n,conversionType:i,source:s}){const{initLabel:a,failLabel:l}={initLabel:e=>o.intl.formatMessage({id:"YdruIN",defaultMessage:"Your {numFiles, plural, one {file} other {files}} will be saved shortly..."},{numFiles:e}),failLabel:e=>o.intl.formatMessage({id:"j4UjMR",defaultMessage:"There was a problem saving your {numFiles, plural, one {file} other {files}}"},{numFiles:e})};t.updateSnackbar({variant:"sync",title:a(e.length)});const r=t.getConversionLoggingFunctions(i);t.getStoreForAutomations().dispatch(t.setShouldSubscribeToBolt(!0));try{await t.submitFileWorkflow(n,e.map((e=>e.file_id))),t.PapLogger.logSucceedSubmitManualWorkflow(S,n,e.length),r.logConvert(s,e.length)}catch(o){t.updateSnackbar({variant:"fail",title:l(e.length)}),t.PapLogger.logFailSubmitManualWorkflow(S,n,e.length,o)}}const M="pdf",E={actionText:"PDF",actionIcon:n.FileLine,selector:t.singleFileWithExtensionSelector(t.SUPPORTED_PDF_EXTENSIONS),convert:(e,o,n)=>{const{source:i}=n;return t.convertFileAndShowSnackbar({...n,file:e[0],user:o,conversionType:M,folderRuleAction:"pdf_conversion",loggingFunctions:t.getConversionLoggingFunctions(M),getStrings:(e,n)=>t.getDefaultConversionStrings("PDF",e,o,n),conversionFn:async(e,n,i)=>(await t.convertToPdf(o,t.getFileIdentifier$1(e,i))).path,getAdoptionSnackbarProps:n=>t.getAdoptionSnackbarProps({user:o,conversionType:M,folderRuleAction:"pdf_conversion",fileType:"PDF",resultPath:n,source:i,nsId:e[0].ns_id}),template:{sequence:[{workflow_action:{".tag":"pdf_conversion"}}]},outputExt:"PDF"})}},F={actionText:"PDF",actionIcon:n.FileLine,selector:t.strictMultiFileWithExtensionSelector(t.SUPPORTED_PDF_EXTENSIONS),convert:(e,t,{source:o})=>v({files:e,template:{sequence:[{workflow_action:{".tag":"pdf_conversion"}}]},conversionType:M,source:o})},T={jpg:t.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter((e=>"jpg"!==e&&"jpeg"!==e)),png:t.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter((e=>"png"!==e))},I="image-format",O=Object.entries(T).map((([e,o])=>({actionText:e.toUpperCase(),actionIcon:i.ImageLine,selector:t.singleFileWithExtensionSelector(o),convert:(o,n,i)=>{const{source:s}=i;return t.convertFileAndShowSnackbar({...i,file:o[0],user:n,conversionType:I,folderRuleAction:"image_conversion",loggingFunctions:t.getConversionLoggingFunctions(I),getStrings:(o,i)=>t.getDefaultConversionStrings(e.toUpperCase(),o,n,i),conversionFn:async(o,i,s)=>(await t.convertImageFormat(n,t.getFileIdentifier$1(o,s),e)).path,getAdoptionSnackbarProps:i=>t.getAdoptionSnackbarProps({user:n,conversionType:I,folderRuleAction:"image_conversion",fileType:e,resultPath:i,source:s,nsId:o[0].ns_id}),outputExt:e})}}))),C="doc-to-image",D=t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS.map((e=>({actionText:e.toUpperCase(),actionIcon:i.ImageLine,selector:t.singleFileWithExtensionSelector(t.SUPPORTED_DOC_INPUT_EXTENSIONS),convert:(o,n,i)=>{const{source:s}=i;return t.convertFileAndShowSnackbar({...i,file:o[0],user:n,conversionType:C,folderRuleAction:"image_conversion",loggingFunctions:t.getConversionLoggingFunctions(C),getStrings:(o,i)=>t.getDefaultConversionStrings(e.toUpperCase(),o,n,i),conversionFn:async(o,i,s)=>(await t.convertDocToImage(n,t.getFileIdentifier$1(o,s),e)).path,getAdoptionSnackbarProps:i=>t.getAdoptionSnackbarProps({user:n,conversionType:C,folderRuleAction:"image_conversion",fileType:e,resultPath:i,source:s,nsId:o[0].ns_id}),outputExt:e})}}))),y="media-remux",L=(e,n,i)=>(s,a,l)=>{const{source:r}=l;return t.convertFileAndShowSnackbar({...l,file:s[0],user:a,conversionType:y,folderRuleAction:n,loggingFunctions:t.getConversionLoggingFunctions(y),getStrings:(n,i)=>function(e,n,i,s){const a=t.getDefaultConversionStrings(e,n,i,s);return{...a,failTooLarge:o.intl.formatMessage({id:"D67i/e",defaultMessage:"Couldn't save as {fileType} because the file is too large. The maximum file size is {maxSize} MB."},{fileType:e,maxSize:t.MEDIA_REMUX_FILE_SIZE_LIMIT})}}(e.toUpperCase(),n,a,i),conversionFn:async(o,n,i)=>(await t.mediaRemux(a,t.getFileIdentifier$1(o,i),e)).path,getAdoptionSnackbarProps:n?o=>t.getAdoptionSnackbarProps({user:a,conversionType:y,folderRuleAction:n,fileType:e,resultPath:o,source:r,nsId:s[0].ns_id}):void 0,template:i,outputExt:e,asyncThresholdBytes:134217728})},A=[...t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS.map((e=>({actionText:e.toUpperCase(),actionIcon:n.VideoLine,selector:t.singleFileWithExtensionSelector(t.SUPPORTED_VIDEO_INPUT_EXTENSIONS.filter((t=>t!==e))),convert:L(e,"video_conversion",{sequence:[{workflow_action:{".tag":"video_conversion",format:e}}]})}))),...t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS.map((e=>({actionText:e.toUpperCase(),actionIcon:s.AudioLine,selector:t.singleFileWithExtensionSelector([...t.SUPPORTED_AUDIO_INPUT_EXTENSIONS,...t.SUPPORTED_VIDEO_INPUT_EXTENSIONS].filter((t=>t!==e))),convert:L(e,"audio_conversion",{sequence:[{workflow_action:{".tag":"audio_conversion",format:e}}]})})))],P=[...t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS.map((e=>({actionText:e.toUpperCase(),actionIcon:n.VideoLine,selector:t.strictMultiFileWithExtensionSelector(t.SUPPORTED_VIDEO_INPUT_EXTENSIONS.filter((t=>t!==e))),convert:(t,o,{source:n})=>v({files:t,template:{sequence:[{workflow_action:{".tag":"video_conversion",format:e}}]},conversionType:y,source:n})}))),...t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS.map((e=>({actionText:e.toUpperCase(),actionIcon:s.AudioLine,selector:t.strictMultiFileWithExtensionSelector([...t.SUPPORTED_AUDIO_INPUT_EXTENSIONS,...t.SUPPORTED_VIDEO_INPUT_EXTENSIONS].filter((t=>t!==e))),convert:(t,o,{source:n})=>v({files:t,template:{sequence:[{workflow_action:{".tag":"audio_conversion",format:e}}]},conversionType:y,source:n})})))];const w=t.SUPPORTED_DOC_INPUT_EXTENSIONS.concat(t.SUPPORTED_IMAGE_INPUT_EXTENSIONS),b={jpg:w.filter((e=>"jpg"!==e&&"jpeg"!==e)),png:w.filter((e=>"png"!==e))},R=Object.entries(b).map((([e,o])=>({actionText:e.toUpperCase(),actionIcon:i.ImageLine,selector:t.strictMultiFileWithExtensionSelector(o),convert:(t,o,{source:n})=>v({files:t,conversionType:"image-batch",template:{sequence:[{workflow_action:{".tag":"image_conversion",format:e}}]},source:n})})));var U;e.ConversionActionGroup=void 0,(U=e.ConversionActionGroup||(e.ConversionActionGroup={}))[U.DEFAULT=0]="DEFAULT",U[U.CLOUD_DOCS=1]="CLOUD_DOCS",U[U.VIDEO_SCALE=2]="VIDEO_SCALE";const N=JSON.parse('\n    {"dlink":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<path d=\\"M4.222 12.914a4.5 4.5 0 0 0 6.364 6.364l2.475-2.475-1.414-1.414-2.475 2.475a2.5 2.5 0 0 1-3.536-3.536l3.536-3.535a2.5 2.5 0 0 1 3.535 0l1.061 1.06 1.414-1.414-1.06-1.06a4.5 4.5 0 0 0-6.364 0l-3.536 3.535z\\" fill=\\"currentColor\\"></path><path d=\\"M19.778 10.086a4.5 4.5 0 0 0-6.364-6.364L10.94 6.197l1.414 1.414 2.475-2.475a2.5 2.5 0 0 1 3.535 3.536l-3.535 3.535a2.5 2.5 0 0 1-3.536 0l-1.06-1.06-1.415 1.414 1.06 1.06a4.5 4.5 0 0 0 6.365 0l3.535-3.535z\\" fill=\\"currentColor\\"></path>"},"dropbox_form":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 30"},"dangerouslySetInnerIconHtml":"<path d=\\"M20.907 3.97h-2.819v-.93c0-.69-.559-1.249-1.248-1.249H14.7V.626A.622.622 0 0 0 14.074 0h-5.11a.626.626 0 0 0-.626.626v1.165h-2.13c-.69 0-1.25.56-1.25 1.249v.93H2.132A2.162 2.162 0 0 0 0 6.129v21.53a2.162 2.162 0 0 0 2.13 2.179h18.777a2.162 2.162 0 0 0 2.131-2.18V6.127a2.162 2.162 0 0 0-2.13-2.156zm.053 23.1a.622.622 0 0 1-.626.627H2.687a.626.626 0 0 1-.627-.626V6.776c0-.346.28-.626.627-.626H4.94v1.707a.626.626 0 0 0 .627.627h11.89a.626.626 0 0 0 .63-.666V6.11h2.255a.622.622 0 0 1 .626.627L20.96 27.07z\\" fill=\\"#727880\\" fill-rule=\\"nonzero\\"></path>"},"dropbox_paper":{"attrs":{"width":"30","height":"30","viewBox":"0 0 30 30"},"dangerouslySetInnerIconHtml":"<path fill=\\"none\\" d=\\"M0 0h30v30H0z\\"></path><path fill=\\"none\\" d=\\"M4 3h22.883v24H4z\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 19.71L15.441 27l11.442-7.29-11.441-7.288L4 19.712z\\" fill=\\"#B6D2EA\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 10.288l11.442 7.29 11.441-7.29L15.442 3 4 10.288z\\" fill=\\"#0061FF\\"></path>"},"dropbox_paper_template":{"attrs":{"width":"30","height":"30","viewBox":"0 0 30 30"},"dangerouslySetInnerIconHtml":"<path fill=\\"none\\" d=\\"M0 0h30v30H0z\\"></path><path fill=\\"none\\" d=\\"M4 3h22.883v24H4z\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 19.71L15.441 27l11.442-7.29-11.441-7.288L4 19.712z\\" fill=\\"#6A7C8F\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M4 10.288l11.442 7.29 11.441-7.29L15.442 3 4 10.288z\\" fill=\\"#1B2733\\"></path>"},"dropbox_paper_binder":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g clip-path=\\"url(#mc-partners-dropbox_paper_binder-a)\\" fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" fill=\\"#0061FF\\"><path d=\\"M11.92 22.107l-8.402-5.361-1.491.95L11.92 24l9.894-6.303-1.484-.951-8.41 5.36z\\"></path><path d=\\"M11.92 18.303l-8.402-5.352-1.491.95 9.893 6.304 9.894-6.303-1.484-.951-8.41 5.352z\\"></path><path d=\\"M11.92 14.508l-8.402-5.36-1.491.95 9.893 6.304 9.894-6.304-1.484-.95-8.41 5.36z\\"></path><path d=\\"M2.027 6.303l9.893 6.304 9.894-6.304L11.92 0 2.027 6.303z\\"></path></g><defs><clipPath id=\\"mc-partners-dropbox_paper_binder-a\\"><path fill=\\"#fff\\" d=\\"M0 0h24v24H0z\\"></path></clipPath></defs>"},"google_gdoc":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" fill=\\"#4285F4\\"></rect><path d=\\"M18 7H6v2h12V7zM18 11H6v2h12v-2zM14 15H6v2h8v-2z\\" fill=\\"#fff\\"></path>"},"google_gsheet":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" fill=\\"#0F9D58\\"></rect><path fill=\\"#fff\\" d=\\"M9 5h2v14H9z\\"></path><path fill=\\"#fff\\" d=\\"M5 9h14v2H5z\\"></path>"},"google_gslides":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" fill=\\"#F4B400\\"></rect><path fill=\\"#fff\\" d=\\"M5 8h14v8H5z\\"></path>"},"microsoft_docx":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<path d=\\"M1 3l13-2v21L1 20V3z\\" fill=\\"#2B579A\\"></path><path d=\\"M13 3h9a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1h-9V3z\\" fill=\\"#2B579A\\"></path><path fill=\\"#fff\\" d=\\"M14 4h8v15h-8z\\"></path><path fill=\\"#2B579A\\" d=\\"M13 6h7v1h-7zM13 9h7V8h-7zM13 11h7v-1h-7zM13 13h7v-1h-7zM13 15h7v-1h-7zM13 17h7v-1h-7z\\"></path><path d=\\"M12 8l-1.687 7H8.72l-1.06-4.49a4.084 4.084 0 0 1-.102-.787H7.54c-.027.32-.065.581-.116.786L6.338 15h-1.66L3 8h1.571l.9 4.662c.038.198.066.465.084.8h.027c.011-.25.054-.524.129-.82L6.868 8h1.54l1.046 4.7c.039.173.073.424.102.753h.018c.012-.258.043-.518.094-.781L10.549 8H12z\\" fill=\\"#fff\\"></path>"},"microsoft_pptx":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<path d=\\"M1 3l13-2v21L1 20V3z\\" fill=\\"#D24726\\"></path><path d=\\"M7 13v3H5V7h2.897C9.966 7 11 7.956 11 9.868c0 .904-.298 1.636-.893 2.197A3.388 3.388 0 0 1 7.73 13H7zm0-4.444v2.806h.576c.985 0 1.477-.473 1.477-1.418 0-.925-.492-1.388-1.477-1.388H7z\\" fill=\\"#fff\\"></path><path d=\\"M13 3h9a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1h-9V3z\\" fill=\\"#D24726\\"></path><path fill=\\"#fff\\" d=\\"M14 4h8v15h-8z\\"></path><path fill=\\"#D24726\\" d=\\"M14 15h6v-1h-6zM14 17h6v-1h-6z\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16 13a3 3 0 0 0 3-3h-3V7a3 3 0 0 0 0 6z\\" fill=\\"#D24726\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M20 9a3 3 0 0 0-3-3v3h3z\\" fill=\\"#D24726\\"></path>"},"microsoft_xlsx":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<path d=\\"M1 3l13-2v21L1 20V3z\\" fill=\\"#217346\\"></path><path d=\\"M13 3h9a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1h-9V3z\\" fill=\\"#217346\\"></path><path fill=\\"#fff\\" d=\\"M14 4h8v15h-8z\\"></path><path fill=\\"#217346\\" d=\\"M14 14h2v-1h-2zM14 16h2v-1h-2zM14 10h2V9h-2zM14 12h2v-1h-2zM14 8h2V7h-2zM17 14h3v-1h-3zM17 16h3v-1h-3zM17 10h3V9h-3zM17 12h3v-1h-3zM17 8h3V7h-3z\\"></path><path d=\\"M6 7H4l2 4.5L4 16h2l1-3 1 3h2l-2-4.5L10 7H8l-1 3-1-3z\\" fill=\\"#fff\\"></path>"},"shortcut":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M13 18v-3.016a1.2 1.2 0 0 0-.965-1.177l-.358-.072a1.799 1.799 0 0 1-1.053-.64 4.984 4.984 0 0 0-.335-.666 1.84 1.84 0 0 1-.024-.106l-.168-.836a1.2 1.2 0 0 0-.51-.763l-.567-.377a1.167 1.167 0 0 1-.52-.972.875.875 0 0 0-.875-.875H6.46c-.183.477-.315.98-.39 1.5H4.056A9.001 9.001 0 0 1 22 11a9 9 0 0 1-11 8.777V17.71c.634.189 1.305.29 2 .29zm7-7a6.968 6.968 0 0 1-1.21 3.935 3 3 0 0 0-2.949-2.435h-2.24a.6.6 0 0 1-.6-.6V9.974c0-.29.163-.556.423-.686a1.915 1.915 0 0 0 1.058-1.741l-.05-3.4A7.002 7.002 0 0 1 20 11z\\" fill=\\"#0061FF\\"></path><path d=\\"M8.499 12H2.443l2.253 2.253c-3.513 3.711-2.712 7.364-2.367 8.434.03.095.165.086.192-.01.24-.852 1.147-3.317 4.174-6.425L8.943 18.5v-6.056A.444.444 0 0 0 8.499 12z\\" fill=\\"#717781\\"></path>"}}\n  '),x=e=>{const{name:t}=e,o=m.createElement(r.SvgIconBundle,{focusable:"false",icon:N[t]});return m.createElement(l.Component,{icon:o,...e})};var k;x.displayName="IconPartners",function(e){e.GOOGLE_DRIVE="web_shortcut",e.MICROSOFT_FILE="ms_file"}(k||(k={}));const G=(e,o,n,i,s)=>{t.UDCL.logEvent({class:"cloud_docs",action:"select",object:"cloud_docs_manual_conversion_modal",properties:{accountRole:e,numFiles:o,cloudDocsManualConversionType:n,cloudDocsManualConversionModalButton:i,dontAskAgainChecked:s}})},z=(e,o)=>{t.UDCL.logEvent({class:"cloud_docs",action:"open",object:"cloud_docs_manual_conversion_folder_picker",properties:{accountRole:e,eventState:o}})},H=(e,o,n,i,s,a,l,r)=>{t.UDCL.logEvent({class:"cloud_docs",action:"initiate",object:"cloud_docs_manual_conversion",properties:{accountRole:e,numFiles:o,cloudDocsManualConversionType:n,modalWasShown:i,copyFilePermissions:s,useDefaultFolder:a,cloudDocsManualConversionError:l,eventState:r}})},B=(e,n)=>{switch(n){case k.GOOGLE_DRIVE:return(e=>{const n=new Set;for(const o of e){const e=t.getGoogleFileTypeByPath(o);if(e){n.add(e);continue}const i=t.getMicrosoftFileTypeByPath(o);i&&n.add(t.MicrosoftToGoogleFileTypes[i])}if(1===n.size)for(const e of n)return t.GoogleFileLabels[e];return o.intl.formatMessage({id:"ZYjkCp",defaultMessage:"Google"})})(e);case k.MICROSOFT_FILE:return(e=>{const n=new Set;for(const o of e){const e=t.getMicrosoftFileTypeByPath(o);if(e){n.add(e);continue}const i=t.getGoogleFileTypeByPath(o);i&&n.add(t.GoogleToMicrosoftFileTypes[i])}if(1===n.size)for(const e of n)return t.MicrosoftFileLabels[e];return o.intl.formatMessage({id:"WbLFdE",defaultMessage:"Microsoft"})})(e)}},V=({srcFileNames:e,targetDest:i,folderName:s=u.Strings.MIGRATION_FOLDER,onChangeDriveFolder:a,onLearnMore:l})=>{const r=B(e,i);switch(i){case k.GOOGLE_DRIVE:return o.intl.formatMessage({id:"pU1fIE",defaultMessage:"{numFiles, plural, one{The new {fileTypeLabel} shortcut (to be saved in <folderPickerButton>{folderName}</folderPickerButton>) will inherit the same sharing permissions as the original file. Save as will replace the original file.} other{The new {fileTypeLabel} shortcuts (to be saved in <folderPickerButton>{folderName}</folderPickerButton>) will inherit the same sharing permissions as the original files. Save as will replace the original files.}} <button>Learn more</button>"},{fileTypeLabel:r,numFiles:e.length,folderName:s,bold:e=>m.default.createElement(t.Text,{isBold:!0},e),button:e=>m.default.createElement(t.Button,{variant:"transparent",onClick:l},e),folderPickerButton:e=>m.default.createElement(t.Button,{onClick:a,variant:"transparent",withIconLeft:m.default.createElement(t.UIIcon,{src:n.FolderLine,role:"presentation"})},e)});case k.MICROSOFT_FILE:return o.intl.formatMessage({id:"gctOhH",defaultMessage:"{numFiles, plural, one{The new {fileTypeLabel} file will inherit the same sharing permissions as the original file. Save as will replace the original file.} other{The new {fileTypeLabel} files will inherit the same sharing permissions as the original files. Save as will replace the original files.}} <button>Learn more</button>"},{fileTypeLabel:r,numFiles:e.length,bold:e=>m.default.createElement(t.Text,{isBold:!0},e),button:e=>m.default.createElement(t.Button,{variant:"transparent",onClick:()=>{}},e)})}};var W;!function(e){e.pendingSaveShortcuts=function(e){return o.intl.formatMessage({id:"EXRMbA",defaultMessage:"Saving as {numFiles, plural, one{shortcut} other{shortcuts}} in Google Drive..."},{numFiles:e})},e.pendingSaveMsFiles=function(e){return o.intl.formatMessage({id:"xNu9kx",defaultMessage:"Saving as Microsoft {numFiles, plural, one{file} other{files}}..."},{numFiles:e})},e.successMessageShortcuts=function(e){return o.intl.formatMessage({id:"BwnqL+",defaultMessage:"{numFiles, plural, one{1 file saved as Google file shortcut} other{# files saved as Google file shortcuts}}."},{numFiles:e})},e.successMessageMultipleMsFiles=function(e){return o.intl.formatMessage({id:"ZXYeoK",defaultMessage:"{numFiles} files saved as Microsoft files."},{numFiles:e})},e.successMessageOneShortcut=function(e){return o.intl.formatMessage({id:"osYTsQ",defaultMessage:"{filename} saved to Google Drive."},{filename:e})},e.successMessageOneMsFile=function(e){return o.intl.formatMessage({id:"0kS6qL",defaultMessage:"{filename} saved."},{filename:e})},e.SERVER_ERROR=o.intl.formatMessage({id:"+rrsxb",defaultMessage:"Server error"}),e.srcFilesNotFound=function(e){return o.intl.formatMessage({id:"eRab3W",defaultMessage:"Source {numFiles, plural, one{file} other{files}} not found"},{numFiles:e})},e.srcFilesWrongType=function(e){return o.intl.formatMessage({id:"V0eQ4f",defaultMessage:"Source {numFiles, plural, one{file} other{files}} of the wrong type"},{numFiles:e})},e.GOOGLE_ACCOUNT_NOT_LINKED=o.intl.formatMessage({id:"Qs6YhO",defaultMessage:"Google account not linked"}),e.FOLDER_CREATION_FAILED=o.intl.formatMessage({id:"gBED0D",defaultMessage:"Folder creation failed"}),e.FIND_UNUSED_FILENAME_FAILED=o.intl.formatMessage({id:"UgrtDM",defaultMessage:"Find unused filename failed"}),e.UPLOAD_FAILED=o.intl.formatMessage({id:"MQocdR",defaultMessage:"Upload failed"}),e.GRANT_PERMISSIONS_FAILED=o.intl.formatMessage({id:"OltuRn",defaultMessage:"Grant permissions failed"}),e.CREATE_FILE_FAILED=o.intl.formatMessage({id:"8eZdXo",defaultMessage:"Create file failed"}),e.DELETE_FILE_FAILED=o.intl.formatMessage({id:"QoVCWl",defaultMessage:"Delete file failed"}),e.FIND_FOLDER_FAILED=o.intl.formatMessage({id:"6phdrE",defaultMessage:"Find folder failed"}),e.INVALID_DEST_FOLDER_MIME_TYPE=o.intl.formatMessage({id:"+DHCWS",defaultMessage:"Destination folder invalid"}),e.GOOGLE_SERVER_ERROR=o.intl.formatMessage({id:"gTHqcG",defaultMessage:"Google server error"}),e.NO_WRITE_PERMISSION=o.intl.formatMessage({id:"EYJIs6",defaultMessage:"User has no write access"}),e.singleFileFailSaveShortcut=function({filename:e,rootCause:t}){return e?o.intl.formatMessage({id:"LsI80W",defaultMessage:"{filename} couldn’t be saved to Google Drive ({rootCause})."},{filename:e,rootCause:t}):o.intl.formatMessage({id:"IYz0cM",defaultMessage:"File couldn’t be saved to Google Drive ({rootCause})."},{rootCause:t})},e.singleFileFailSaveMsFile=function({filename:e,rootCause:t}){return e?o.intl.formatMessage({id:"fvHSWo",defaultMessage:"{filename} couldn’t be saved ({rootCause})."},{filename:e,rootCause:t}):o.intl.formatMessage({id:"nARyLu",defaultMessage:"File couldn’t be saved ({rootCause})."},{rootCause:t})},e.multipleFilesPartialFailureShortcuts=function(e){return o.intl.formatMessage({id:"4UgBQ9",defaultMessage:"Some files couldn’t be saved as shortcuts ({rootCause})."},{rootCause:e})},e.multipleFilesFullFailureShortcuts=function(e){return o.intl.formatMessage({id:"Q9gfPh",defaultMessage:"Files couldn’t be saved as shortcuts ({rootCause})."},{rootCause:e})},e.multipleFilesFullFailureMsFile=function(e){return o.intl.formatMessage({id:"O1bxfj",defaultMessage:"Files couldn’t be saved as Microsoft files ({rootCause})."},{rootCause:e})},e.FAILED_TO_GET_GOOGLE_SHORTCUT_SETTINGS=o.intl.formatMessage({id:"AoDCl3",defaultMessage:"Failed to get Google shortcut settings. Please try again."})}(W||(W={}));const j=e=>"ns_path"in e?t.filename(e.ns_path):void 0,X=async e=>{try{const o=new t.DefaultUserApiV2Client(e);return await u.GetShortcutsRoutes(o).rpc("google_shortcut_settings/get",void 0,{})}catch{return t.Snackbar.failSticky(W.FAILED_TO_GET_GOOGLE_SHORTCUT_SETTINGS),null}},q=async({user:e,dontAskMeAgain:o,copyFilePermissions:n})=>{const i=(({dontAskMeAgain:e,copyFilePermissions:t})=>e?t?{".tag":"always"}:{".tag":"never"}:{".tag":"ask_each_time"})({dontAskMeAgain:o,copyFilePermissions:n}),s=new t.DefaultUserApiV2Client(e);try{await u.GetShortcutsRoutes(s).rpc("google_shortcut_settings/set",{copy_permissions_to_google_shortcut:i},{})}catch{}},Q=({user:e,srcFileNames:n,targetDest:i,onUpdateCopyPermissionsSetting:s,onSubmit:l})=>{const[r,c]=a.useState(!1),[{folderName:d,folderId:g},p]=a.useState({folderName:u.Strings.MIGRATION_FOLDER});a.useEffect((()=>{var o,s,a;o=e.role,s=n.length,a=i,t.UDCL.logEvent({class:"cloud_docs",action:"shown",object:"cloud_docs_manual_conversion_modal",properties:{accountRole:o,numFiles:s,cloudDocsManualConversionType:a}})}),[e.role,n.length,i]);const h=a.useCallback((async()=>{z(e.role,"start");try{if(await u.ensureUserHasGddMigrationCompatibleLink(e)!==u.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return void z(e.role,"canceled")}catch(e){const o=u.getUserFriendlyLinkAccountErrorMessage(e);return void(o&&t.Snackbar.failSticky(o))}try{const t=await f.chooseGdriveFolder(e);t?(z(e.role,"success"),p(t)):z(e.role,"canceled")}catch{z(e.role,"failed")}}),[e]),_=()=>{t.open_tab(t.HELP_CENTER_ARTICLE_URL)},S=a.useMemo((()=>(({srcFileNames:e,targetDest:n,dontAskMeAgain:i,folderName:s,onChangeDriveFolder:a,onSetDontAskMeAgain:l,onConvertAndCopy:r,onConvertButDontCopy:c,onLearnMore:d})=>({title:o.intl.formatMessage({id:"taJUkh",defaultMessage:"Save with sharing permissions?"}),bodyText:m.default.createElement(m.default.Fragment,null,V({srcFileNames:e,targetDest:n,folderName:s,onChangeDriveFolder:a,onLearnMore:d})),actions:m.default.createElement(m.default.Fragment,null,m.default.createElement(t.Checkbox,{id:"toggleDontAskMeAgain",checked:i,onChange:e=>l(e.currentTarget.checked),"aria-label":o.intl.formatMessage({id:"PJIYJF",defaultMessage:"Toggle don’t ask me again"})}),m.default.createElement("label",{htmlFor:"toggleDontAskMeAgain"},m.default.createElement(t.Text,null,o.intl.formatMessage({id:"rI2pNz",defaultMessage:"Don’t ask me again"})))),tertiaryActions:m.default.createElement(m.default.Fragment,null,m.default.createElement(t.Button,{variant:"opacity",onClick:c},o.intl.formatMessage({id:"QzQNL5",defaultMessage:"Save without permissions"})),m.default.createElement(t.Button,{variant:"primary",onClick:r},u.Strings.SAVE)),width:"standard",withCloseButton:u.Strings.CLOSE}))({srcFileNames:n,targetDest:i,dontAskMeAgain:r,folderName:d,onChangeDriveFolder:h,onSetDontAskMeAgain:e=>c(e),onConvertAndCopy:()=>{t.Modal$1.close(),s({dontAskMeAgain:r,copyFilePermissions:!0}),G(e.role,n.length,i,"save_with_permissions",r),l({modalWasShown:!0,copyFilePermissions:!0,folderId:g})},onConvertButDontCopy:()=>{t.Modal$1.close(),s({dontAskMeAgain:r,copyFilePermissions:!1}),G(e.role,n.length,i,"save_without_permissions",r),l({modalWasShown:!0,copyFilePermissions:!1,folderId:g})},onLearnMore:_})),[n,i,r,d,h,s,e.role,l,g]);return m.default.createElement(u.ModalTemplate,{open:!0,...S,onRequestClose:()=>{var o,s,a;t.Modal$1.close(),o=e.role,s=n.length,a=i,t.UDCL.logEvent({class:"cloud_docs",action:"dismiss",object:"cloud_docs_manual_conversion_modal",properties:{accountRole:o,numFiles:s,cloudDocsManualConversionType:a}})}})};Q.displayName="ManualConversionComponent";const Y=({user:e,srcFileNames:o,targetDest:n,copyPermissionsSetting:i,onUpdateCopyPermissionsSetting:s,onSubmit:a})=>{switch(i[".tag"]){case"always":return void a({modalWasShown:!1,copyFilePermissions:!0});case"never":return void a({modalWasShown:!1,copyFilePermissions:!1})}t.Modal$1.showInstance(m.default.createElement(Q,{user:e,srcFileNames:o,targetDest:n,onUpdateCopyPermissionsSetting:s,onSubmit:a}))},$=async({files:e,user:o,modalWasShown:n,copyFilePermissions:i,folderId:s})=>{const a="web_shortcut",l=!s,r="none";if(H(o.role,e.length,a,n,i,l,r,"start"),!await u.ensureUserHasLinkedAccountAndReport(o))return;t.Snackbar.sync(W.pendingSaveShortcuts(e.length));const c={keep_original_file:!1,copy_permissions:i,dest_folder_id:s};try{await g.convertToWebShortcutAndWait(o,{...c,src_file_ids:e.map((e=>e.file_id))}),H(o.role,e.length,a,n,i,l,r,"success"),((e,o)=>{o?t.Snackbar.complete(W.successMessageOneShortcut(t.filename(o))):t.Snackbar.complete(W.successMessageShortcuts(e.length))})(e)}catch(s){const r=((e,o)=>{let n=W.SERVER_ERROR;if(o instanceof Error&&o.message&&(n=o.message),1===e.length){const o=j(e[0]);t.Snackbar.failSticky(W.singleFileFailSaveShortcut({filename:o,rootCause:n}))}else t.Snackbar.failSticky(W.multipleFilesFullFailureShortcuts(n));return"server_error"})(e,s);H(o.role,e.length,a,n,i,l,r,"failed")}},J=async({files:e,user:o,modalWasShown:n,copyFilePermissions:i})=>{const s="ms_file",a=void 0,l="none";H(o.role,e.length,s,n,i,a,l,"start");const r=[];for(let t=0;t<e.length;t+=4){const o=e.slice(t,t+4);r.push({src_files:o.map((e=>e.file_id)),keep_original_file:!1,preserve_existing_ms_file:!0,copy_permissions:i})}t.Snackbar.sync(W.pendingSaveMsFiles(e.length));const u=new t.DefaultUserApiV2Client(o);try{const d=await Promise.all(r.map((e=>c.GetCloudDocsRoutes(u).rpc("convert_gdd_to_ms_office_file",e,{}))));H(o.role,e.length,s,n,i,a,l,"success"),((e,o)=>{e.length>1?t.Snackbar.completeSticky(W.successMessageMultipleMsFiles(e.length)):t.Snackbar.completeSticky(W.successMessageOneMsFile(t.filename(o)))})(e,d[0].converted_files[0].dest_file_path)}catch(l){const r=((e,o)=>{let n="server_error",i=W.SERVER_ERROR;if(o instanceof d.AppError)switch(o.error[".tag"]){case"src_file_not_found":n="src_file_not_found",i=W.srcFilesNotFound(e.length);break;case"src_file_wrong_type":n="src_file_wrong_type",i=W.srcFilesWrongType(e.length);break;case"no_write_permission":i=W.NO_WRITE_PERMISSION;break;case"other":n="server_error"}if(1===e.length){const o=j(e[0]);t.Snackbar.failSticky(W.singleFileFailSaveMsFile({filename:o,rootCause:i}))}else t.Snackbar.failSticky(W.multipleFilesFullFailureMsFile(i));return n})(e,l);H(o.role,e.length,s,n,i,a,r,"failed")}},K=["gdoc","gslides","gsheet"],Z=(e,t)=>(o,n)=>!t.some((e=>e(o,n)))&&e(o,n),ee=t.multiFileWithExtensionSelector(["gdoc"]),te=t.multiFileWithExtensionSelector(["gslides"]),oe=t.multiFileWithExtensionSelector(["gsheet"]),ne=Z(t.multiFileWithExtensionSelector(K),[ee,te,oe]),ie=t.multiFileWithExtensionSelector(["gdoc","doc","docx"]),se=t.multiFileWithExtensionSelector(["gslides","ppt","pptx"]),ae=t.multiFileWithExtensionSelector(["gsheet","xls","xlsx"]),le=Z(t.multiFileWithExtensionSelector(K.concat(["doc","docx","ppt","pptx","xls","xlsx"])),[ie,se,ae]);var re;!function(e){e.GOOGLE_DOC_SHORTCUT=o.intl.formatMessage({id:"CKb8d4",defaultMessage:"Google Doc shortcut"}),e.GOOGLE_SLIDES_SHORTCUT=o.intl.formatMessage({id:"f6BDMy",defaultMessage:"Google Slides shortcut"}),e.GOOGLE_SHEET_SHORTCUT=o.intl.formatMessage({id:"4dVxeR",defaultMessage:"Google Sheet shortcut"}),e.GOOGLE_FILE_SHORTCUT=o.intl.formatMessage({id:"c4laUx",defaultMessage:"Google file shortcut"}),e.MICROSOFT_DOC=o.intl.formatMessage({id:"yUBw4G",defaultMessage:"Microsoft Word"}),e.MICROSOFT_SLIDES=o.intl.formatMessage({id:"F/PKmQ",defaultMessage:"Microsoft Powerpoint"}),e.MICROSOFT_SHEET=o.intl.formatMessage({id:"wxiHoJ",defaultMessage:"Microsoft Excel"}),e.MICROSOFT_FILE=o.intl.formatMessage({id:"zNrz5l",defaultMessage:"Microsoft file"})}(re||(re={}));const ce=async(e,t)=>{await(async(e,t)=>{const o=await X(t);o&&Y({user:t,srcFileNames:e.map((e=>{var t;return null!==(t=j(e))&&void 0!==t?t:""})),targetDest:k.GOOGLE_DRIVE,copyPermissionsSetting:o.copy_permissions_to_google_shortcut,onUpdateCopyPermissionsSetting:({dontAskMeAgain:e,copyFilePermissions:o})=>{q({user:t,dontAskMeAgain:e,copyFilePermissions:o})},onSubmit:({modalWasShown:o,copyFilePermissions:n,folderId:i})=>{$({files:e,user:t,modalWasShown:o,copyFilePermissions:n,folderId:i})}})})(e,t)},ue=async(e,t)=>{await(async(e,t)=>{const o=await X(t);o&&Y({user:t,srcFileNames:e.map((e=>{var t;return null!==(t=j(e))&&void 0!==t?t:""})),targetDest:k.MICROSOFT_FILE,copyPermissionsSetting:o.copy_permissions_to_google_shortcut,onUpdateCopyPermissionsSetting:({dontAskMeAgain:e,copyFilePermissions:o})=>{q({user:t,dontAskMeAgain:e,copyFilePermissions:o})},onSubmit:({modalWasShown:o,copyFilePermissions:n})=>{J({files:e,user:t,modalWasShown:o,copyFilePermissions:n})}})})(e,t)},de=({shortcutUrl:e,...t})=>{const o=p.urlToShortcutIconAsset(e,"small");return m.default.createElement("img",{...t,src:o,alt:""})};de.displayName="ShortcutsIcon";const fe=[{actionText:re.GOOGLE_DOC_SHORTCUT,actionIcon:e=>m.default.createElement(de,{...e,shortcutUrl:"docs.google.com/document"}),selector:ie,convert:ce,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.GOOGLE_SLIDES_SHORTCUT,actionIcon:e=>m.default.createElement(de,{...e,shortcutUrl:"docs.google.com/presentation"}),selector:se,convert:ce,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.GOOGLE_SHEET_SHORTCUT,actionIcon:e=>m.default.createElement(de,{...e,shortcutUrl:"docs.google.com/spreadsheets"}),selector:ae,convert:ce,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.GOOGLE_FILE_SHORTCUT,actionIcon:e=>m.default.createElement(de,{...e,shortcutUrl:"www.google.com"}),selector:le,convert:ce,actionGroup:e.ConversionActionGroup.CLOUD_DOCS}],ge=[{actionText:re.MICROSOFT_DOC,actionIcon:e=>m.default.createElement(x,{...e,width:14,height:14,name:"microsoft_docx"}),selector:ee,convert:ue,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.MICROSOFT_SLIDES,actionIcon:e=>m.default.createElement(x,{...e,width:14,height:14,name:"microsoft_pptx"}),selector:te,convert:ue,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.MICROSOFT_SHEET,actionIcon:e=>m.default.createElement(x,{...e,width:14,height:14,name:"microsoft_xlsx"}),selector:oe,convert:ue,actionGroup:e.ConversionActionGroup.CLOUD_DOCS},{actionText:re.MICROSOFT_FILE,actionIcon:n.FileLine,selector:ne,convert:ue,actionGroup:e.ConversionActionGroup.CLOUD_DOCS}],pe=t.SUPPORTED_SCALE_RESOLUTIONS.map((o=>({actionText:`MP4 ${o}P`,actionIcon:n.VideoLine,selector:t.singleFileWithExtensionAndResolutionSelector(t.SUPPORTED_SEGMENT_CONCAT_EXTENSIONS,o),convert:(e,n,i)=>{const{source:s}=i,a={sequence:[{workflow_action:{".tag":"video_scale",scale:he(o)}}]};return t.updateSnackbar({variant:"sync",title:"Loading"}),t.convertSingleFileAsynchronously(e[0],a,s)},actionGroup:e.ConversionActionGroup.VIDEO_SCALE})));function he(e){switch(e){case 360:return{".tag":"res_360_p"};case 720:return{".tag":"res_720_p"};case 1080:return{".tag":"res_1080_p"};case 1440:return{".tag":"res_1440_p"};case 2160:return{".tag":"res_2160_p"};default:return{".tag":"unknown_res"}}}const _e=t.createApiv2Query({nsClient:c.GetCloudDocsRoutes,rpc:"team_settings/get"}),me=[E,F,...O,...D,...R,...A,...P,...ge,...pe],Se=me.concat(...fe);e.getConversionActionsForFiles=(e,o,n,i)=>{if(!e)return me.filter((e=>e.selector(o,n,i)));const s=(e=>{if(!e.is_team)return{gSuiteEnabled:!0};const o={gSuiteEnabled:!1},n=_e.getQueryKey(),i=h.queryClient.getQueryData(n);return i&&i.apiData?(o.gSuiteEnabled=i.apiData.settings[t.CloudDocProviderIntegration.GDD_INTEGRATION][".tag"]===t.IntegrationCreateAndEdit[".tag"],o):o})(e);return(s.gSuiteEnabled?Se:me).filter((e=>e.selector(o,n,i)))}}));
//# sourceMappingURL=c_flows_conversions_conversion_actions.js-vfl5I5pyM.map

//# debugId=07c2287a-ffe4-36f3-bcf0-d36a12c3fbb9