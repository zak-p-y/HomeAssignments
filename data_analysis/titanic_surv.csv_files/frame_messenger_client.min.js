!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FrameMessenger=t():e.FrameMessenger=t()}(self,(()=>(()=>{var e={131:(e,t,s)=>{var r,n;r=[s,t,s(763)],n=function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewFrameMessengerClient=void 0;class r extends s.FrameMessengerClient{constructor(){super(["https://www.dropbox.com","https://www.dropbox.com:443",/^https:\/\/meta-[a-zA-Z0-9\-]+\.dev\.corp\.dropbox\.com(:443)?$/,/^dbx-local:\/\/*/,/^https:\/\/([a-zA-Z0-9]+\.)?(docsend|ducksend|yeetsend)\.com$/,"https://docsend.dropbox.com"])}}t.PreviewFrameMessengerClient=r}.apply(t,r),void 0===n||(e.exports=n)},763:(e,t,s)=>{"use strict";s.r(t),s.d(t,{FrameMessengerClient:()=>n});class r{constructor(e,t=e=>JSON.parse(e.data),s=e=>JSON.stringify(e)){this._window=window,this.handleUntrustedMessage=e=>{if(!this.isOriginAllowed(e.origin))return;let t;try{t=this.receiveMessageConverter(e)}catch(e){return}null!=t.action&&this.handleTrustedMessage(e,t)},this.allowedOrigins=e,this.receiveMessageConverter=t,this.sendMessageConverter=s}getWindow(){return this._window}setWindow(e){this._window=e}startListening(){this.getWindow().addEventListener("message",this.handleUntrustedMessage)}stopListening(){this.getWindow().removeEventListener("message",this.handleUntrustedMessage)}regexIn(e,t){for(const s of t){if(s instanceof RegExp&&e.match(s))return!0;if("string"==typeof s&&s===e)return!0}return!1}static stripStandardPort(e){return"http://"===e.substr(0,7)?e.replace(/:80$/,""):"https://"===e.substr(0,8)?e.replace(/:443$/,""):e}isOriginAllowed(e){return this.regexIn(r.stripStandardPort(e),this.allowedOrigins)}packagePostMessage(e,t){const s={action:e,parameters:t};return this.sendMessageConverter(s)}}class n extends r{constructor(){super(...arguments),this.trustedOriginForPosting=null,this.validActions=[],this.trustedMessageHandler=null,this.parentMessageQueue=[],this.onParentReady=null}configureParentMessaging(e,t,s=null){this.resetOriginsForPosting(),this.validActions=t,this.trustedMessageHandler=e,this.onParentReady=s}startListening(){super.startListening(),this.requestParentOrigin()}postMessageToParent(e,t={}){const s=this.packagePostMessage(e,t);null===this.trustedOriginForPosting?this.parentMessageQueue.push(s):this.getWindow().parent.postMessage(s,this.trustedOriginForPosting)}handleTrustedMessage(e,t){"parent-ready"===t.action&&this.updateParentOrigin(e.origin),-1!==this.validActions.indexOf(t.action)&&null!==this.trustedMessageHandler&&this.trustedMessageHandler(t)}resetOriginsForPosting(){this.trustedOriginForPosting=null}updateParentOrigin(e){const t=this.trustedOriginForPosting;return!!this.isOriginAllowed(e)&&(this.trustedOriginForPosting=e,this.parentMessageQueue.length>0&&(this.parentMessageQueue.forEach((e=>{const t=JSON.parse(e);this.postMessageToParent(t.action,t.parameters)})),this.parentMessageQueue=[]),null!=this.trustedOriginForPosting&&null==t&&null!=this.onParentReady&&this.onParentReady(),!0)}requestParentOrigin(){this.getWindow().parent.postMessage('{"action": "child-requesting-parent-origin"}',"*"),this.getWindow().setTimeout((()=>{null==this.trustedOriginForPosting&&this.requestParentOrigin()}),100)}}}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}return s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(131)})()));
//# sourceMappingURL=frame_messenger_client.min.js.map