!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="721c78e5-4845-3abc-addd-771b9978c28c")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./e_edison","react/jsx-runtime","./c_lodash-es_lodash","./c_fingerprintjs_fpjs-pro-static_fp","./e_core_exception","./c_src_sink_index","./c_api_v2_routes_growth_provider"],(function(e,t,n,r,o,i,a,c,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var d=l(t),f=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n},h=i.getDefaultExportFromCjs(f);var R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var p={default:"endpoint"},v={default:"tlsEndpoint"},E="Client timeout",_="Network connection error",g="Network request aborted",O="Response cannot be parsed",y="Blocked by CSP",m="The endpoint parameter is not a valid URL";function w(e){for(var t="",n=0;n<e.length;++n)if(n>0){var r=e[n].toLowerCase();r!==e[n]?t+=" ".concat(r):t+=e[n]}else t+=e[n].toUpperCase();return t}var I=w("WrongRegion"),S=w("SubscriptionNotActive"),T=w("UnsupportedVersion"),N=w("InstallationMethodRestricted"),b=w("HostnameRestricted"),A=w("IntegrationFailed"),P=w("NetworkRestricted"),C=w("InvalidProxyIntegrationSecret"),L=w("InvalidProxyIntegrationHeaders"),D="API key required",j="API key not found",x="API key expired",F="Request cannot be parsed",k="Request failed",M="Request failed to process",K="Too many requests, rate limit exceeded",V="Not available for this origin",U="Not available with restricted header",q=D,B=j,G=x,J="Failed to load the JS script of the agent",Y="9319";function H(e,t){var n,r,o,i,a,c=[],s=(n=function(e){var t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0);return{current:function(){return t[0]},postpone:function(){var e=t.shift();void 0!==e&&t.push(e)},exclude:function(){t.shift()}}}(e),100,3e3,i=0,r=function(){return Math.random()*Math.min(3e3,100*Math.pow(2,i++))},o=new Set,[n.current(),function(e,t){var i,a=t instanceof Error?t.message:"";if(a===y||a===m)n.exclude(),i=0;else if(a===Y)n.exclude();else if(a===J){var c=Date.now()-e.getTime()<50,s=n.current();s&&c&&!o.has(s)&&(o.add(s),i=0),n.postpone()}else n.postpone();var u=n.current();return void 0===u?void 0:[u,null!=i?i:e.getTime()+r()-Date.now()]}]),u=s[0],l=s[1];if(void 0===u)return Promise.reject(new TypeError("The list of script URL patterns is empty"));return function e(n){var r=new Date,o=function(e){return c.push({url:n,startedAt:r,finishedAt:new Date,error:e})},i=t(n);return i.then((function(){return o()}),o),i.catch((function(t){if(null!=a||(a=t),c.length>=5)throw a;var n=l(r,t);if(!n)throw a;var o,i=n[0],s=n[1];return(o=s,new Promise((function(e){return setTimeout(e,o)}))).then((function(){return e(i)}))}))}(u).then((function(e){return[e,c]}))}var W="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",X=W;function $(e){var t;e.scriptUrlPattern;var n=e.token,r=e.apiKey,o=void 0===r?n:r,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["scriptUrlPattern","token","apiKey"]),a=null!==(t=function(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}(e,"scriptUrlPattern"))&&void 0!==t?t:W,c=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(document,"visibilitychange",t);return t(),[e,n]}(),s=c[0],u=c[1];return Promise.resolve().then((function(){if(!o||"string"!=typeof o)throw new Error(D);return H(function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return"<version>"===e?"3":"<apiKey>"===e?n(t):"<loaderVersion>"===e?n("3.11.7"):e}))}(String(e),t)}))}(a,o),z)})).catch((function(e){throw u(),function(e){return e instanceof Error&&e.message===Y?new Error(J):e}(e)})).then((function(e){var t=e[0],n=e[1];return u(),t.load(R(R({},i),{ldi:{attempts:n,visibilityStates:s}}))}))}function z(e){return function(e,t,n,r){var o,i=document,a="securitypolicyviolation",c=function(t){var n=new URL(e,location.href),r=t.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=t,s())};i.addEventListener(a,c);var s=function(){return i.removeEventListener(a,c)};return null==r||r.then(s,s),Promise.resolve().then(t).then((function(e){return s(),e}),(function(e){return new Promise((function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)})).then((function(){if(s(),o)return n(o);throw e}))}))}(e,(function(){return function(e){return new Promise((function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(e){if(e instanceof Error&&"TypeError"===e.name)return!0;throw e}}(e))throw new Error(m);var r=document.createElement("script"),o=function(){var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},i=document.head||document.getElementsByTagName("head")[0];r.onload=function(){o(),t()},r.onerror=function(){o(),n(new Error(J))},r.async=!0,r.src=e,i.appendChild(r)}))}(e)}),(function(){throw new Error(y)})).then(Q)}function Q(){var e=window,t="__fpjs_p_l_b",n=e[t];if(function(e,t){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==n?void 0:n.load))throw new Error(Y);return n}var Z={load:$,defaultScriptUrlPattern:X,ERROR_SCRIPT_LOAD_FAIL:J,ERROR_API_KEY_EXPIRED:x,ERROR_API_KEY_INVALID:j,ERROR_API_KEY_MISSING:D,ERROR_BAD_REQUEST_FORMAT:F,ERROR_BAD_RESPONSE_FORMAT:O,ERROR_CLIENT_TIMEOUT:E,ERROR_CSP_BLOCK:y,ERROR_FORBIDDEN_ENDPOINT:b,ERROR_FORBIDDEN_HEADER:U,ERROR_FORBIDDEN_ORIGIN:V,ERROR_GENERAL_SERVER_FAILURE:k,ERROR_INSTALLATION_METHOD_RESTRICTED:N,ERROR_INTEGRATION_FAILURE:A,ERROR_INVALID_ENDPOINT:m,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:L,ERROR_INVALID_PROXY_INTEGRATION_SECRET:C,ERROR_NETWORK_ABORT:g,ERROR_NETWORK_CONNECTION:_,ERROR_NETWORK_RESTRICTED:P,ERROR_RATE_LIMIT:K,ERROR_SERVER_TIMEOUT:M,ERROR_SUBSCRIPTION_NOT_ACTIVE:S,ERROR_TOKEN_EXPIRED:G,ERROR_TOKEN_INVALID:B,ERROR_TOKEN_MISSING:q,ERROR_UNSUPPORTED_VERSION:T,ERROR_WRONG_REGION:I,defaultEndpoint:p,defaultTlsEndpoint:v},ee=Object.freeze({__proto__:null,ERROR_API_KEY_EXPIRED:x,ERROR_API_KEY_INVALID:j,ERROR_API_KEY_MISSING:D,ERROR_BAD_REQUEST_FORMAT:F,ERROR_BAD_RESPONSE_FORMAT:O,ERROR_CLIENT_TIMEOUT:E,ERROR_CSP_BLOCK:y,ERROR_FORBIDDEN_ENDPOINT:b,ERROR_FORBIDDEN_HEADER:U,ERROR_FORBIDDEN_ORIGIN:V,ERROR_GENERAL_SERVER_FAILURE:k,ERROR_INSTALLATION_METHOD_RESTRICTED:N,ERROR_INTEGRATION_FAILURE:A,ERROR_INVALID_ENDPOINT:m,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:L,ERROR_INVALID_PROXY_INTEGRATION_SECRET:C,ERROR_NETWORK_ABORT:g,ERROR_NETWORK_CONNECTION:_,ERROR_NETWORK_RESTRICTED:P,ERROR_RATE_LIMIT:K,ERROR_SCRIPT_LOAD_FAIL:J,ERROR_SERVER_TIMEOUT:M,ERROR_SUBSCRIPTION_NOT_ACTIVE:S,ERROR_TOKEN_EXPIRED:G,ERROR_TOKEN_INVALID:B,ERROR_TOKEN_MISSING:q,ERROR_UNSUPPORTED_VERSION:T,ERROR_WRONG_REGION:I,default:Z,defaultEndpoint:p,defaultScriptUrlPattern:X,defaultTlsEndpoint:v,load:$});const te="@fpjs@client@",ne=()=>Date.now();class re{constructor(e){var t;this.tag=e.tag||null,this.linkedId=e.linkedId||null,this.extendedResult=null!==(t=e.extendedResult)&&void 0!==t&&t}toKey(){return`${JSON.stringify(this.tag)}__${JSON.stringify(this.linkedId)}__${this.extendedResult}`}}function oe(e,t){return`${t}__${e}`}function ie(e,t){return e.replace(`${t}__`,"")}class ae{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te;this.prefix=e}set(e,t){window.localStorage.setItem(oe(e,this.prefix),JSON.stringify(t))}get(e){const t=window.localStorage.getItem(oe(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.localStorage.removeItem(oe(e,this.prefix))}allKeys(){return Object.keys(window.localStorage).filter((e=>e.startsWith(this.prefix))).map((e=>ie(e,this.prefix)))}}class ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te;this.prefix=e}set(e,t){window.sessionStorage.setItem(oe(e,this.prefix),JSON.stringify(t))}get(e){const t=window.sessionStorage.getItem(oe(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.sessionStorage.removeItem(oe(e,this.prefix))}allKeys(){return Object.keys(window.sessionStorage).filter((e=>e.startsWith(this.prefix))).map((e=>ie(e,this.prefix)))}}class se{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600,n=arguments.length>2?arguments[2]:void 0;this.cache=e,this.cacheTime=t,this.nowProvider=n||ne}get(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield this.cache.get(e.toKey());if(!t)return;const n=yield this.nowProvider(),r=Math.floor(n/1e3);if(!(t.expiresAt<r))return t.body;yield this.cache.remove(e.toKey())}))}set(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield this.wrapCacheEntry(t);yield this.cache.set(e.toKey(),n)}))}clearCache(){return n.__awaiter(this,void 0,void 0,(function*(){const e=yield this.cache.allKeys();yield Promise.all(e.map((e=>this.cache.remove(e))))}))}wrapCacheEntry(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield this.nowProvider(),n=Math.floor(t/1e3)+this.cacheTime;return{body:e,expiresAt:n}}))}}class ue{constructor(){this.enclosedCache=function(){const e={};return{set(t,n){e[t]=n},get(t){const n=e[t];if(n)return n},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class le{set(){}get(){}remove(){}allKeys(){return[]}}var de;!function(e){e.Memory="memory",e.LocalStorage="localstorage",e.SessionStorage="sessionstorage",e.NoCache="nocache"}(de||(de={}));const fe={[de.Memory]:()=>(new ue).enclosedCache,[de.LocalStorage]:e=>new ae(e),[de.SessionStorage]:e=>new ce(e),[de.NoCache]:()=>new le},he=e=>fe[e];class Re{constructor(e){var t;let n;if(this.inFlightRequests=new Map,this.agentPromise=null,this.customAgent=null==e?void 0:e.customAgent,this.agent={get:()=>{throw new Error("FPJSAgent hasn't loaded yet. Make sure to call the init() method first.")}},this.loadOptions=null==e?void 0:e.loadOptions,(null==e?void 0:e.cache)&&(null==e?void 0:e.cacheLocation)&&console.warn("Both `cache` and `cacheLocation` options have been specified in the FpjsClient configuration; ignoring `cacheLocation` and using `cache`."),null==e?void 0:e.cache)n=e.cache;else{if(this.cacheLocation=(null==e?void 0:e.cacheLocation)||de.SessionStorage,!he(this.cacheLocation))throw new Error(`Invalid cache location "${this.cacheLocation}"`);(e=>{switch(e){case de.SessionStorage:try{window.sessionStorage.getItem("item")}catch(e){return!1}return!0;case de.LocalStorage:try{window.localStorage.getItem("item")}catch(e){return!1}return!0;default:return!0}})(this.cacheLocation)||(this.cacheLocation=de.Memory),n=he(this.cacheLocation)(null==e?void 0:e.cachePrefix)}if((null==e?void 0:e.cacheTimeInSeconds)&&e.cacheTimeInSeconds>86400)throw new Error("Cache time cannot exceed 86400 seconds (24 hours)");const r=null!==(t=null==e?void 0:e.cacheTimeInSeconds)&&void 0!==t?t:3600;this.cacheManager=new se(n,r)}init(e){return n.__awaiter(this,void 0,void 0,(function*(){var t,n;if(!this.loadOptions&&!e)throw new TypeError("No load options provided");const r=Object.assign(Object.assign(Object.assign({},this.loadOptions),e),{integrationInfo:[...(null===(t=this.loadOptions)||void 0===t?void 0:t.integrationInfo)||[],...(null==e?void 0:e.integrationInfo)||[],"fingerprintjs-pro-spa/1.3.2"]});if(!this.agentPromise){const e=null!==(n=this.customAgent)&&void 0!==n?n:ee;this.agentPromise=e.load(r).then((e=>(this.agent=e,e))).catch((e=>{throw this.agentPromise=null,e}))}return this.agentPromise}))}getVisitorData(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const r=Re.makeCacheKey(t).toKey();if(!e.inFlightRequests.has(r)){const o=e._identify(t,n).finally((()=>{e.inFlightRequests.delete(r)}));e.inFlightRequests.set(r,o)}return yield e.inFlightRequests.get(r)}()}))}getVisitorDataFromCache(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=Re.makeCacheKey(t),r=yield e.cacheManager.get(n);return r?Object.assign(Object.assign({},r),{cacheHit:!0}):void 0}()}))}isInCache(){return n.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return Boolean(yield e.getVisitorDataFromCache(t))}()}))}clearCache(){return n.__awaiter(this,void 0,void 0,(function*(){yield this.cacheManager.clearCache()}))}static makeCacheKey(e){return new re(e)}_identify(e){return n.__awaiter(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const r=Re.makeCacheKey(e);if(!n){const e=yield t.cacheManager.get(r);if(e)return Object.assign(Object.assign({},e),{cacheHit:!0})}const o=yield t.agent.get(e);return yield t.cacheManager.set(r,o),Object.assign(Object.assign({},o),{cacheHit:!1})}()}))}}var pe=function(){throw new Error("You forgot to wrap your component in <FpjsProvider>.")},ve={getVisitorData:pe,clearCache:pe},Ee=t.createContext(ve),_e=function(e,t){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},_e(e,t)};var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ge.apply(this,arguments)};function Oe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function ye(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))}function me(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}function we(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Ie="2.6.2",Se=function(){return"undefined"==typeof window||void 0===window.document};function Te(e){var t=e.checkCondition,n=e.intervalMs,r=void 0===n?250:n,o=e.timeoutMs,i=void 0===o?2e3:o;return new Promise((function(e,n){var o=setTimeout((function(){clearInterval(a),n(new Error("Timeout"))}),i),a=setInterval((function(){t()&&(clearTimeout(o),clearInterval(a),e())}),r)}))}var Ne;function be(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"==typeof window)return!1;for(var n=0,r=e;n<r.length;n++)if((0,r[n])())return!0;return!1}((function(){return"next"in window&&Boolean(window.next)}),(function(){return document.querySelector("script[id=__NEXT_DATA__]")}))}function Ae(){var e;return null===(e=null===window||void 0===window?void 0:window.next)||void 0===e?void 0:e.version}function Pe(e){try{var t=JSON.parse("%DETECTED_ENV%");if("object"==typeof t)return t}catch(e){}return n=e.context,be()?{name:Ne.Next,version:Ae()}:function(e){return e.classRenderReceivesAnyArguments}(n)?{name:Ne.Preact}:function(e){return!e.classRenderReceivesAnyArguments}(n)?{name:Ne.React}:{name:Ne.Unknown};var n}!function(e){e.React="react",e.Preact="preact",e.Next="next",e.Unknown="unknown"}(Ne||(Ne={}));var Ce=function(e){function n(t){return e.call(this,t)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.render=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.detectedEnv){var r={context:{classRenderReceivesAnyArguments:e.length>0}};this.detectedEnv=Pe(r)}return t.cloneElement(this.props.children,{env:this.detectedEnv})},n}(t.Component),Le="@fingerprintjs/fingerprintjs-pro-react".split("/")[1];function De(e){var t=e;return o.jsx(Ce,{children:o.jsx(je,ge({},t))})}function je(e){var n=this,r=e.children,i=e.forceRebuild,a=e.cache,c=e.cacheTimeInSeconds,s=e.cachePrefix,u=e.cacheLocation,l=e.customAgent,d=e.loadOptions,f=e.env,h=t.useRef(),R=t.useRef(),p=t.useMemo((function(){return{cache:a,cacheTimeInSeconds:c,cachePrefix:s,cacheLocation:u,customAgent:l,loadOptions:d}}),[d,a,c,s,u,l]),v=t.useCallback((function(){var e="".concat(Le,"/").concat(Ie);if(f){var t=f.version?"".concat(f.name,"/").concat(f.version):f.name;e+="/".concat(t)}var n=ge(ge({},p),{loadOptions:ge(ge({},d),{integrationInfo:we(we([],d.integrationInfo||[],!0),[e],!1)})}),r=new Re(n);return R.current=r.init(),r}),[p,f,d]),E=t.useCallback((function(){return ye(n,void 0,void 0,(function(){var e=this;return me(this,(function(t){switch(t.label){case 0:if(Se())throw new Error("FpjsProvider client cannot be used in SSR");return h.current?[3,2]:[4,Te({checkCondition:function(){return Boolean(h.current)}}).catch((function(){return ye(e,void 0,void 0,(function(){return me(this,(function(e){return v(),[2]}))}))}))];case 1:t.sent(),t.label=2;case 2:return[2,h.current]}}))}))}),[v]),_=t.useCallback((function(e,t){return ye(n,void 0,void 0,(function(){var n;return me(this,(function(r){switch(r.label){case 0:return[4,E()];case 1:return n=r.sent(),[4,R.current];case 2:return r.sent(),[2,n.getVisitorData(e,t)]}}))}))}),[E]),g=t.useCallback((function(){return ye(n,void 0,void 0,(function(){return me(this,(function(e){switch(e.label){case 0:return[4,E()];case 1:return[4,e.sent().clearCache()];case 2:return e.sent(),[2]}}))}))}),[E]),O=t.useMemo((function(){return{clearCache:g,getVisitorData:_}}),[g,_]);return t.useEffect((function(){h.current&&!i||(h.current=v())}),[i,p,v]),o.jsx(Ee.Provider,ge({value:O},{children:r}))}function xe(e,t){if(!e)throw new TypeError("".concat(t," must not be null or undefined"))}function Fe(e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n=ke),xe(e,"getOptions");var o,i,a=(o=e,i=t.useRef(),t.useEffect((function(){i.current=o}),[o]),i.current),c=n.immediate,s=t.useContext(Ee).getVisitorData,u=t.useState({isLoading:!1}),l=u[0],d=u[1],f=t.useCallback((function(t){return void 0===t&&(t={}),ye(r,void 0,void 0,(function(){var n,r,o,i,a,c,u,l;return me(this,(function(f){switch(f.label){case 0:xe(t,"getDataParams"),n=t.ignoreCache,r=Oe(t,["ignoreCache"]),f.label=1;case 1:return f.trys.push([1,3,4,5]),d((function(e){return ge(ge({},e),{isLoading:!0})})),o=e.ignoreCache,i=Oe(e,["ignoreCache"]),a=ge(ge({},i),r),[4,s(a,"boolean"==typeof n?n:o)];case 2:return c=f.sent(),d((function(e){return ge(ge({},e),{data:c,isLoading:!1,error:void 0})})),[2,c];case 3:throw u=f.sent(),l=function(e){return e instanceof Error?e:new Error(String(e))}(u),l.name="FPJSAgentError",d((function(e){return ge(ge({},e),{data:void 0,error:l})})),l;case 4:return d((function(e){return e.isLoading?ge(ge({},e),{isLoading:!1}):e})),[7];case 5:return[2]}}))}))}),[e,s]);t.useEffect((function(){!c||a&&h(e,a)||f().catch((function(e){console.error("Failed to fetch visitor data on mount: ".concat(e))}))}),[c,f,a,e]);var R=l.isLoading,p=l.data,v=l.error;return{getData:f,isLoading:R,data:p,error:v}}var ke={immediate:!0};const Me="abuse",Ke=new n.HiveLogger;function Ve(e,t,n,r,o){const i=s.getMetricsReporter(),a=i.createCounter({ns:"abuse",name:"fingerprintjs/loading_result"},{is_success:String(t),event:e,err:n,region:o});a.increment(),a.record();i.createStats({ns:Me,name:"fingerprintjs/loading_latency"},{is_success:String(t),event:e,err:n,region:o}).record(r)}const Ue={getVisitorData:()=>(c.reportException({err:new Error("Missing <AbuseFpjsProvider> in component tree"),severity:c.SEVERITY.USER_ERROR,tags:["fingerprintjs"]}),Promise.resolve({visitorId:"",requestId:"",sealedResult:""}))},qe=t.createContext(Ue),Be=()=>u.isSeleniumTest()||"undefined"!=typeof jest,Ge=async(e,t,n=2e3,r=!1)=>Be()?{visitorId:"test_visitor_id",requestId:"test_request_id",sealedResult:"test_sealed_result"}:{visitorId:"",requestId:"",sealedResult:""};function Je({region:e,shouldInvokeFPJS:r,children:o}){const{getData:i}=Fe({extendedResult:!0},{immediate:!1}),a=t.useMemo((()=>i),[]),u=d.default.useCallback((async(t,o,i=2e3,u=!1)=>{if(Be()||!r)return await Ge(0,0,i,u);!function(e,t){const n=s.getMetricsReporter().createCounter({ns:"abuse",name:"fingerprintjs/invocation"},{event:e,region:t});n.increment(),n.record()}(t,e);const l=Date.now();try{const r=await a({timeout:i,ignoreCache:u}),s=Date.now(),d=void 0!==r.sealedResult;return function(e,t,r){if(!r.sealedResult)try{Ke.log(new n.FingerprintJsLogsRow({email:t,event:e,request_id:r.requestId,visitor_id:r.visitorId,visitor_found:r.visitorFound,confidence_score:void 0,confidence_comment:r.confidence?r.confidence.comment:"",browser_name:r.browserName,browser_version:r.browserVersion,device:r.device,incognito:r.incognito,ip:r.ip,latitude:r.ipLocation?String(r.ipLocation.latitude):"",longitude:r.ipLocation?String(r.ipLocation.longitude):"",timezone:r.ipLocation?String(r.ipLocation.timezone):"",city:r.ipLocation&&r.ipLocation.city?r.ipLocation.city.name:void 0,country:r.ipLocation&&r.ipLocation.country?r.ipLocation.country.name:void 0,os:r.os,os_version:String(r.osVersion),confidence_score_double:r.confidence.score}))}catch(e){c.reportException({err:e,severity:c.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}}(t,o,r),Ve(t,d,"None",s-l,e),{visitorId:r.visitorId,requestId:r.requestId,sealedResult:r.sealedResult?r.sealedResult:""}}catch(r){const i=Date.now();return function(e,t){try{Ke.log(new n.FingerprintJsLogsRow({email:t,event:e,request_id:"",visitor_id:"",visitor_found:!1,confidence_score:void 0,confidence_comment:"",browser_name:"",browser_version:void 0,device:"",incognito:void 0,ip:"",latitude:"",longitude:"",timezone:"",city:"",country:"",os:"",os_version:"",confidence_score_double:void 0}))}catch(e){c.reportException({err:e,severity:c.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}}(t,o),Ve(t,!1,r instanceof Error?r.message:"Unknown error",i-l,e),c.reportException({err:r,severity:c.SEVERITY.NONCRITICAL,tags:["fingerprintjs"]}),{visitorId:"",requestId:"",sealedResult:""}}}),[a,e,r]),l=d.default.useMemo((()=>({getVisitorData:u})),[u]);return d.default.createElement(d.default.Fragment,null,d.default.createElement(qe.Provider,{value:l},o))}e.AbuseFpjsProvider=({children:e,loadInTest:t=!1,loadingComponent:o=null})=>{const[i,s]=d.default.useState();d.default.useMemo((()=>{Be()?s(new n.FingerPrintJSConstants({token:"test_token",region:"US",shouldInvoke:!1})):async function(e){return await r.Edison.fetch(n.FingerPrintJSService,"FetchConstants",e?{currentUrl:e}:void 0)}().then((e=>{s(e)})).catch((e=>{c.reportException({err:e,severity:c.SEVERITY.NONCRITICAL,tags:["fingerprintjs"]}),s(new n.FingerPrintJSConstants({token:"",region:"US",shouldInvoke:!1}))}))}),[]);const u=d.default.useMemo((()=>({getVisitorData:Ge})),[]);return Be()&&!t?d.default.createElement(qe.Provider,{value:u},e):i?d.default.createElement(d.default.Fragment,null,d.default.createElement(De,{loadOptions:{apiKey:i.token,endpoint:"https://fp.dropbox.com",modules:[a.Pc(),a.dc(),a.Fc()],urlHashing:{path:!0,query:!0,fragment:!0},cacheTimeInSeconds:3600},customAgent:a.FingerprintJS},d.default.createElement(Je,{shouldInvokeFPJS:i.shouldInvoke,region:i.region},e))):d.default.createElement(d.default.Fragment,null,o)},e.useAbuseFpjsContext=()=>t.useContext(qe),e.withAbuseFpjsContext=function(e){const t=t=>d.default.createElement(qe.Consumer,null,(n=>d.default.createElement(e,{...t,fpjsContext:n})));var n;return t.displayName=`WithAbuseFpjsContext(${n=e,n.displayName||n.name||"Component"})`,t}}));
//# sourceMappingURL=c_abuse_fingerprintjs_abuse_fpjs_provider.js-vfl7dgzL4.map

//# debugId=721c78e5-4845-3abc-addd-771b9978c28c