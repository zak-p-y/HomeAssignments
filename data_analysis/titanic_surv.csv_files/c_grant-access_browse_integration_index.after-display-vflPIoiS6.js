!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="12a8de67-e769-331d-904b-70851fd77bbe")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_inband-screen_internals_share-modal-share","./c_core_i18n","./c_common_components_buttons","./c_bem","./c_common_components_layout","./c_api_v2_routes_growth_provider","./e_core_exception","./c_src_sink_index","./c_lodash-es_lodash","./c_hive_schemas_sharing-request_access_user_events","./e_edison","./c_pap-events_navigation_select_create_folder_action","./c_init_data_edison","./c_memoize-one","./c_react-use_misc_util","./e_data_modules_stormcrow","./c_chat_chat_constants","./c_api_v2_unauthed_client","./c_spectrum_util_raf_throttle","./c_core_notify","react-dom","./c_security_csrf_hmac","./c_react_jsx-runtime","./c_watermarking_utils_getImageDefaultSizes","./c_utils_dsx_dsx-react","./c_api-v2-client_src_dropbox","./c_react_query_helpers_queries_login_and_register_constants","./c_abuse_fingerprintjs_abuse_fpjs_provider","react/jsx-runtime","./c_fingerprintjs_fpjs-pro-static_fp","./c_fingerprintjs_botd","./c_browse_welcome_hub_lib_types","./c_shared_with_redux_store","./c_browse_shared_with_api","./c_contacts_contact","./c_validators","./c_dig-components_chip_index","./c_dig-components_typeahead_index","./c_ui_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_ui_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_ui_over-quota-sweep-blocking-modal_use_get_plans","./c_growth-components_over-quota-file-viewer-modal","./c_trial-cards_trial-plan-card","./c_trial-plan-card_components_header","./c_dig-components_combinations_index","./c_react-hookz_web_useRafCallback","./c_dig-icons_assets_ui-icon_line_share","metaserver/static/js/langpack"],(function(e,t,a,r,n,s,o,c,i,l,d,_,m,u,p,f,g,h,b,E,v,I,C,S,O,w,j,x,M,y,P,N,q,A,R,F,k,T,L,D,B,G,z,H,W,U,$,Y,V,J,K){"use strict";function Q(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var X=Q(t);const Z=({objectIdentifier:e,onRequestClose:t,onInbandShareCompleted:n,prefillContacts:s})=>{const[o,c]=X.useState((()=>s?s.map((e=>({".tag":"email",email:e}))):[])),[i,l]=X.useState(""),d=X.useCallback((()=>{a.invalidateObjectMembers(e),a.invalidateSharingObjectMetadata(e),n()}),[e,n]),_=a.useSharingObjectMetadata(e.fileId),m=r.useSharingPrefs(),u=r.useSharingAccountInfo(),p=_.isLoading,f=m.isLoading,g=u.isLoading;return p||f||g?X.createElement(r.LoadingScreen,null):X.createElement(r.Inband,{oid:e,inviteMessage:i,inviteTargets:o,hasUpdatedAccountMetadata:!1,onCloseClick:t,onTargetsDropdownFocusChange:()=>{},onInviteMessageChange:l,onInviteTargetsChange:c,onShareStart:()=>{},onShareFailure:()=>{},onInbandShareSuccess:d,onStartInband:()=>{},onRefreshObjectMetadata:()=>{},onRefreshModal:()=>{}})};Z.displayName="GrantAccessInbandScreen";const ee=e=>e.formatMessage({id:"azBLeN",defaultMessage:"Close"}),te=({children:e,objectIdentifier:t})=>{const n=a.useSharingObjectMetadata(t.fileId),s=!n.isLoading&&!n.isError,o=r.useSharingPrefs(),c=!o.isLoading&&!o.isError;return X.createElement(a.ContextProvider,{context:a.Context$3,value:s?n.output:void 0},X.createElement(r.MetadataProvider,{sharingObjectMetadata:s?n.output:void 0,sharingPrefs:c?o.output:void 0,sharingObjectIdentifier:t,shareMe24Metadata:{isShareMe24:!1}},e))};te.displayName="GrantAccessLoggingMetadataProvider";const ae=({objectIdentifier:e,fileOrFolder:t,sessionId:i,user:l,actionSurface:d,isOpen:_,onRequestClose:m,onInbandShareCompleted:u,onFallback:p,prefillContacts:f})=>{const g=a.getFilename(t),h=()=>{m()},b=()=>X.createElement(X.Fragment,null,X.createElement("div",{className:c.classes.headerSectionTextContainer},X.createElement(a.Text,{size:"medium",isBold:!0,className:c.classes.headerSectionPrimaryText},X.createElement(a.Truncate,{location:.5},n.intl.formatMessage({id:"spRUFl",defaultMessage:"Add people to"}))),X.createElement(a.Text,{size:"small",color:"subtle"},X.createElement(a.Truncate,{location:.5},g))),X.createElement("div",{className:c.classes.headerSectionButtonContainer},X.createElement(s.HeaderIconButton,{onClick:h,variant:"borderless","aria-label":ee(n.intl),"data-testid":"grant-access-close-button"},X.createElement(a.UIIcon,{src:a.CloseLine})))),E=o.is_mobile_or_tablet();return X.createElement(r.SharingSdkProvider,{userApiProps:l,origin:a.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS,actionInfo:{actionSurface:d}},E?X.createElement(a.Drawer.ModalDrawer,{onRequestClose:h,"aria-label":"grant-access-modal-drawer","data-testid":"grant-access-modal-drawer",isOpen:_,alignment:"bottom",height:"100%",shouldAnimate:!0},X.createElement("div",{className:c.classes.drawerOuterWrapper},X.createElement(a.Drawer.Container,null,X.createElement(a.Drawer.Header,{className:c.classes.drawerHeader},X.createElement(a.Drawer.Layout,null,X.createElement(a.Drawer.LayoutItem,{width:"fill"},X.createElement(a.Drawer.Layout,null,X.createElement(b,null))))),X.createElement(a.Drawer.Body,{className:a.cx(c.classes.modalInnerWrapper,c.classes.drawerBody)},X.createElement("div",{style:{padding:"6px"}},X.createElement(te,{objectIdentifier:e},X.createElement(Z,{objectIdentifier:e,onRequestClose:h,onInbandShareCompleted:u,prefillContacts:f}))))))):X.createElement(a.Modal,{width:380,isCentered:!0,open:_,onRequestClose:h},X.createElement("div",{"data-testid":"grant-access-modal",className:c.classes.outerWrapper},X.createElement(a.Modal.Header,{className:c.classes.headerSection},X.createElement(b,null)),X.createElement(a.Modal.Body,{className:c.classes.modalInnerWrapper},X.createElement("div",{style:{padding:"6px"}},X.createElement(te,{objectIdentifier:e},X.createElement(Z,{objectIdentifier:e,onRequestClose:h,onInbandShareCompleted:u,prefillContacts:f})))))))};ae.displayName="GrantAccessModal";const re=e=>{const t=X.useMemo((()=>e.fileOrFolder.is_dir?e.fileOrFolder.target_ns?{type:"shared_folder"}:{type:"file_folder"}:{type:"file",name:a.filename(e.fileOrFolder.fq_path),size:e.fileOrFolder.bytes}),[e.fileOrFolder]),s=X.useMemo((()=>({actionSurface:e.actionSurface,actionElement:e.actionElement,contentAction:"share",tiburonOrigin:a.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,screen:"share_screen",shareModalType:"sm24"})),[e.actionSurface,e.actionElement]),[o,c]=X.useState(a.getObjectIdentifier(e.fileOrFolder));return X.useEffect((()=>{(async()=>{if(!o.fileId||""===o.fileId){const e=await a.fetchLegacySharingObjectMetadataObjectIdentifier(o);c(e)}})()}),[o]),e.isOpen?X.createElement(n.Provider,{value:n.intl},X.createElement(r.MetadataProvider,{shareModalSessionId:e.sessionId,sharingObjectIdentifier:o},X.createElement(a.ContextProvider,{context:r.Context,value:e.sessionId},X.createElement(a.ContextProvider,{context:a.Context$1,value:s},X.createElement(a.ContextProvider,{context:a.Context$2,value:t},X.createElement(ae,{objectIdentifier:o,fileOrFolder:e.fileOrFolder,sessionId:e.sessionId,user:e.user,actionSurface:e.actionSurface,isOpen:e.isOpen,onRequestClose:e.onRequestClose,onInbandShareCompleted:e.onInbandShareCompleted,onFallback:e.onFallback,prefillContacts:e.prefillContacts})))))):null};re.displayName="GrantAccessBrowse",e.GrantAccessBrowse=re}));
//# sourceMappingURL=c_grant-access_browse_integration_index.after-display.js-vflqpyl9O.map

//# debugId=12a8de67-e769-331d-904b-70851fd77bbe