!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="280f216e-5a65-3f51-9aaa-b573c9739b3c")}catch(e){}}();
define(["exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./e_core_exception","./c_src_sink_index","./c_bem","./c_api_v2_routes_growth_provider","./c_lodash-es_lodash","./c_hive_schemas_sharing-request_access_user_events","metaserver/static/js/langpack","./c_init_data_edison","./c_memoize-one","./e_edison","./c_pap-events_navigation_select_create_folder_action","./c_react-use_misc_util","./e_data_modules_stormcrow","./c_chat_chat_constants","./c_api_v2_unauthed_client","./c_spectrum_util_raf_throttle","./c_core_notify","react-dom","./c_security_csrf_hmac","./c_react_jsx-runtime","./c_watermarking_utils_getImageDefaultSizes"],(function(e,t,n,a,r,s,c,o,i,l,u,_,d,m,f,p,b,g,v,C,k,h,S,E,w){"use strict";function y(e){return e&&e.__esModule?e:{default:e}}var R=y(t);a.injectInternalStyle("/static/metaserver/static/js/trash/restoration_complete_banner.module.out-vflUA1bct.css",(e=>"._snackbarContainer_kb4b5_1{bottom:40px;display:flex;justify-content:center;position:fixed;width:100%;z-index:10011}"));const M="_snackbarContainer_kb4b5_1";const I=n.defineMessages({restorationCompleted:{id:"FQvvRc",defaultMessage:"Restoration completed."},view:{id:"C9zFRV",defaultMessage:"View"},close:{id:"oMUzwI",defaultMessage:"Close"}});n.intl.formatMessage({id:"SociMV",defaultMessage:"Loading"});const B=({children:e})=>(()=>{try{return window.self!==window.top}catch(e){return!0}})()?null:R.default.createElement(R.default.Fragment,null,e);B.displayName="RestrictOutsideIframe";const x=({open:e,onClose:t})=>{const r=n.useIntl();return R.default.createElement("div",{className:M},R.default.createElement(a.Snackbar$1,{open:e,preferComposition:!0},R.default.createElement(a.Snackbar$1.Accessory,null,R.default.createElement(a.UIIcon,{src:a.CheckmarkCircleLine})),R.default.createElement(a.Snackbar$1.Content,null,R.default.createElement(a.Snackbar$1.Message,null,r.formatMessage(I.restorationCompleted)),R.default.createElement(a.Snackbar$1.Actions,null,R.default.createElement(a.Button,{variant:"transparent"},r.formatMessage(I.view)),R.default.createElement(a.Button,{variant:"transparent",onClick:t},r.formatMessage(I.close))))))};x.displayName="RestorationSnackbarBanner";const N=({children:e})=>{const[n,s]=t.useState(!1),[c,o]=t.useState(!0),i=t.useRef(null);return t.useEffect((()=>{const e=async()=>{try{const t=await async function(){const e=function(e){return e.ns("deleted_files")}(new a.ActiveUserApiV2Client);return(await e.rpc("get_restore_processes_bolt_token",void 0,{})).token}(),n=new a.SignedChannelState(t.channel_id.app_id,t.channel_id.unique_id,t.revision,t.token),r=()=>{s(!0)},c=async()=>{i.current&&(i.current.unsubscribe(),i.current=null),e()};i.current=new a.MetaserverBoltClient([n],r,c),i.current.start()}catch(e){const t=JSON.stringify(e);if(r.NOISY_ERROR_SUBSTRINGS.some((e=>t.includes(e))))return;r.reportException({err:e,severity:r.SEVERITY.NONCRITICAL,tags:["restoration-complete-banner","bolt-token-failure"],exc_extra:{component:"RestorationCompleteBanner"}})}finally{o(!1)}};return e(),()=>{i.current&&(i.current.unsubscribe(),i.current=null)}}),[]),e?R.default.cloneElement(e,{open:!c&&n}):R.default.createElement(x,{open:!c&&n,onClose:()=>s(!1)})};N.displayName="BoltConnectedRestorationSnackbarBanner";const O=()=>R.default.createElement(B,null,R.default.createElement(N,null));O.displayName="RestorationCompleteBanner",e.BoltConnectedRestorationSnackbarBanner=N,e.RestorationCompleteBanner=O,e.RestrictOutsideIframe=B}));
//# sourceMappingURL=c_trash_restoration_complete_banner.js-vfl3t3iG7.map

//# debugId=280f216e-5a65-3f51-9aaa-b573c9739b3c