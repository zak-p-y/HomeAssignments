!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1e40210c-2acf-3fa9-9425-5435b722559c")}catch(e){}}();
define(["exports","./c_api_v2_routes_growth_provider","./c_memoize-one"],(function(e,t,n){"use strict";var r,a,o;function i(t){const n=e.Code[t];return"string"!=typeof n?t.toString():n[0].toLowerCase()+n.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}e.MethodKind=void 0,(r=e.MethodKind||(e.MethodKind={}))[r.Unary=0]="Unary",r[r.ServerStreaming=1]="ServerStreaming",r[r.ClientStreaming=2]="ClientStreaming",r[r.BiDiStreaming=3]="BiDiStreaming",function(e){e[e.NoSideEffects=1]="NoSideEffects",e[e.Idempotent=2]="Idempotent"}(a||(a={})),e.Code=void 0,(o=e.Code||(e.Code={}))[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated";class s extends Error{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Code.Unknown,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;var o;super(function(e,t){return e.length?`[${i(t)}] ${e}`:`[${i(t)}]`}(t,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=n;const s=null!==(o=null!=a?a:Array.isArray(r)?void 0:r)&&void 0!==o?o:{};this.metadata=new Headers(s),this.details=[]}}function d(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Code.Unknown,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t instanceof s?t:t instanceof Error?"AbortError"==t.name?new s(t.message,e.Code.Canceled,r):new s(t.message,e.Code.Unknown,r):new s(String(t),n,r)}function c(t,n){return function(e,t){const n={};for(const[r,a]of Object.entries(e.methods)){const o=t(Object.assign(Object.assign({},a),{localName:r,service:e}));null!=o&&(n[r]=o)}return n}(t,(r=>{switch(r.kind){case e.MethodKind.Unary:return function(e,t,n){return async function(r,a){var o,i;const s=await e.unary(t,n,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,r);return null===(o=null==a?void 0:a.onHeader)||void 0===o||o.call(a,s.header),null===(i=null==a?void 0:a.onTrailer)||void 0===i||i.call(a,s.trailer),s.message}}(n,t,r);case e.MethodKind.ServerStreaming:return function(e,t,n){return function(r,a){let o;return{[Symbol.asyncIterator]:()=>({async next(){var i,s;o||(o=await e.serverStream(t,n,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,r),null===(i=null==a?void 0:a.onHeader)||void 0===i||i.call(a,o.header));const d=await o.read();return d.done?(null===(s=null==a?void 0:a.onTrailer)||void 0===s||s.call(a,o.trailer),{done:!0,value:void 0}):{done:!1,value:d.value}}})}}}(n,t,r);default:return null}}))}function l(e,t){return t.concat().reverse().reduce(((e,t)=>t(e)),e)}function u(t){let n,r=new Uint8Array(0);function a(e){const t=new Uint8Array(r.length+e.length);t.set(r),t.set(e,r.length),r=t}return new ReadableStream({start(){n=t.getReader()},async pull(t){let o;for(;;){if(void 0===o&&r.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+r[t];o={flags:r[0],length:e}}if(void 0!==o&&r.byteLength>=o.length+5)break;const e=await n.read();if(e.done)break;a(e.value)}if(void 0===o)return 0==r.byteLength?void t.close():void t.error(new s("premature end of stream",e.Code.DataLoss));const i=r.subarray(5,5+o.length);r=r.subarray(5+o.length),t.enqueue({flags:o.flags,data:i})}})}function g(e,t,n){const r=e.data.length+5,a=new Uint8Array(t,n,r);a[0]=e.flags;for(let t=e.data.length,n=4;n>0;n--)a[n]=t%256,t>>>=8;return a.set(e.data,5),r}class h extends t.Message{constructor(e){super(),this.code=0,this.message="",this.details=[],t.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new h).fromBinary(e,t)}static fromJson(e,t){return(new h).fromJson(e,t)}static fromJsonString(e,t){return(new h).fromJsonString(e,t)}static equals(e,n){return t.proto3.util.equals(h,e,n)}}function f(t){!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=t;return{async unary(r,a,o,i,s,c){var g,h,f,m;try{return await(h={stream:!1,service:r,method:a,url:`${t.baseUrl.replace(/\/$/,"")}/${r.typeName}/${a.name}`,init:{method:"POST",credentials:null!==(g=t.credentials)&&void 0!==g?g:"same-origin",redirect:"error",mode:"cors"},header:w(s,i),message:c instanceof a.I?c:new a.I(c),signal:null!=o?o:(new AbortController).signal},f=async r=>{var o,i,s;const c=await fetch(r.url,Object.assign(Object.assign({},r.init),{headers:r.header,signal:r.signal,body:p(r.message,t.binaryOptions)})),l=null!==(s=null!==(i=null!==(o=b(c))&&void 0!==o?o:y(c.headers))&&void 0!==i?i:E(c.headers))&&void 0!==s?s:C(c.headers);if(l)throw l;try{if(!c.body)throw"missing response body";const e=u(c.body).getReader(),t=await e.read();if(t.done)throw"premature eof";if(t.value.flags===v)throw _(t.value.data),"unexpected trailer";const r=a.O.fromBinary(t.value.data,n.binaryOptions),o=await e.read();if(o.done)throw"missing trailer";if(o.value.flags!==v)throw"missing trailer";const i=_(o.value.data);if(!(await e.read()).done)throw"extraneous data";return{stream:!1,header:c.headers,message:r,trailer:i}}catch(t){throw d(t,e.Code.Internal,O(c.headers))}},m=n.interceptors,m&&(f=l(f,m)),f(h))}catch(t){throw d(t,e.Code.Internal)}},async serverStream(n,r,a,o,i,c){var g,h,f,m;try{return await(h={stream:!1,service:n,method:r,url:`${t.baseUrl.replace(/\/$/,"")}/${n.typeName}/${r.name}`,init:{method:"POST",credentials:null!==(g=t.credentials)&&void 0!==g?g:"same-origin",redirect:"error",mode:"cors"},header:w(i,o),message:c instanceof r.I?c:new r.I(c),signal:null!=a?a:(new AbortController).signal},f=async a=>{var o,i,c;const l=await fetch(a.url,Object.assign(Object.assign({},a.init),{headers:a.header,signal:a.signal,body:p(a.message,t.binaryOptions)})),g=null!==(c=null!==(i=null!==(o=b(l))&&void 0!==o?o:y(l.headers))&&void 0!==i?i:E(l.headers))&&void 0!==c?c:C(l.headers);if(g)throw g;if(!l.body)throw d("missing response body",e.Code.Internal,O(l.headers));const h=u(l.body).getReader();let f=!1,m=!1;return{stream:!0,service:n,method:r,header:l.headers,trailer:new Headers,async read(){try{const n=await h.read();if(n.done){if(m&&!f)throw new s("missing trailers",e.Code.Internal,O(l.headers));return{done:!0,value:void 0}}return(n.value.flags&v)===v?(f=!0,_(n.value.data).forEach(((e,t)=>this.trailer.append(t,e))),{done:!0,value:void 0}):(m=!0,{done:!1,value:r.O.fromBinary(n.value.data,t.binaryOptions)})}catch(t){throw d(t,e.Code.Unknown,O(l.headers))}}}},m=t.interceptors,m&&(f=l(f,m)),f(h))}catch(t){throw d(t,e.Code.Internal)}}}}function p(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new ArrayBuffer(t.reduce(((e,t)=>e+t.data.length+5),0));let a=0;for(const e of t)a+=g(e,r,a);return new Uint8Array(r)}({data:e.toBinary(t),flags:m})}h.runtime=t.proto3,h.typeName="grpc.status.v1.Status",h.fields=t.proto3.util.newFieldList((()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:t.Any,repeated:!0}]));const m=0,v=128;function w(e,t){const n=new Headers(null!=e?e:{});return n.set("Content-Type","application/grpc-web+proto"),n.set("X-Grpc-Web","1"),n.set("X-User-Agent","@bufbuild/connect-web"),void 0!==t&&n.set("Grpc-Timeout",`${t}m`),n}function y(t){const n=t.get("Content-Type");switch(null==n?void 0:n.toLowerCase()){case"application/grpc-web":case"application/grpc-web+proto":return;case"application/grpc-web-text":case"application/grpc-web-text+proto":return new s("grpc-web-text is not supported",e.Code.Internal,O(t));default:return new s(`unexpected content type: ${String(n)}`,e.Code.Internal,O(t))}}function b(t){var n;if(function(t){switch(t){case 200:return null;case 400:return e.Code.Internal;case 401:return e.Code.Unauthenticated;case 403:return e.Code.PermissionDenied;case 404:return e.Code.Unimplemented;case 429:case 502:case 503:case 504:return e.Code.Unavailable;default:return e.Code.Unknown}}(t.status))return new s(decodeURIComponent(null!==(n=t.headers.get("grpc-message"))&&void 0!==n?n:""),O(t.headers))}function C(t){var n;const r=t.get("grpc-status");if(null===r)return;const a=parseInt(r);return 0!==a?a in e.Code?new s(decodeURIComponent(null!==(n=t.get("grpc-message"))&&void 0!==n?n:""),a,void 0,O(t)):new s(`invalid grpc-status: ${r}`,e.Code.Internal,void 0,O(t)):void 0}function E(n){const r=n.get("grpc-status-details-bin");if(null!=r)try{const a=function(n,r,a){try{const e=t.protoBase64.dec(n);return r?r.fromBinary(e,a):e}catch(t){throw new s(t instanceof Error?t.message:String(t),e.Code.DataLoss)}}(r,h);if(0==a.code)return;const o=new s(a.message,a.code,void 0,n);return o.details.push(...a.details),o}catch(t){const r=d(t,e.Code.Internal);return n.forEach(((e,t)=>r.metadata.append(t,e))),r}}function _(e){var t;const n=function(e){const t=new Headers,n=String.fromCharCode(...e).split("\r\n");for(const e of n){if(""===e)continue;const n=e.indexOf(":");if(n>0){const r=e.substring(0,n).trim(),a=e.substring(n+1).trim();t.append(r,a)}}return t}(e),r=null!==(t=E(n))&&void 0!==t?t:C(n);if(r)throw r;return n}function O(e){return Object.fromEntries(Array.from(e.entries()))}const A=e=>!!e&&"0"!==e.toString();function S(e){const r={};return e&&(e.activeUser&&A(e.activeUser.id)&&(r["X-Dropbox-Uid"]=e.activeUser.id.toString()),e.activeTeam&&A(e.activeTeam.id)&&(r["X-Dropbox-Teamid"]=e.activeTeam.id.toString()),(e.authRole||e.authActionType)&&(r["X-Dropbox-Team-Authorization"]=JSON.stringify({auth_role:String(e.authRole),auth_action_type:String(e.authActionType)}))),t.getPageAuthChannel()!==t.AuthChannel.OAUTH_TOKEN&&(r["X-CSRF-Token"]=n.mustReadCsrfToken()),r}function T(e,t){const n={grpc_service:t.service.typeName,grpc_method:t.method.name};"code"in e&&(n.grpc_code=(e.code||"").toString());const r="metadata"in e&&e.metadata?e.metadata.get("x-dropbox-request-id"):void 0;r&&(n.xhr_request_id=r);const a=e;return a.excExtra=n,a.tags=["grpc-web"],a}let U=!0;const I=(e,t)=>{"undefined"==typeof jest&&(U&&(console.log("[1;31mTo debug gRPC-web API requests, please install the connect-web devtools extension.[0m\nYou can find it here: https://chromewebstore.google.com/detail/grpc-web-developer-tools/cacoibopgjlodngfokahhkphgcohakai."),U=!1),console.error(`Error in gRPC-web request to ${e}:`,t))},x=[e=>async t=>{try{const n=await e(t);return n.stream?{...n,read:async()=>{try{return await n.read()}catch(e){const n=T(e,t);throw I(t.url,n),n}}}:n}catch(e){const n=T(e,t);throw I(t.url,n),n}}];function N(){return x}function D(e){return e?"zh-TW"===(e=e.replace(/_/gi,"-"))?"zh-Hant-TW":"zh-CN"===e?"zh-Hans-CN":"es"===e?"es-419":"es-ES"===e?"es":e:e}"undefined"!=typeof __CONNECT_WEB_DEVTOOLS__&&(U=!1,x.push(__CONNECT_WEB_DEVTOOLS__)),window.addEventListener("connect-web-dev-tools-ready",(()=>{U=!1,"undefined"==typeof __CONNECT_WEB_DEVTOOLS__||x.includes(__CONNECT_WEB_DEVTOOLS__)||x.push(__CONNECT_WEB_DEVTOOLS__)}));const P="/web-grpc/edison";function R(e=""){return"undefined"!=typeof window?window.location.host:n.URI.parse(e).getAuthority()}const L=e=>async n=>{const r=t.getRequestOriginalUrl(),a={"Accept-Language":D(t.getPageLocale()),"X-Edison-Atlasservlet":t.getAtlasservlet(),"X-Edison-Page-Name":t.getPageName(),"X-Edison-Original-Url":r,"X-Edison-Original-Referer":t.getRequestOriginalReferrer()||"","X-Edison-Prompt-Controller":t.getInitData().deprecatedPromptController||"","X-Edison-Prompt-Action":t.getInitData().deprecatedPromptAction||"","X-Dropbox-Browser-Id":t.getDeviceIdHex(),"X-Dropbox-Authority":R(r),...S(t.getAuthRequestInfo()),...t.getExtraHttpRequestHeaders()};return t.getPageName()&&(a["X-Dropbox-Client-Yaps-Attribution"]=`${t.getAtlasservlet()}:${t.getPageName()}`),Object.entries(a).filter((([e,t])=>!!t)).filter((([e,t])=>!(e.toLowerCase().startsWith("x-")&&n.header.has(e)))).forEach((([e,t])=>{t&&!n.header.has(e)&&n.header.set(e,t)})),await e(n)};function k(e=P){return f({baseUrl:e,interceptors:[L,...N()]})}e.ConnectError=s,e.createEdisonGRPCWebPromiseClient=function(e,t=P){return c(e,k(t))},e.createEdisonGrpcWebTransport=k,e.createGrpcWebTransport=f,e.createPromiseClient=c,e.getAuthHeaders=S,e.getDefaultInterceptors=N,e.localeToBcp47LangTag=D}));
//# sourceMappingURL=c_init_data_edison.js-vflYlvnkR.map

//# debugId=1e40210c-2acf-3fa9-9425-5435b722559c