!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="440dc266-af35-3a9c-a45e-2abec0cf6697")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_api_v2_routes_growth_provider","./c_memoize-one","./c_core_i18n","./c_core_notify","./c_maestro_nav_shared_code_dropbox_logo","./c_signup_signin_unified_susi","./c_bem","./c_lodash-es_lodash","./c_src_sink_index","./e_core_exception","./c_hive_schemas_sharing-request_access_user_events","./e_edison","./c_pap-events_navigation_select_create_folder_action","./c_init_data_edison","./c_react-use_misc_util","./e_data_modules_stormcrow","./c_chat_chat_constants","./c_api_v2_unauthed_client","./c_spectrum_util_raf_throttle","react-dom","./c_security_csrf_hmac","./c_react_jsx-runtime","./c_watermarking_utils_getImageDefaultSizes","metaserver/static/js/langpack","./c_core_transport_query_string_helpers","./c_auth_common_captcha","./c_ui_image","./c_ui_sprite","./c_profile_services_profile_services_link","./c_abuse_login_and_register_constants_fetch","./c_react_query_helpers_queries_login_and_register_constants","./c_unified_susi_register_password_validator","./c_react-use_useEffectOnce","./c_dig-icons_assets_ui-icon_line_pdf","./c_validators","./c_api_v2_routes_password_confirmation_provider","./c_dig-icons_assets_ui-icon_line_upload-folder","./c_dig-components_chip_index","./c_dig-icons_assets_ui-icon_line_multiple-folders","./c_core_toast_toast_on_init","./c_dig-icons_assets_ui-icon_line_rotate-right","./c_dig-icons_assets_ui-icon_fill_notification","./c_dig-icons_assets_ui-icon_fill_phone-support","./c_verify_email_content_code_input","./c_images_icons_ajax-loading-small-blue"],(function(e,t,a,o,s,i,r,n,l,d,c,_,g,m,u,p,h,E,f,S,O,D,L,T,v,I,M,R,A,N,G,y,P,U,x,b,C,H,k,w,V,K,B,F,W,j,z,X){"use strict";function q(e){return e&&e.__esModule?e:{default:e}}var Y=q(t);const J=e=>{e===a.Mode.REGISTER?a.AuthEventLogger.log_web_signup_intent():a.AuthEventLogger.log_web_login_intent()};a.injectInternalStyle("/static/metaserver/static/js/auth/login_or_register/modal.module.out-vfltJ_28U.css",(e=>"._comment-icon-styles_dj9og_1{color:var(--dig-color__accent__cyan)}._comment-icon-styles_dj9og_1,._signature-icon-styles_dj9og_6{margin:var(--dig-spacing__micro__xsmall,4px)}._signature-icon-styles_dj9og_6{color:var(--dig-color__accent__green)}._twinkle-icon-styles_dj9og_11{color:var(--dig-color__accent__purple);margin:var(--dig-spacing__micro__xsmall,4px)}._voyager-susi-avatar_dj9og_16 div{font-size:30px;height:80px;width:80px}._modal-subheader_dj9og_22 strong{font-weight:500}._modal-overflow_dj9og_29>div:first-child{overflow:auto}._positioned-modal-close-button_dj9og_33{position:absolute;right:var(--dig-spacing__micro__small,8px);top:var(--dig-spacing__micro__small,8px)}._positioned-modal-container_dj9og_39{align-items:center;animation:_positioned-modal-animation_dj9og_1 var(--duration__333) var(--easing__enter) forwards;animation-delay:3s;display:flex;flex-direction:column;opacity:0;padding-bottom:var(--dig-spacing__macro__medium,32px);position:fixed;transform:translateY(175px);visibility:hidden;width:415px;z-index:1000}@keyframes _positioned-modal-animation_dj9og_1{0%{opacity:0;transform:translateY(175px);visibility:hidden}to{opacity:1;transform:translateY(0);visibility:visible}}"));const Q="_voyager-susi-avatar_dj9og_16",Z={[a.CommentTextVariant.DEFAULT]:"default-variant",[a.CommentTextVariant.POST]:"post-comment-variant",[a.CommentTextVariant.SUBSCRIBE]:"subscribe-variant",[a.CommentTextVariant.QUICK_REACT]:"post-quick-react-variant"},$={commentRow:{icon:a.CommentLine,iconStyling:"_comment-icon-styles_dj9og_1",valueProp:i.intl.formatMessage({id:"xVmn9z",defaultMessage:"Make comments"})},signatureRow:{icon:a.SignatureLine,iconStyling:"_signature-icon-styles_dj9og_6",valueProp:i.intl.formatMessage({id:"IruW1b",defaultMessage:"Sign documents"})},aiRow:{icon:a.Twinkle2Line,iconStyling:"_twinkle-icon-styles_dj9og_11",valueProp:i.intl.formatMessage({id:"810ARn",defaultMessage:"Ask AI to summarize long documents"})}},ee=({mode:e})=>Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("span",{className:"modal-header__default-text"},i.intl.formatMessage(e===a.Mode.LOGIN?i.defineMessage({id:"nOuyMw",defaultMessage:"Save it for later in your Dropbox account"}):i.defineMessage({id:"eUpi8/",defaultMessage:"Save it for later in Dropbox"})))),te=({className:e,commentTextVariant:t,mode:o})=>{let s;switch(t){case a.CommentTextVariant.POST:s=o===a.Mode.LOGIN?i.intl.formatMessage({id:"KXgMVH",defaultMessage:"To post your comment, sign in to Dropbox."}):i.intl.formatMessage({id:"LakyAx",defaultMessage:"To post your comment, create a free Dropbox account."});break;case a.CommentTextVariant.SUBSCRIBE:s=o===a.Mode.LOGIN?i.intl.formatMessage({id:"oHZbXS",defaultMessage:"To subscribe to this file, sign in to Dropbox."}):i.intl.formatMessage({id:"fy/9XT",defaultMessage:"To subscribe to this file, create a free Dropbox account."});break;case a.CommentTextVariant.QUICK_REACT:s=i.intl.formatMessage({id:"G4gpn1",defaultMessage:"Send your reaction"});break;default:s=o===a.Mode.LOGIN?i.intl.formatMessage({id:"3qW+D4",defaultMessage:"To continue, sign in to Dropbox."}):i.intl.formatMessage({id:"uMjLqH",defaultMessage:"To continue, create a free Dropbox account."})}return Y.default.createElement("div",{className:`text-variant ${e}`},s)},ae=[a.AuthDialogPreviousElementTag.LOG_IN,a.AuthDialogPreviousElementTag.SIGN_UP,a.AuthDialogPreviousElementTag.COPY_TO_DROPBOX,a.AuthDialogPreviousElementTag.SAVE_AS,a.AuthDialogPreviousElementTag.COMMENT,a.AuthDialogPreviousElementTag.JOIN,a.AuthDialogPreviousElementTag.BANNER],oe=(e,t)=>!!(null==e?void 0:e.ownerName)&&!!t&&ae.includes(t),se=({sharedLinkInfo:e,susiStep:t})=>{const{ownerName:o,ownerPhotoUrl:s,url:i}=e,r=t===a.SusiStep.LOGIN_PASSWORD_EMAIL?a.voyagerSusiModalHeaderStep2Login:a.getVoyagerSusiModalHeader(o),n=t===a.SusiStep.REGISTER_EMAIL||t===a.SusiStep.LOGIN_PASSWORD_EMAIL,l=a.getInitials(o||""),d=a.avatarColorPalette(o);let c=a.avatarColorPalette(i);c.background===d.background&&(c=a.avatarColorPalette(l));const _={className:Q,tabIndex:-1,src:s,colorPalette:d,"data-testid":"voyager-avatar-sender"},g={className:Q,tabIndex:-1,isGuest:!0,colorPalette:c,"data-testid":"voyager-avatar-receiver"};return Y.default.createElement("div",{className:a.cx("modal-header",{"modal-header--step-2":n})},Y.default.createElement(a.Facepile,{size:"large","aria-hidden":!0},Y.default.createElement(a.Facepile.Item,{..._},l),Y.default.createElement(a.Facepile.Item,{...g})),Y.default.createElement(a.DWGBox,{paddingTop:3},Y.default.createElement(a.Title,{weightVariant:"emphasized"},r)))};se.displayName="VoyagerSusiModalHeader";class ie extends Y.default.PureComponent{constructor(e){super(e),this.logWebActivityOnce=c.once((()=>((e,t)=>{const s={auth_google:!0,is_edison:o.isServedByEdisonWebServer()};e===a.LoginOrRegisterKind.IMMEDIATE?a.WebMiscActivityLogger.log("signup_modal-show-upfront",s):e===a.LoginOrRegisterKind.DOWNLOAD&&t===a.DownloadAction.DIRECT_DOWNLOAD&&a.WebMiscActivityLogger.log("signup_modal-show-download",s)})(this.props.kind,this.props.downloadAction))),this.resetGOT=()=>{a.GSIEventManager.getGSIState().platformInitialized&&(a.GoogleOneTapPlatform.cancelTOS(),a.GoogleOneTapPlatform.refreshGSIClient())},this.renderHeader=()=>{if(!this.state.shouldShowHeader||this.props.kind===a.LoginOrRegisterKind.DOWNLOAD_PROMPT)return Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"});if(this.state.isThirdPartyRegistrationContinuation)return Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("h1",null,i.intl.formatMessage({id:"Ft3ikL",defaultMessage:"Create account and continue"})));const{commentParams:e,customHeaderContent:t,kind:o,sharedLinkInfo:s,authDialogPreviousElement:r}=this.props;if(s&&oe(s,r))return Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement(se,{sharedLinkInfo:s,susiStep:this.state.susiStep}));if(t){const e=t;return Y.default.createElement(e,{mode:this.state.mode,changeMode:this.toggleMode})}return o===a.LoginOrRegisterKind.COMMENT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement(te,{className:"modal-header__default-text",commentTextVariant:e.variant,mode:this.state.mode}))):o===a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"}):o===a.LoginOrRegisterKind.UNGATED_AI?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),i.intl.formatMessage(a.UNGATED_SUSI_MODAL_HEADER))):o===a.LoginOrRegisterKind.LOGGED_OUT_EDIT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_EDIT_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.SHARED_LINK_UNGATED_EDIT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.SHARED_LINK_UNGATED_EDIT_HEADER)))):o===a.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_PDF_EDIT_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.LOGGED_OUT_PDF_SIGN?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_PDF_SIGN_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.LOGGED_OUT_PDF_SELF_SIGN?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_PDF_SELF_SIGN_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.LOGGED_OUT_PDF_GET_SIGNATURE?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_PDF_GET_SIGNATURE_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT_TEXT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.LOGGED_OUT_PDF_EDIT_TEXT_SUSI_MODAL_HEADER)))):o===a.LoginOrRegisterKind.TRANSCRIPT?Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement("div",{className:"modal-header"},Y.default.createElement(n.DropboxLogo,{className:"modal-header__dropbox-logo"}),Y.default.createElement("div",{className:"modal-header__default-text"},i.intl.formatMessage(a.TRANSCRIPT_SUSI_MODAL_HEADER)))):Y.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"mc-util-modal-header center"},Y.default.createElement(ee,{mode:this.state.mode}))},this.renderFooter=()=>{const{customFooterContent:e}=this.props;if(e){const t=e;return Y.default.createElement(t,null)}return null},this.toggleMode=e=>{e.preventDefault(),this.setState({mode:this.state.mode===a.Mode.LOGIN?a.Mode.REGISTER:a.Mode.LOGIN},(()=>J(this.state.mode)))},this.onAuthenticateSuccess=(e,t)=>{const{mode:o}=this.state,{downloadAction:s,kind:n,loginContinuationUrl:l}=this.props;a.GSIEventManager.sendGSIEvent(a.GSIEvent.REMOVE_PROMPT),o===a.Mode.LOGIN?r.Notify.success(i.intl.formatMessage({id:"Ye/4Vz",defaultMessage:"Successfully signed in to Dropbox"})):(r.Notify.success(i.intl.formatMessage({id:"4wqmq+",defaultMessage:"Successfully signed up for Dropbox"})),this.props.onSignUpSuccess&&this.props.onSignUpSuccess());const d=t&&this.shouldRedirectToTeamDiscoveryPage(t);if(d)return a.redirect(d);if(this.props.onAuthenticateSuccess&&this.props.onAuthenticateSuccess(e,o),n===a.LoginOrRegisterKind.IMMEDIATE||n===a.LoginOrRegisterKind.SIDEBAR||s===a.DownloadAction.DIRECT_DOWNLOAD||n===a.LoginOrRegisterKind.UNGATED_AI||n===a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW)if(o===a.Mode.REGISTER){if(t&&t.force_redirect_url&&t.redirect_url)return a.redirect(t.redirect_url);this.closeModal(void 0,{userSignedIn:!0})}else o===a.Mode.LOGIN&&(l?a.redirect(l):a.reload());else this.closeModal(void 0,{userSignedIn:!0})},this.onCancel=e=>{var t,o,s;(e&&e.stopPropagation(),this.props.preventClose)||(o=this.state.mode,s=null!==(t=this.props.kind)&&void 0!==t?t:void 0,o===a.Mode.REGISTER?a.AuthUXAnalyticsLogger.logSignupModalDismissed(s):a.AuthUXAnalyticsLogger.logLoginModalDismissed(s),this.props.onCancel&&this.props.onCancel(),this.closeModal())},this.closeModal=(e,t)=>{e&&e.stopPropagation(),this.setState({...this.state,isOpen:!1}),a.GoogleOneTapPlatform.getGoogleIframe()||(null==t?void 0:t.userSignedIn)||this.resetGOT()},this.getUnifiedSusiHeader=()=>{switch(this.props.kind){case a.LoginOrRegisterKind.DOWNLOAD_PROMPT:return{secondaryValue:i.intl.formatMessage(this.props.isFolderAction?a.DOWNLOAD_PROMPT_SUSI_MODAL_SUBHEADERS.folder:a.DOWNLOAD_PROMPT_SUSI_MODAL_SUBHEADERS.file)};case a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW:return{primaryValueElement:Y.default.createElement(a.DWGBox,{display:"flex",paddingTop:1.5,paddingBottom:3,alignItems:"flex-start",theme:"coconut-200"},Y.default.createElement(a.DWGTypographyTitle,{size:"small"},i.intl.formatMessage(l.defaultMessages.singleEntrypointHeader))),secondaryValueElement:Y.default.createElement(a.DWGStackVertical,{paddingBottom:3,theme:"coconut-200"},Object.keys($).map((e=>{const{icon:t,iconStyling:o,valueProp:s}=$[e];return Y.default.createElement(a.DWGBox,{display:"flex",justifyContent:"flex-start",alignItems:"center",key:e},Y.default.createElement(a.UIIcon,{src:t,className:o}),Y.default.createElement(a.DWGTypographyV2Paragraph,{size:"standard"},s))})))};default:return{disablePrimary:this.state.shouldShowHeader}}},this.getVoyagerSusiStep2RegisterHeader=()=>({primaryValueElement:this.props.sharedLinkInfo&&Y.default.createElement(se,{sharedLinkInfo:this.props.sharedLinkInfo,susiStep:a.SusiStep.REGISTER_EMAIL}),secondaryValue:this.getVoyagerSusiSubheader()}),this.getVoyagerSusiSubheader=()=>{if(this.props.authDialogPreviousElement===a.AuthDialogPreviousElementTag.JOIN)return i.intl.formatMessage(a.FOLDER_MOUNT_SUSI_MODAL_SUBHEADER)},this.state={mode:e.initialMode||a.Mode.LOGIN,isThirdPartyRegistrationContinuation:!1,isOpen:!0,shouldShowHeader:!0,susiStep:a.SusiStep.INPUT_EMAIL_OR_THIRDPARTY},s.assert(!(e.kind===a.LoginOrRegisterKind.COMMENT&&!e.commentParams),"Comment parameters must be provided if calling this modal from comments code")}componentDidMount(){var e,t,o;null===(t=(e=this.props).onMount)||void 0===t||t.call(e),J(this.state.mode),(async({mode:e,kind:t,authDialogPreviousElement:o,extras:s={}})=>{e===a.Mode.REGISTER?a.AuthUXAnalyticsLogger.logSignupModalShown(t,s):a.AuthUXAnalyticsLogger.logLoginModalShown(t,s);const i=await a.getHashedKeys(a.Context.defaultValue),r=a.getProperties(i),n=a.getTags(i);a.UDCL.logEvent(a.PAP_View_AuthDialog({previousElement:o,...r}),{tags:{...n}})})({mode:this.state.mode,kind:null!==(o=this.props.kind)&&void 0!==o?o:void 0,extras:{...this.props.loggingExtra},authDialogPreviousElement:this.props.authDialogPreviousElement}),this.logWebActivityOnce(),a.GSIEventManager.getGSIState().tosPromptDisplayed&&this.resetGOT()}render(){const{mode:e}=this.state,{id:t,signup_tag:o,webSignInTag:s,customFooterContent:r,loginContinuationUrl:n,additionalLoginData:c,additionalRegisterData:_,showMarketingOptIn:g,encryptionOptions:m,postUpsellRedirectUrl:u,registrationContinuationUrl:p,canRedirect:h,sharedLinkInfo:E,authDialogPreviousElement:f,localStorageConfig:S,preventClose:O}=this.props,D=oe(E,f),L=()=>{let e;switch(this.props.kind){case a.LoginOrRegisterKind.UNGATED_AI:e=a.UNGATED_SUSI_MODAL_SUBHEADER;break;case a.LoginOrRegisterKind.LOGGED_OUT_EDIT:case a.LoginOrRegisterKind.SHARED_LINK_UNGATED_EDIT:case a.LoginOrRegisterKind.TRANSCRIPT:e=a.LOGGED_OUT_EDIT_SUSI_MODAL_SUBHEADER;break;case a.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT_TEXT:case a.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT:case a.LoginOrRegisterKind.LOGGED_OUT_PDF_SIGN:e=a.LOGGED_OUT_PDF_EDIT_SUSI_MODAL_SUBHEADER;break;case a.LoginOrRegisterKind.MOUNT:e=a.FOLDER_MOUNT_SUSI_MODAL_SUBHEADER;break;case a.LoginOrRegisterKind.DOWNLOAD_PROMPT:case a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW:break;default:e=l.defaultMessages.singleEntrypointHeader}const t=D&&this.getVoyagerSusiSubheader()?this.getVoyagerSusiSubheader():e?i.intl.formatMessage(e):null;return t&&Y.default.createElement(a.DWGTypographyV2Label,{className:"_modal-subheader_dj9og_22",size:"standard",weight:"regular",tagName:"h2",marginTop:3,marginBottom:3,textAlign:"center",style:{fontWeight:"normal",color:"black"}},t)},T=a.getSUSIDigTheme(),v=a.getSUSIDigMode(),I=d.is_mobile_or_tablet()?void 0:9998,M=this.state.susiStep===a.SusiStep.REGISTER_EMAIL||this.state.susiStep===a.SusiStep.LOGIN_PASSWORD_EMAIL,R=O?void 0:i.intl.formatMessage({id:"MbL/b4",defaultMessage:"Cancel"});return Y.default.createElement(a.Modal,{"aria-label":re,className:a.cx(T,v,"mc-util-modal mc-util-modal-regular login-or-register-modal","conversion-experiment","_modal-overflow_dj9og_29","login-or-register-modal--unified",{"login-or-register-modal--unified-no-header":!this.state.shouldShowHeader,"login-or-register-modal--voyager":D,"login-or-register-modal--voyager-step-2":D&&M}),id:t,withCloseButton:R,shouldCloseOnOverlayClick:!O,onRequestClose:this.onCancel,open:this.state.isOpen,overlayClassName:this.props.modalOverlayClassName,width:414,modalBaseIndex:I,isCentered:!0},Y.default.createElement("div",{className:a.cx(T,v)},this.renderHeader()),Y.default.createElement(a.Modal.Body,{className:a.cx(T,v,"mc-util-modal-body")},(()=>{const t=h||this.props.kind===a.LoginOrRegisterKind.LOGGED_OUT_EDIT||this.props.kind===a.LoginOrRegisterKind.TRANSCRIPT;let i;return this.props.kind===a.LoginOrRegisterKind.UNGATED_AI?i="UNGATED_AI_MODAL":this.props.kind===a.LoginOrRegisterKind.DOWNLOAD_PROMPT?i=this.props.signup_tag:this.props.kind===a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW&&(i="SURFACE_LEVEL_PREVIEW"),Y.default.createElement(Y.default.Fragment,null,this.state.shouldShowHeader&&L(),Y.default.createElement(l.UnifiedSusi,{appleLoginProps:this.props.kind===a.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW?{enabledInSignUpForm:!1}:{},localStorageConfig:S,mode:e,canRedirect:t,enableGoogleOneTap:!1,registerProps:{registrationContinuationUrl:p||n,onRegisterSuccess:(e,t)=>{this.setState({mode:a.Mode.REGISTER}),this.onAuthenticateSuccess(l.unifiedRegisteredUserInfoToLegacy(e),t)},marketingOptInProps:{show:g,checked:!1},additionalRegistrationParams:{..._,signup_tag:o||a.RegistrationSource.DEFAULT_USC_MODAL},header:D?this.getVoyagerSusiStep2RegisterHeader():void 0},loginProps:{loginContinuationUrl:n||a.get_href(),encryptionOptions:m,onLoginSuccess:(e,t)=>{this.setState({mode:a.Mode.LOGIN},(()=>J(this.state.mode))),this.onAuthenticateSuccess(l.unifiedLoggedInUserInfoToLegacy(e),t)},additionalLoginParams:{...c,signup_tag:o||void 0},webSignInTag:s},onStepChange:e=>{this.setState({shouldShowHeader:e===l.SusiStep.INPUT_EMAIL_OR_THIRDPARTY,susiStep:a.SusiStep[a.SusiStep[e]]})},header:this.getUnifiedSusiHeader(),googleOneTapProps:{additionalAuthParams:i?{subTag:i,postUpsellRedirectUrl:u||a.get_href(),localStorageSessionId:!(null==S?void 0:S.store)&&(null==S?void 0:S.sessionId)?null==S?void 0:S.sessionId:"",localStorageStoreId:(null==S?void 0:S.store)||"",localStorageFilename:(null==S?void 0:S.filename)||"",localStorageAutoRename:(null==S?void 0:S.autoRename)?S.autoRename.toString():"false"}:{postUpsellRedirectUrl:u||a.get_href(),localStorageSessionId:!(null==S?void 0:S.store)&&(null==S?void 0:S.sessionId)?null==S?void 0:S.sessionId:"",localStorageStoreId:(null==S?void 0:S.store)||"",localStorageFilename:(null==S?void 0:S.filename)||"",localStorageAutoRename:(null==S?void 0:S.autoRename)?S.autoRename.toString():"false"}},implicitTOSVariant:a.getTOSVariant(a.TOSType.UNIFIED_SUSI,"implicit_tos_with_services_agreement")}))})()),Y.default.createElement("div",{className:a.cx(T,v)},r&&this.renderFooter()))}shouldRedirectToTeamDiscoveryPage(e){const{mode:t}=this.state,{kind:o}=this.props;if(o===a.LoginOrRegisterKind.SIDEBAR&&t===a.Mode.REGISTER&&e.force_redirect_url&&e.redirect_url&&e.redirect_url.indexOf("/team/discover/suggest")>-1)return e.redirect_url}}ie.defaultProps={showGoogleRegistration:!0},ie.displayName="LoginOrRegisterModal";const re=i.intl.formatMessage({id:"ByLOds",defaultMessage:"Login or register dialog"}),ne=a.requireCssWithComponent(ie,["/static/metaserver/static/css/spectrum/index.web-vfl6Hbk66.css","/static/metaserver/static/css/components/login_or_register_modal-vflsupYkv.css","/static/metaserver/static/css/legacy_packages/components-vfl_0Xpx8.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/scooter/scooter-scoped-vflNc5lfc.css","/static/metaserver/static/css/recaptcha_challenge-vflrcf67y.css","/static/metaserver/static/css/recaptcha_v2_challenge-vflYEW-GO.css"]);e.DefaultHeaderContent=ee,e.GOOGLE_ONE_TAP_INDEX_DESKTOP=9999,e.LoginOrRegisterModal=ne,e.TestOnlyCommentTextVariantCssClass=Z,e.TestOnlyCommentsHeader=te,e.TestOnlyLoginOrRegisterModal=ie}));
//# sourceMappingURL=c_auth_login_or_register_modal.js-vfljtFIb9.map

//# debugId=440dc266-af35-3a9c-a45e-2abec0cf6697