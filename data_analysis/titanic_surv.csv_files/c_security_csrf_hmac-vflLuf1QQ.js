!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="99a100b4-db93-33e9-97ec-6965e6abd3e0")}catch(e){}}();
define(["require","exports","./c_bem","./c_memoize-one"],(function(e,n,t,r){"use strict";function o(e){return btoa(e).replace(/\//g,"_").replace(/\+/g,"-")}function a(e){return String.fromCharCode(...new Uint8Array(e))}function c(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}async function i(){const n=t.edge&&!t.edgeChromium();if(void 0!==window.crypto.subtle&&!n&&!t.checkBrowserVersion(t.chrome,40,!1))return window.crypto;if(n){const{legacyEdgeWrapper:n}=await new Promise((function(n,t){e(["./c_security_legacy_edge_shim"],n,t)})),t=n();if(void 0!==t)return t}throw function(e){const n=new Error(e);return n.isBrowserNotSupported=!0,n}("WebCrypto not supported")}async function s(e,n){const t=await i(),r=await t.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),o=await t.subtle.sign({name:"HMAC"},r,n);return new Uint8Array(o)}n.b64urldecode=function(e){return c(atob(e.replace(/_/g,"/").replace(/-/g,"+")))},n.b64urlencode=function(e){return o(a(e))},n.b64urlencodeString=o,n.bytesToString=a,n.csrfHmacUrltoken=async function(e){const n=c(e),t=r.readCsrfToken();if(""===t||null===t)throw new Error("Missing CSRF token");const o=c(t),i=await s(o,n);return btoa(a(i))},n.dec2hex=e=>("0"+e.toString(16)).substr(-2),n.encryptWithPublicKey=async function(e,n,t){return i().then((async r=>{const o=r.getRandomValues(new Uint8Array(12)),a=await r.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"]),c=await r.subtle.encrypt({name:"AES-GCM",iv:o},a,n),i=await r.subtle.exportKey("raw",a),s=await r.subtle.importKey("spki",e,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),u=await r.subtle.encrypt({name:"RSA-OAEP"},s,i),l=new ArrayBuffer(2);return new DataView(l).setInt16(0,t),function(...e){let n=0;for(const t of e)n+=t.byteLength;const t=new Uint8Array(n);let r=0;for(const n of e){const e=new Uint8Array(n);t.set(e,r),r+=n.byteLength}return t}(l,u,o,c)}))},n.getRandomValues=async function(e){return(await i()).getRandomValues(e),e},n.hashSHA256=async function(e){const n=await i(),t=await n.subtle.digest("SHA-256",e);return new Uint8Array(t)},n.hmacMessage=s,n.readHmacCookieToken=async function(e,n){const t=e.split(":");if(3!==t.length)return null;const[o,a,s]=t;if("1"!==o)return null;const u=(new TextEncoder).encode(a);let l=decodeURIComponent(s);try{l=atob(l)}catch{return null}const w=c(l),y=null!=n?n:r.readCsrfToken();if(!y)return null;const f=(new TextEncoder).encode(y);return await async function(e,n,t){const r=await i(),o=await r.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["verify"]);return await r.subtle.verify({name:"HMAC"},o,t,n)}(f,u,w)?decodeURIComponent(a):null},n.stringToBytes=c}));
//# sourceMappingURL=c_security_csrf_hmac.js-vfl7SnEIx.map

//# debugId=99a100b4-db93-33e9-97ec-6965e6abd3e0