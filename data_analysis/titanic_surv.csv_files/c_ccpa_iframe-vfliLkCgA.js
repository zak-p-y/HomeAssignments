!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="81d301b9-330f-35fc-8540-e22b7a469e70")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_spectrum_util_raf_throttle","./c_api_v2_routes_growth_provider","./c_core_notify","./c_core_i18n","./c_dig-components_card_index","./c_dig-components_accordion_index","./c_src_sink_index","./c_bem","./c_lodash-es_lodash","./e_core_exception","./c_hive_schemas_sharing-request_access_user_events","./e_edison","./c_pap-events_navigation_select_create_folder_action","./c_init_data_edison","./c_memoize-one","./c_react-use_misc_util","./e_data_modules_stormcrow","./c_chat_chat_constants","./c_api_v2_unauthed_client","react-dom","./c_security_csrf_hmac","./c_react_jsx-runtime","./c_watermarking_utils_getImageDefaultSizes","metaserver/static/js/langpack","react/jsx-runtime"],(function(e,t,n,a,o,i,r,l,s,c,d,u,m,g,E,f,p,_,C,y,v,S,h,P,T,N,b,I){"use strict";function k(e){return e&&e.__esModule?e:{default:e}}var x,A=k(t);!function(e){e.NotEnrolled="NOT_ENROLLED",e.EnrollmentPendingEmailConfirmation="ENROLLMENT_PENDING_EMAIL_CONFIRMATION",e.EnrollmentPendingAccountConfirmation="ENROLLMENT_PENDING_ACCOUNT_CONFIRMATION",e.EnrolledEmail="ENROLLED_EMAIL",e.EnrolledAccount="ENROLLED_ACCOUNT",e.CrossOriginEnrolled="CROSS_ORIGIN_ENROLLED",e.EnrolledViaCookie="ENROLLED_VIA_COOKIES",e.UnenrollmentPendingEmailUIConfirmation="UNENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.UnenrollmentPendingAccountUIConfirmation="UNENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailUIConfirmation="ENROLLMENT_PENDING_EMAIL_UI_CONFIRMATION",e.EnrollmentPendingAccountUIConfirmation="ENROLLMENT_PENDING_ACCOUNT_UI_CONFIRMATION",e.EnrollmentPendingEmailVerificationSent="ENROLLMENT_PENDING_EMAIL_VERIFICATION_SENT",e.EnrollmentPendingAccountVerificationSent="ENROLLMENT_PENDING_ACCOUNT_VERIFICATION_SENT"}(x||(x={}));const O=e=>e===n.UserDNSInitState.LOGGED_IN_ENROLLED?x.EnrolledAccount:e===n.UserDNSInitState.LOGGED_IN_EMAIL_PENDING?x.EnrollmentPendingAccountConfirmation:e===n.UserDNSInitState.LOGGED_OUT_ENROLLED?x.EnrolledEmail:e===n.UserDNSInitState.LOGGED_OUT_EMAIL_PENDING?x.EnrollmentPendingEmailConfirmation:e===n.UserDNSInitState.LOGGED_OUT_GPC_ENABLED?x.EnrollmentPendingEmailUIConfirmation:e===n.UserDNSInitState.CROSS_ORIGIN_ENROLLED?x.CrossOriginEnrolled:e===n.UserDNSInitState.ENROLLED_VIA_COOKIES?x.EnrolledViaCookie:x.NotEnrolled,w=e=>e===x.EnrollmentPendingEmailVerificationSent||e===x.EnrollmentPendingAccountVerificationSent||e===x.EnrollmentPendingEmailUIConfirmation||e===x.EnrollmentPendingAccountUIConfirmation||e===x.EnrollmentPendingEmailConfirmation||e===x.EnrollmentPendingAccountConfirmation||e===x.EnrolledEmail||e===x.EnrolledAccount||e===x.CrossOriginEnrolled||e===x.EnrolledViaCookie,M=e=>e===x.EnrollmentPendingEmailUIConfirmation||e===x.EnrollmentPendingAccountUIConfirmation;function D(e){return e.ns("ccpa")}const U=e=>e.is_signed_in,L=()=>{let e=!0;try{""===Reflect.get(document.constructor.prototype,"cookie",document)&&(e=!1)}catch(t){e=!1}return!e},R=(e,t,a)=>({event_name:t,is_signed_in:U(e)?n.CCPAUserStateTags.SIGNED_IN:n.CCPAUserStateTags.SIGNED_OUT,should_use_app_auth:L()?n.CCPAUserStateTags.SHOULD_USE_APP_AUTH:n.CCPAUserStateTags.SHOULD_NOT_USE_APP_AUTH,error_type:null==a?"null":a}),B=e=>{const t=e&&e.sessionId?e.sessionId:o.getBrowserId();return{user_agent:null==e?void 0:e.userAgent,session_id:t,anon_ip:null==e?void 0:e.anonIp,locale_user_selected:null==e?void 0:e.localeUserSelected,locale_browser_header:null==e?void 0:e.localeBrowserHeader,country:null==e?void 0:e.country,ua_browser_name:null==e?void 0:e.uaBrowserName,ua_browser_version:null==e?void 0:e.uaBrowserVersion,ua_os_name:null==e?void 0:e.uaOsName,ua_os_version:null==e?void 0:e.uaOsVersion}},F=`https://${a.getDomains().APISERVER}`,V=`Basic ${btoa("bvfyoawupclb746:6pv9whg6d9wh8xm")}`;var G;!function(e){e.USER_INPUT="UI",e.COOKIE_AUTO="COOKIE_AUTO",e.GPC_UI="GPC_UI",e.GPC_AUTO="GPC_AUTO"}(G||(G={}));const q=(e,t,a,o,i)=>{if(!t)return void a(!1,"");const r=n.getActiveUserApiV2Properties(),l=B(o);if(n.PrivacyConsentStats.logCounter(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.RESEND_EMAIL,null)),U(e)&&r){const t=D(new n.DefaultUserApiV2Client(r)),o=(e=>e.get_users().map((e=>e.email)))(e);t.rpc("resend_dns_verification_email",{raw_email_addresses:o,logging_context:l},{}).then((e=>{if(a(e.success,""),!e.success)throw new Error("Resend email failed")})).catch((t=>{a(!1,""),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.RESEND_EMAIL_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),t)}))}else if(L()){if(!i)return a(!1,""),void n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.RESEND_EMAIL_ERROR,n.CCPAEventErrorType.CSRF_TOKEN_ERROR),new Error("csrf token not found"));((e,t,a,o,i)=>{fetch(`${F}/2/ccpa/resend_dns_verification_email`,{headers:{"content-type":"text/plain; charset=dropbox-cors-hack",authorization:V},method:"POST",body:JSON.stringify({raw_email_addresses:t,logging_context:i,csrf_token:a})}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{if(o(e.success,""),!e.success)throw new Error("Resend email with app auth failed")})).catch((t=>{o(!1,""),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.RESEND_EMAIL_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),t)}))})(e,t,i,a,l)}else{D(new n.NoAuthApiV2Client).rpc("resend_dns_verification_email",{raw_email_addresses:t,logging_context:l},{}).then((e=>{if(a(e.success,""),!e.success)throw new Error("Resend email failed")})).catch((t=>{a(!1,""),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.RESEND_EMAIL_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),t)}))}},z=(e,t,a,o,i,r,l)=>{const s=n.getActiveUserApiV2Properties(),c=B(o);if(U(t)&&s){D(new n.DefaultUserApiV2Client(s)).rpc("opt_in_dns",{logging_context:c,ccpa_token:i,...l},{}).then((t=>{if(e(t.success),!t.success)throw new Error("Opt in DNS failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_IN_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))}else if(L()){if(!r)return e(!1),void n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_IN_ERROR,n.CCPAEventErrorType.CSRF_TOKEN_ERROR),new Error("csrf token not found"));((e,t,a,o,i,r,l)=>{fetch(`${F}/2/ccpa/opt_in_dns`,{headers:{"content-type":"text/plain; charset=dropbox-cors-hack",authorization:V},method:"POST",body:JSON.stringify({raw_email_address:o,logging_context:i,ccpa_token:r,csrf_token:a,...l})}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((t=>{if(e(t.success),!t.success)throw new Error("Opt in DNS with app auth failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_IN_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))})(e,t,r,a,c,i,l)}else{D(new n.NoAuthApiV2Client).rpc("opt_in_dns",{raw_email_address:a,logging_context:c,ccpa_token:i,...l},{}).then((t=>{if(e(t.success),!t.success)throw new Error("Opt in DNS failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_IN_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))}},H=(e,t,a,o,i,r,l)=>{const s=n.getActiveUserApiV2Properties(),c=B(o);if(U(t)&&s){D(new n.DefaultUserApiV2Client(s)).rpc("opt_out_dns",{logging_context:c,ccpa_token:i,...l},{}).then((t=>{if(e(t.success),!t.success)throw new Error("Opt out DNS failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_OUT_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))}else if(L()){if(!r)return e(!1),void n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_OUT_ERROR,n.CCPAEventErrorType.CSRF_TOKEN_ERROR),new Error("csrf token not found"));((e,t,a,o,i,r,l)=>{fetch(`${F}/2/ccpa/opt_out_dns`,{headers:{"content-type":"text/plain; charset=dropbox-cors-hack",authorization:V},method:"POST",body:JSON.stringify({raw_email_address:o,logging_context:i,ccpa_token:r,csrf_token:a,...l})}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((t=>{if(e(t.success),!t.success)throw new Error("Opt out DNS with app auth failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_OUT_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))})(e,t,r,a,c,i,l)}else{D(new n.NoAuthApiV2Client).rpc("opt_out_dns",{raw_email_address:a,logging_context:c,ccpa_token:i,...l},{}).then((t=>{if(e(t.success),!t.success)throw new Error("Opt out DNS failed")})).catch((a=>{e(!1),n.PrivacyConsentStats.logError(n.PrivacyConsentAmpMetrics.EVENTS,R(t,n.CCPAEvent.DNS_OPT_OUT_ERROR,n.CCPAEventErrorType.UNSUCCESSFUL_RESPONSE),a)}))}},$=(e,t)=>({privacy:t=>A.default.createElement(n.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link",onClick:e,"data-uxa-log":"privacy_consent_banner_privacy_page_link"},t),faq:e=>A.default.createElement(n.Link,{id:"privacy-policy-faq-link",href:"#privacy-policy-faq","data-testid":"privacy-policy-faq-link",onClick:t,"data-uxa-log":"privacy_consent_banner_privacy_policy_faq_link"},e)}),K="ccpa_consent_banner",j="customize_cookies_button",Q="accept_all_cookies_button",W="decline_cookies_button",Y=e=>{const t=e.width>600,a=e.width<486,o={customizeCookiesText:(i=r.intl).formatMessage({id:"5vOzB7",defaultMessage:"Customize cookies"}),declineButtonText:i.formatMessage({id:"TrrEUN",defaultMessage:"Decline"}),acceptAllButtonText:i.formatMessage({id:"OyAa/t",defaultMessage:"Accept All"}),bodyText:(e,t)=>i.formatMessage({id:"n/7wux",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Privacy Policy FAQs</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...$(e,t)}),niraBodyText:(e,t)=>i.formatMessage({id:"sJIhwW",defaultMessage:"We use cookies to provide, improve, protect and promote our services. Visit our <privacy>Privacy Policy</privacy> and <faq>Cookie Policy</faq> to learn more. You can manage your personal preferences, including your â€˜Do not sell or share my personal data to third partiesâ€™ setting using the â€œCustomize cookiesâ€ button below."},{...$(e,t)})};var i;let l="medium",s=12;return t?(l="large",s=24):a&&(l="small",s=8),A.default.createElement(n.Box,{id:K,"data-testid":K,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_banner","data-uxa-interactions":"shown click",role:"dialog","aria-modal":"true","aria-label":"Privacy Consent Banner",tabIndex:0,backgroundColor:"Background Base",borderRadius:"Medium",overflow:"hidden"},A.default.createElement(n.Box,null,A.default.createElement(n.Box,{display:"flex",paddingX:"Micro Medium",style:{paddingTop:t?8:12}},t&&A.default.createElement("div",{"data-uxa-log":"privacy_consent_banner_close_button",style:{marginLeft:"auto"}},A.default.createElement(n.IconButton,{variant:"transparent",className:"dig-Modal-close-btn","aria-label":"Close",onClick:()=>e.setBannerVisible(!1)},A.default.createElement(n.UIIcon,{src:n.CloseLine})))),A.default.createElement(n.Box,{style:{paddingInline:t?24:12}},A.default.createElement(n.Text,{size:t?"medium":"small",style:{lineHeight:a?"12px":""}},e.origin.includes("nira.com")?o.niraBodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick):o.bodyText(e.onPrivacyPageLinkClick,e.onPrivacyPolicyFaqLinkClick))),A.default.createElement(n.Box,{style:{padding:t?24:12,paddingTop:s}},A.default.createElement(n.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center",direction:a?"vertical":"horizontal"},A.default.createElement(n.Split.Item,{marginRight:a?"0":"auto"},A.default.createElement(n.Button,{id:j,"data-testid":j,"data-uxa-log":"privacy_consent_banner_detailed_view_link",variant:"transparent",size:l,onClick:t=>{e.onCustomizeCookiesClick(t),e.setBannerVisible(!1)},style:{width:"100%"}},o.customizeCookiesText)),A.default.createElement(n.Box,{display:"flex"},A.default.createElement(n.Split.Item,{style:{flex:1}},A.default.createElement(n.Button,{id:W,"data-testid":W,"data-uxa-log":"privacy_consent_banner_decline_all_button",variant:"outline",size:l,onClick:t=>{e.onClick(t,W),e.setBannerVisible(!1)},style:{margin:a?"0":void 0,width:"100%"}},o.declineButtonText)),A.default.createElement(n.Split.Item,{style:{flex:1}},A.default.createElement(n.Button,{id:Q,"data-testid":Q,"data-uxa-log":"privacy_consent_banner_accept_all_button",variant:"primary",size:l,onClick:t=>{e.onClick(t,Q),e.setBannerVisible(!1)},style:{margin:a?"0":void 0,width:"100%"}},o.acceptAllButtonText)))))))},J="ccpa-reentry-popout-container",X="ccpa-reentry-popout-button",Z=e=>A.default.createElement(n.Box,{id:J,"data-testid":J,"data-uxa-log":"privacy_consent_reentry_button","data-uxa-interactions":"shown click","data-uxa-hierarchy-group":e.uriForLogging},A.default.createElement("div",{"data-uxa-log":"privacy_consent_reentry_button_into_detailed_view"},A.default.createElement(n.IconButton,{id:X,variant:"filled",onClick:()=>e.onClick(X),style:{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"ðŸª"))),ee="dns-email",te=e=>{e?i.Notify.success(r.intl.formatMessage({id:"GxeB5y",defaultMessage:"Success! Email will be sent shortly."})):i.Notify.error(r.intl.formatMessage({id:"ma1TT4",defaultMessage:"Something went wrong! Try again later."}))},ne=e=>{const t={getLoggedInDNSSettingsText:e=>{const t=a.formatMessage({id:"oUqEwX",defaultMessage:"Settings are saved for the following accounts"}),n=a.formatMessage({id:"6ydDvV",defaultMessage:"Settings will be saved for the following accounts"});return e?t:n},confirmEmailText:(a=r.intl).formatMessage({id:"s5D/gW",defaultMessage:"Please confirm email"}),resendEmailButtonText:a.formatMessage({id:"DKSsPd",defaultMessage:"Resend verification email"}),emailLabel:a.formatMessage({id:"T5sr0i",defaultMessage:"Settings are saved for"}),emailVerificationText:a.formatMessage({id:"TMKkTU",defaultMessage:"You must confirm your email address to save your preferences. We will send you an email from no-reply@dropbox.com. Open the email and click Confirm Email Address to complete your preference submission."}),optedInBannerText:a.formatMessage({id:"QLRtXw",defaultMessage:"Do not sell or share my personal information is active."}),optedOutBannerText:a.formatMessage({id:"5UKyvi",defaultMessage:'You have successfully unenrolled in CCPA\'s "Do not sell or share my personal information".'})};var a;const o=!((i=e.enrollmentState)!==x.EnrollmentPendingAccountUIConfirmation&&i!==x.EnrollmentPendingEmailUIConfirmation&&i!==x.UnenrollmentPendingAccountUIConfirmation&&i!==x.UnenrollmentPendingEmailUIConfirmation&&i!==x.EnrollmentPendingEmailVerificationSent&&i!==x.EnrollmentPendingAccountVerificationSent);var i;const l=e.enrollmentState===x.EnrollmentPendingEmailVerificationSent||e.enrollmentState===x.EnrollmentPendingAccountVerificationSent,s=new Set([...e.userEmails,...e.verifiedEmails,...e.unverifiedEmails]),c=Array.from(s).join(", "),d=o?"":e.unverifiedEmails.join(", "),u=()=>{q(e.viewer,e.unverifiedEmails,te)};let m=null;return e.enrollmentState===x.EnrolledAccount||e.enrollmentState===x.EnrolledEmail||e.enrollmentState===x.EnrollmentPendingAccountVerificationSent||e.enrollmentState===x.EnrollmentPendingAccountConfirmation||e.enrollmentState===x.EnrollmentPendingAccountUIConfirmation||e.enrollmentState===x.UnenrollmentPendingAccountUIConfirmation||e.enrollmentState===x.UnenrollmentPendingEmailUIConfirmation?m=A.default.createElement(n.Stack,{gap:"12"},c&&A.default.createElement(n.Box,null,A.default.createElement(n.Text,null,`${t.getLoggedInDNSSettingsText(!o)}: `),A.default.createElement(n.Text,{isBold:!0},c)),d&&A.default.createElement(A.default.Fragment,null,A.default.createElement(n.Banner,{type:"warning"},A.default.createElement(n.Banner.Message,null,A.default.createElement(n.Text,null,`${t.confirmEmailText}: `),A.default.createElement(n.Text,{isBold:!0},d))),A.default.createElement(n.Button,{variant:"transparent",onClick:u},t.resendEmailButtonText)),M(e.enrollmentState)&&A.default.createElement(n.FormHelperText,null,t.emailVerificationText)):e.enrollmentState===x.EnrollmentPendingEmailVerificationSent||e.enrollmentState===x.EnrollmentPendingEmailUIConfirmation?m=A.default.createElement(n.Stack,{gap:"16"},A.default.createElement(n.Box,null,A.default.createElement(n.FormRow,null,A.default.createElement(n.FormLabel,{htmlFor:"dns-email"},t.emailLabel),A.default.createElement(n.TextInput,{id:ee,"data-testid":ee,name:ee,placeholder:"example@dropbox.com",value:e.email,onChange:t=>e.onEmailChange(t.target.value)})),o&&A.default.createElement(n.FormHelperText,null,t.emailVerificationText))):e.enrollmentState===x.EnrollmentPendingEmailConfirmation&&(m=A.default.createElement(n.Stack,{gap:"12"},A.default.createElement(n.Box,null,A.default.createElement(n.Text,null,`${t.confirmEmailText}: `),A.default.createElement(n.Text,{isBold:!0},d)),A.default.createElement(n.Button,{variant:"transparent",onClick:u},t.resendEmailButtonText))),A.default.createElement(A.default.Fragment,null,m,e.isFlowComplete&&A.default.createElement(n.Banner,{type:"attention"},A.default.createElement(n.Banner.Message,null,l?t.optedInBannerText:t.optedOutBannerText)))};n.injectInternalStyle("/static/metaserver/static/js/ccpa_iframe/ccpa_iframe.module.out-vfl5Mnlyj.css",(e=>"._ccpa-iframe_xv1f5_1{background-color:transparent;border:none;bottom:0;left:0;overflow:hidden;position:fixed;z-index:999999}._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:24px;box-shadow:var(--dig-utilities__boxshadow__floating);left:24px;max-width:600px;width:100%}@media (max-width:648px){._ccpa-iframe_xv1f5_1._banner-visible_xv1f5_11{bottom:12px;left:12px;width:calc(100% - 24px)}}._ccpa-iframe_xv1f5_1:not(._banner-visible_xv1f5_11):not(._floating-button_xv1f5_28){display:none;left:-1px}._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:24px;left:0}@media (max-width:648px){._ccpa-iframe_xv1f5_1._floating-button_xv1f5_28{bottom:12px}}#_ccpa-toggle_xv1f5_1:focus-within{outline:3px solid var(--dig-color__utility__focus-ring);outline-offset:1px}"));const ae="_ccpa-iframe_xv1f5_1",oe="_banner-visible_xv1f5_11",ie="_floating-button_xv1f5_28",re="_ccpa-toggle_xv1f5_1",le="do_not_sell",se="consent-detailed-view",ce="consent-detailed-view-mobile",de="strictly-necessary-only-button",ue="detailed-view-cancel-button",me="save-preferences-button",ge=e=>{const t=t=>{t.target.classList.contains("dig-Toggle-input")||e.onClick()};return A.default.createElement(s.Accordion.Item,{id:`${e.id}-item`,"data-testid":`${e.id}-item`,itemId:e.id,title:e.title,tabIndex:0,style:{cursor:"pointer"},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t(e)}},A.default.createElement(n.Box,{onClick:t,style:{padding:"12px 16px"}},A.default.createElement(n.Box,{display:"flex",justifyContent:"space-between"},A.default.createElement(n.Box,{display:"flex",alignItems:"center"},A.default.createElement(n.UIIcon,{src:n.ChevronDownLine,size:"small",style:{transform:e.isOpen?"rotate(180deg)":""}}),A.default.createElement(n.Text,{isBold:!!e.boldTitle,style:{marginLeft:8}},e.title)),A.default.createElement(n.Toggle,{id:`${e.id}-toggle`,"data-testid":`${e.id}-toggle`,disabled:e.disabled,isToggled:e.isToggled,"aria-checked":e.isToggled,onChange:t=>e.onChange(t.target.checked),wrapperProps:{htmlFor:`${e.id}-toggle`,id:re,"aria-label":`${e.title} toggle`},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.onChange(!t.target.checked)}}))),A.default.createElement(s.Accordion.Panel,{style:{paddingTop:8}},e.children))};ge.displayName="AccordionItem",n.Modal.setAppElement(document.getElementById("root"));const Ee=e=>{const a=e.width<601,o=e.width<486,i={title:(c=r.intl).formatMessage({id:"rmoSqA",defaultMessage:"Update Cookie Preferences"}),dnsTitle:c.formatMessage({id:"B/scGc",defaultMessage:"Do not sell or share my information"}),cookiePreferencesTitle:c.formatMessage({id:"nBH+Cn",defaultMessage:"Cookie Preferences"}),strictlyNecessaryOnlyButtonText:c.formatMessage({id:"lM4asI",defaultMessage:"Strictly necessary only"}),savePreferencesButtonText:c.formatMessage({id:"3lwNvc",defaultMessage:"Save preferences"}),sendVerificationButtonText:c.formatMessage({id:"6cpDJr",defaultMessage:"Send verification"}),descriptionText:(e,t)=>c.formatMessage({id:"OAZ8D0",defaultMessage:"Dropbox uses different categories of cookies to provide, protect, improve, and promote our website and services. Information on these categories and their purposes are described below. For more information please see our <privacy>Privacy Policy</privacy> and <faq>Cookie FAQ page</faq>."},{privacy:t=>A.default.createElement(n.Link,{id:"privacy-page-link",href:"#privacy-page","data-testid":"privacy-page-link","data-uxa-log":"privacy_consent_detailed_view_privacy_page_link",onClick:e},t),faq:e=>A.default.createElement(n.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link","data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link",onClick:t},e)}),dnsDescription:e=>c.formatMessage({id:"brKQ8K",defaultMessage:'Do not sell or share my personal data to third-parties when I visit this website. Enabling this option will disable all cookies except for those classified as "strictly necessary". Visit our <button>Cookie FAQ page</button> for more information.'},{button:t=>A.default.createElement(n.Link,{id:"cookie-faq-link",href:"#cookie-faq-link","data-testid":"cookie-faq-link",onClick:e,"data-uxa-log":"privacy_consent_detailed_view_ccpa_cookie_faq_link"},t)}),gpcSignalText:(e=!1)=>e?c.formatMessage({id:"FbECDH",defaultMessage:"Global Privacy Control enabled."}):c.formatMessage({id:"F0UTLm",defaultMessage:"Global Privacy Control enabled. Disable to modify cookies."})};var c;const d=(e=>({[n.CookieCategory.StrictlyNecessary]:{title:e.formatMessage({id:"586NPL",defaultMessage:"Strictly Necessary"}),text:e.formatMessage({id:"QNuy/o",defaultMessage:"Cookies that are used to operate the website and services, such as to log you in and keep your account secure."})},[n.CookieCategory.MarketingAdvertising]:{title:e.formatMessage({id:"/ECljr",defaultMessage:"General Marketing and Advertising"}),text:e.formatMessage({id:"0YwibY",defaultMessage:"Cookies that are used by Dropbox and our partners to better understand the types of individuals who are interested in our products and services and how we can promote those services based on that information."})},[n.CookieCategory.SocialMediaAdvertising]:{title:e.formatMessage({id:"adix6u",defaultMessage:"Social Media Advertising"}),text:e.formatMessage({id:"kW6BLx",defaultMessage:"Cookies that are used by Dropbox and our partners to understand the effectiveness of our advertisements on social media services. These cookies also help them understand your advertising preferences so they can more effectively show you our advertisements which are relevant to your interests."})},[n.CookieCategory.Analytics]:{title:e.formatMessage({id:"LhEjYu",defaultMessage:"Analytics"}),text:e.formatMessage({id:"c/zwvz",defaultMessage:"Cookies that help us and our partners understand how our websites are engaged with, such as usage statistics or to reconstruct viewed UI elements, in order to improve and customize our services."})},[n.CookieCategory.PerformanceFunctionality]:{title:e.formatMessage({id:"Avfva4",defaultMessage:"Performance and Functionality"}),text:e.formatMessage({id:"h2qu6c",defaultMessage:"Cookies which help us remember your preferences and settings in order to improve your experience when interacting with our sites and services."})}}))(r.intl),u=w(e.enrollmentState),[m,g]=t.useState(u?le:""),[E,f]=t.useState(""),[p,_]=t.useState(i.savePreferencesButtonText);let C;C=a?"calc(100vh - 125px)":o?"calc(100vh - 169px)":"calc(100vh - 165px)";const y=t=>{e.onButtonClick(t)},v=t=>{e.onDNSChange(t),t?(g(le),f(""),e.initEnrollmentState!==x.NotEnrolled||e.loggedIn||_(i.sendVerificationButtonText)):_(i.savePreferencesButtonText)};return e.hideGdpr?A.default.createElement(n.Modal,{id:ce,open:!0,fullScreen:!0,"data-testid":ce,"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},A.default.createElement(n.Modal.Header,{style:{padding:24}},A.default.createElement(n.Modal.Title,{tagName:"h1"},i.dnsTitle)),A.default.createElement(n.Modal.Body,null,A.default.createElement(n.Stack,{gap:"16"},A.default.createElement(n.Box,{display:"flex",flexDirection:"row",style:{gap:32}},A.default.createElement(n.Text,null,i.dnsDescription(e.onCookiesFaqLinkClick)),A.default.createElement(n.Toggle,{id:`${le}-toggle`,"data-testid":`${le}-toggle`,"aria-checked":e.gpcEnabled||u,isToggled:e.gpcEnabled||u,wrapperProps:{htmlFor:`${le}-toggle`,id:re,"aria-label":`${i.dnsTitle} toggle`},onChange:e=>v(e.target.checked),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(!e.target.checked)}})),e.gpcEnabled&&A.default.createElement(n.Banner,{type:"attention"},A.default.createElement(n.Banner.Message,null,i.gpcSignalText(!0))),A.default.createElement(ne,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,onEmailChange:e.handleEmailChange}))),A.default.createElement(n.Modal.Footer,null,A.default.createElement(n.Button,{id:me,"data-testid":me,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:"large",onClick:()=>y(me)},p))):A.default.createElement(n.Modal,{id:se,open:!0,isCentered:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e.onClose,"data-testid":se,contentStyles:{boxShadow:"var(--dig-utilities__boxshadow__floating)"},overlayStyles:{backgroundColor:"rgba(0, 0, 0, 0)"}},A.default.createElement("div",{"data-uxa-hierarchy-group":e.uriForLogging,"data-uxa-log":"privacy_consent_detailed_view","data-uxa-interactions":"shown click"},A.default.createElement("div",{"data-uxa-log":"privacy_consent_detailed_view_cancel_button"},A.default.createElement(n.IconButton,{id:ue,"data-testid":ue,className:"close-btn",variant:"transparent","aria-label":"Close",onClick:()=>y(ue),style:{position:"absolute",top:"8px",right:"8px"}},A.default.createElement(n.UIIcon,{src:n.CloseLine}))),A.default.createElement(n.Modal.Header,{style:{paddingTop:o?12:"",paddingInline:o?16:""}},A.default.createElement(n.Modal.Title,{tagName:"h1"},i.title)),A.default.createElement(n.Modal.Body,{style:{maxHeight:C,paddingInline:o?16:"",overflow:"auto"}},A.default.createElement(n.Stack,{paddingTop:"12",paddingBottom:"24",gap:"24"},A.default.createElement(n.Text,null,i.descriptionText(e.onPrivacyPageLinkClick,e.onCookiesFaqLinkClick)),e.gpcEnabled&&A.default.createElement(n.Banner,{type:"attention"},A.default.createElement(n.Banner.Message,null,i.gpcSignalText())),A.default.createElement(l.CardNamespace,{style:{borderRadius:"var(--dig-radius__medium)"}},A.default.createElement(s.Accordion,{variant:"blades",expandedPanel:m},A.default.createElement(ge,{id:le,title:i.dnsTitle,boldTitle:!0,onClick:()=>{g((e=>e?"":le)),f("")},isOpen:!!m,isToggled:e.gpcEnabled||u,disabled:e.gpcEnabled,onChange:v},A.default.createElement(n.Stack,{gap:"20"},A.default.createElement(n.Text,null,i.dnsDescription(e.onCookiesFaqLinkClick)),u&&A.default.createElement(ne,{viewer:e.viewer,enrollmentState:e.enrollmentState,isFlowComplete:e.isFlowComplete,email:e.email,userEmails:e.userEmails,verifiedEmails:e.verifiedEmails,unverifiedEmails:e.unverifiedEmails,onEmailChange:e.handleEmailChange}))))),A.default.createElement(n.Box,null,A.default.createElement(n.Title,{isBold:!0,size:"small"},i.cookiePreferencesTitle),A.default.createElement(l.CardNamespace,{style:{marginTop:12,borderRadius:"var(--dig-radius__medium)"}},A.default.createElement(s.Accordion,{variant:"blades",expandedPanel:E},Object.entries(e.categoryToggles).map((([t,a])=>{const o=t,i=(e=>e.replace(/\s/g,"_"))(o),{title:r,text:l}=d[o];return A.default.createElement(ge,{key:i,id:i,title:r,isOpen:E===i,isToggled:o===n.CookieCategory.StrictlyNecessary||!e.togglesDisabled&&a,disabled:o===n.CookieCategory.StrictlyNecessary||e.togglesDisabled,onClick:()=>(e=>{g(""),f((t=>t===e?"":e))})(i),onChange:t=>e.onCategoryChange(t,o)},A.default.createElement(n.Text,null,l))}))))))),A.default.createElement(n.Modal.Footer,{hasTopBorder:!0,style:{padding:o?16:""}},A.default.createElement(n.Split,{isFlexGap:!1,gap:"Micro Small",alignY:"center"},A.default.createElement(n.Split.Item,null,A.default.createElement(n.Button,{id:de,"data-testid":de,"data-uxa-log":"privacy_consent_detailed_strictly_necessary_button",disabled:e.buttonsDisabled||u,variant:"opacity",size:o?"medium":"large",onClick:()=>y(de)},i.strictlyNecessaryOnlyButtonText)),A.default.createElement(n.Split.Item,null,A.default.createElement(n.Button,{id:me,"data-testid":me,"data-uxa-log":"privacy_consent_detailed_view_save_button",disabled:e.buttonsDisabled,variant:"primary",size:o?"medium":"large",onClick:()=>y(me)},p))))))},fe={optInSuccess:(pe=r.intl).formatMessage({id:"MURQNI",defaultMessage:"Success! Do not sell or share my personal information is now active."}),optOutSuccess:pe.formatMessage({id:"T6SVre",defaultMessage:"Success! Settings are saved."}),updateFailed:pe.formatMessage({id:"6w278K",defaultMessage:"Something went wrong! Try again later."})};var pe;const _e=new URLSearchParams(window.location.search),Ce=e=>{var a,o,r;const{viewer:l,dnsState:s,userEmails:c,verifiedEmails:d,unverifiedEmails:u,loggingContext:m,ccpaToken:g,isGpcEnabled:E,csrfToken:f,defaultNonCcpaToggleState:p,openDetailedView:_=!1,platform:C,isInIframe:y=!0}=e,v=t.useRef(null),S=(e=>e===n.UserDNSInitState.LOGGED_IN_ENROLLED||e===n.UserDNSInitState.LOGGED_IN_NOT_ENROLLED||e===n.UserDNSInitState.LOGGED_IN_EMAIL_PENDING)(s),h=E||!!navigator.globalPrivacyControl,P="true"===_e.get(n.QueryParam.HideGdpr),T=y?"true"===_e.get(n.QueryParam.ShouldAutoOpenOptions):window.location.hash===n.MANAGE_COOKIES_LINK_TAG,N=_e.get(n.QueryParam.ParentDomainConsentCookie),b=(null===(a=null==C?void 0:C.config)||void 0===a?void 0:a.isDefaultNonCcpaEnabled)||"true"===_e.get(n.QueryParam.DefaultNonCcpa),I=y?null!==(o=_e.get(n.QueryParam.UriForLogging))&&void 0!==o?o:"":n.getUriForLogging(),k=(null==C?void 0:C.floatingButtonVisible)||"true"===_e.get(n.QueryParam.ShouldShowFloatingButton),D=(null==C?void 0:C.bannerDisabled)||"true"===_e.get(n.QueryParam.ShouldDisableBanner)||h||s!==n.UserDNSInitState.UNKNOWN&&s!==n.UserDNSInitState.LOGGED_IN_NOT_ENROLLED&&s!==n.UserDNSInitState.LOGGED_OUT_NOT_ENROLLED,U=y?parseInt(null!==(r=_e.get(n.QueryParam.Width))&&void 0!==r?r:"0",10):window.innerWidth,L=y?decodeURIComponent(_e.get(n.QueryParam.Origin)):window.location.origin,B=N?JSON.parse(decodeURIComponent(N)):void 0,F=(null==C?void 0:C.cookieStore)||new n.ConsentCookieStore({}),V=y?!!(null==B?void 0:B.userInteracted):F.hasUserInteracted(),q=b&&!V&&!P&&p&&!w(O(s));t.useEffect((()=>{const e=(e=>e===x.EnrolledAccount||e===x.EnrollmentPendingAccountConfirmation)(pe)||(e=>e===x.NotEnrolled)(pe);let t;return w(pe)&&e&&Re({messageType:n.CCPAOutboundMessageType.dnsEnabled,data:{optInToDNS:!0}}),null!=f&&""!==f&&Re({messageType:n.CCPAOutboundMessageType.csrfHandshakeStart,data:{token:f}}),qe(ce,j,V)?(ze(),Ae(!1)):V||Je(),nt(),t=b&&p?n.DefaultNonCcpaTogglesOn.GateOnDefaultsEnabled:b&&!p?n.DefaultNonCcpaTogglesOn.GateOnDefaultsDisabled:!b&&p?n.DefaultNonCcpaTogglesOn.GateOffDefaultsEnabled:n.DefaultNonCcpaTogglesOn.GateOffDefaultsDisabled,Re({messageType:n.CCPAOutboundMessageType.logConsentValues,data:{defaultNonCcpaTogglesOn:t,categories:j,userInteracted:V}}),window.addEventListener("resize",(()=>Ge())),()=>{window.removeEventListener("resize",(()=>Ge()))}}),[]);const $=F.initializeCategoriesMap({defaultNonCcpa:b&&q,hasUserInteracted:V,categories:y?null==B?void 0:B.categories:F.getAllowedCategoriesMap(),isDNSEnrolled:w(O(s))}),j={...$},[J,X]=t.useState({...j}),[ee,te]=t.useState(h||O(s)!==x.NotEnrolled),[ne,re]=t.useState(""),[le,se]=t.useState(!1),[ce,ge]=t.useState(O(s)),[pe,Ce]=t.useState(ce),[ye,ve]=t.useState(!1),[Se,he]=t.useState({}),[Pe,Te]=t.useState(!1),[Ne,be]=t.useState(U),[Ie,ke]=t.useState(!1),[xe,Ae]=t.useState(!(D||V||T||h||w(pe))),[Oe,we]=t.useState(T||P||_),[Me,De]=t.useState(k),[Ue,Le]=t.useState(h),Re=t.useCallback((e=>{try{window.parent.postMessage({messageType:e.messageType,...e.data||{}},L)}catch(e){n.reportException({error:e,extra:{isInIframe:y,parentOrigin:L}})}}),[L]),Be=()=>{const e=w(pe),t=lt();((e,t,a,o,i,r,l,s)=>{t?(n.PrivacyConsentStats.logCounter(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.DNS_OPT_IN,null)),z(a,e,o,i,r,l,s)):(n.PrivacyConsentStats.logCounter(n.PrivacyConsentAmpMetrics.EVENTS,R(e,n.CCPAEvent.DNS_OPT_OUT,null)),H(a,e,o,i,r,l,s))})(l,e,e?et:tt,ne,m,g,Pe?f:void 0,t)},Fe=e=>{var t;if(e.origin===L)switch(e.data.messageType){case n.CCPAInboundMessageType.dnsSettingsConfirmed:Be();break;case n.CCPAInboundMessageType.dnsSettingsCancelled:Le(!1),Ce(ce);break;case n.CCPAInboundMessageType.privacyConsentPageInfo:(e=>{const t={};e.hostname&&(t.hostname=e.hostname),e.foreignSessionId&&(t.foreignSessionId=e.foreignSessionId),e.clientInfo&&(t.clientInfo=e.clientInfo),he(t)})(e.data);break;case n.CCPAInboundMessageType.csrfHandshakeEnd:e.data.token===f&&Te(!0);break;case n.CCPAInboundMessageType.openDetailedView:we(!0);break;case n.CCPAInboundMessageType.enableAndShowFloatingButton:De(!0);break;case n.CCPAInboundMessageType.iframeResize:be(e.data.width);break;case n.CCPAInboundMessageType.bannerCheck:if(!Ie){const n=e.data.iframeHeight,a=null===(t=document.getElementById(K))||void 0===t?void 0:t.offsetHeight;ke(!(!a||a!==n))}}};t.useEffect((()=>{y&&(xe&&!D&&!Oe)&&setTimeout((()=>{var e;const t=null===(e=document.getElementById(K))||void 0===e?void 0:e.offsetHeight;t&&!Ie&&(ke(!0),Re({messageType:n.CCPAOutboundMessageType.iframeBannerCheck,data:{height:t}}))}),100)}),[Ie]),t.useEffect((()=>(window.addEventListener("message",Fe),()=>{window.removeEventListener("message",Fe)})),[pe,ne,Se,Pe]),t.useEffect((()=>{(ye||h)&&(M(pe)?Re({messageType:n.CCPAOutboundMessageType.dnsPendingEnabled,data:{loggedIn:S}}):(e=>e===x.UnenrollmentPendingEmailUIConfirmation||e===x.UnenrollmentPendingAccountUIConfirmation)(pe)&&Re({messageType:n.CCPAOutboundMessageType.dnsPendingDisabled}))}),[pe]),t.useEffect((()=>{(ye||h)&&(le?(Le(!1),Re({messageType:n.CCPAOutboundMessageType.dnsEmailValid})):(Le(!0),Re({messageType:n.CCPAOutboundMessageType.dnsEmailInvalid})))}),[le]);const Ve=e=>{e===ue?(X({...$}),Ce(ce),Le(h),te(h||O(s)!==x.NotEnrolled),re(""),se(!1)):e===de?(We(),Xe()):e===me&&(ce!==pe?Be():F.havePreferencesChanged(J)&&(Ye(),Xe())),we(P)},Ge=(e=window.innerWidth)=>{var t;if(y){const e=null===(t=document.getElementById(K))||void 0===t?void 0:t.offsetHeight;xe&&!D&&!Oe&&e&&Re({messageType:n.CCPAOutboundMessageType.ccpaIframeResize,data:{height:e}})}else be(e)},qe=(e,t,n)=>w(e)&&(!F.onlyStrictlyNecessaryConsent(t)||!n),ze=()=>{We(),Xe(!0)},He=(e,t)=>{ve(!0),X((n=>({...n,[t]:e})))},$e=(e,t)=>{t===Q?(Qe(),Xe(!0)):t===W&&(We(),Xe(!0)),Ae(!1),e.preventDefault(),e.stopPropagation()},Ke=e=>{e.preventDefault(),e.stopPropagation(),we(!0),Ae(!1)},je=t.useCallback((e=>{Re({messageType:n.CCPAOutboundMessageType.bodyContentChange,data:{displayState:e}})}),[Re]);t.useEffect((()=>{var e,t,a,o,i;const r=xe&&!D&&!Oe,l=Me&&(!xe||D)&&!Oe;y?Oe?(je(n.DisplayState.DetailedView),Ae(!1),null===(e=v.current)||void 0===e||e.focus()):je(r?n.DisplayState.Banner:l?n.DisplayState.FloatingButton:n.DisplayState.Nothing):(null===(t=v.current)||void 0===t||t.classList.toggle(ie,l),null===(a=v.current)||void 0===a||a.classList.toggle(oe,r),Re({messageType:n.CCPAOutboundMessageType.displayStateChange,data:{isBannerVisible:r,height:null!==(i=null===(o=v.current)||void 0===o?void 0:o.offsetHeight)&&void 0!==i?i:0}}))}),[Oe,xe,Me,D,je,y,Re]);const Qe=()=>{Object.values(n.CookieCategory).forEach((e=>{j[e]=!0})),X({...j})},We=()=>{Object.values(n.CookieCategory).forEach((e=>{j[e]=e===n.CookieCategory.StrictlyNecessary})),X({...j})},Ye=()=>{Object.values(n.CookieCategory).forEach((e=>{j[e]=J[e]}))},Je=()=>{Re({messageType:n.CCPAOutboundMessageType.updateDefaultNonCcpa,data:{categories:j}})},Xe=(e=!1)=>{Re({messageType:n.CCPAOutboundMessageType.consentChanged,data:{categories:j,shouldAvoidReload:e}})},Ze=e=>{ve(!0),e?(We(),ce===x.NotEnrolled?S?Ce(x.EnrollmentPendingAccountUIConfirmation):(Ce(x.EnrollmentPendingEmailUIConfirmation),Le(!le)):ce===x.EnrolledEmail||ce===x.EnrollmentPendingEmailConfirmation||ce===x.CrossOriginEnrolled||ce===x.EnrolledViaCookie?Ce(ce):ce!==x.EnrolledAccount&&ce!==x.EnrollmentPendingAccountConfirmation||Ce(ce)):(Object.values(n.CookieCategory).forEach((e=>{j[e]=$[e]})),X({...$}),ce===x.EnrolledEmail||ce===x.EnrollmentPendingEmailConfirmation||ce===x.CrossOriginEnrolled||ce===x.EnrolledViaCookie?Ce(x.UnenrollmentPendingEmailUIConfirmation):ce===x.EnrolledAccount||ce===x.EnrollmentPendingAccountConfirmation?Ce(x.UnenrollmentPendingAccountUIConfirmation):ce===x.NotEnrolled&&Ce(x.NotEnrolled),Le(!1)),te(e)},et=e=>{e?i.Notify.success(fe.optInSuccess):i.Notify.error(fe.updateFailed),S?(Ce(x.EnrollmentPendingAccountVerificationSent),ge(x.EnrollmentPendingAccountConfirmation)):n.isCrossOrigin(_e)?(Ce(x.CrossOriginEnrolled),ge(x.CrossOriginEnrolled)):(Ce(x.EnrollmentPendingEmailConfirmation),ge(x.EnrollmentPendingEmailConfirmation),u.push(ne)),We(),Ye(),Re({messageType:n.CCPAOutboundMessageType.dnsEnabled,data:{loggedIn:S,optInToDNS:!0}}),P||Xe()},tt=e=>{e?i.Notify.success(fe.optOutSuccess):i.Notify.error(fe.updateFailed),Ce(x.NotEnrolled),ge(x.NotEnrolled),Re({messageType:n.CCPAOutboundMessageType.dnsDisabled}),u.slice(u.indexOf(ne),1),P||(Ye(),Xe())},nt=()=>{Re({messageType:n.CCPAOutboundMessageType.priorConsent,data:{categories:j}})},at=e=>{re(e),null!==e.match(/^.+@.+\..+$/)?se(!0):se(!1)},ot=e=>{e.preventDefault(),Re({messageType:n.CCPAOutboundMessageType.ccpaPrivacyPolicyFaqClick})},it=e=>{e.preventDefault(),Re({messageType:n.CCPAOutboundMessageType.ccpaPrivacyPageClick})},rt=e=>{e.preventDefault(),Re({messageType:n.CCPAOutboundMessageType.ccpaCookieFaqClick})},lt=()=>({opt_in_source:h?G.GPC_UI:G.USER_INPUT,opt_in_domain:Se.hostname,opt_in_client:Se.clientInfo,foreign_session_id:Se.foreignSessionId});return A.default.createElement(n.ThemeProvider,{theme:"vis2023",mode:n.useTheme$1(L)},(({getThemeProps:e})=>{return A.default.createElement("div",{id:n.CCPA_IFRAME_THEME_PROVIDER_ID,"data-testid":n.CCPA_IFRAME_THEME_PROVIDER_ID,...e()},A.default.createElement("div",{ref:v,id:n.CCPA_IFRAME_ID$1,"data-testid":n.CCPA_IFRAME_ID$1,className:y?"":ae},!Oe&&xe&&!D&&A.default.createElement(Y,{width:Ne,origin:L,setBannerVisible:Ae,onClick:$e,onCustomizeCookiesClick:Ke,onPrivacyPageLinkClick:it,onPrivacyPolicyFaqLinkClick:ot,uriForLogging:I}),!Oe&&!xe&&Me&&A.default.createElement(Z,{uriForLogging:I,onClick:()=>we(!0)}),Oe&&A.default.createElement(Ee,{viewer:l,width:Ne,gpcEnabled:h,hideGdpr:P,uriForLogging:I,loggedIn:S,initEnrollmentState:ce,enrollmentState:pe,userEmails:c,verifiedEmails:d,unverifiedEmails:u,email:ne,handleEmailChange:at,isFlowComplete:(t=ce,a=pe,t!==x.NotEnrolled&&a===x.NotEnrolled||a===x.EnrollmentPendingEmailVerificationSent||a===x.EnrollmentPendingAccountVerificationSent),buttonsDisabled:Ue,categoryToggles:J,onClose:()=>we(!1),onButtonClick:Ve,onPrivacyPageLinkClick:it,onCookiesFaqLinkClick:rt,togglesDisabled:ee,onCategoryChange:He,onDNSChange:Ze})));var t,a}))};Ce.displayName="CCPAIFrameInner";const ye=e=>{var t;const{viewer:a,isLoading:o}=n.useViewer();return o?null:A.default.createElement(n.CCPAIframeErrorBoundary,{extra:{isInIframe:null===(t=e.isInIframe)||void 0===t||t}},A.default.createElement(Ce,{...e,viewer:a}))};ye.displayName="CCPAIFrameWithoutStyles";const ve=n.requireCssWithComponent(ye,["/static/metaserver/static/css/dig-components/index.web-vflD1hFtb.css","/static/metaserver/static/css/dig-components/tokens-vflT_rIJF.css"]);e.CCPAIFrame=ve}));
//# sourceMappingURL=c_ccpa_iframe.js-vflWc2aX3.map

//# debugId=81d301b9-330f-35fc-8540-e22b7a469e70