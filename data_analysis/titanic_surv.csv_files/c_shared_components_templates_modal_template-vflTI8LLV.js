!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="83625378-7f65-3ec7-a1e7-6220e4c6d7ad")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./c_profile_services_profile_services_link","./c_core_i18n","./c_api_v2_routes_team_members_internal_provider","react"],(function(e,t,a,i,s,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var l,r=o(n);e.Strings=void 0,(l=e.Strings||(e.Strings={})).OK=i.intl.formatMessage({id:"G6rEKj",defaultMessage:"OK"}),l.NEXT=i.intl.formatMessage({id:"yah+je",defaultMessage:"Next"}),l.BACK=i.intl.formatMessage({id:"k9vJ0G",defaultMessage:"Back"}),l.CANCEL=i.intl.formatMessage({id:"S53N5s",defaultMessage:"Cancel"}),l.CREATE=i.intl.formatMessage({id:"cVVoCl",defaultMessage:"Create"}),l.SAVE=i.intl.formatMessage({id:"HqImMi",defaultMessage:"Save"}),l.LEARN_MORE=i.intl.formatMessage({id:"sUsXMb",defaultMessage:"Learn more"}),l.DONE=i.intl.formatMessage({id:"H/MlMr",defaultMessage:"Done"}),l.FINISH=i.intl.formatMessage({id:"n4dBJ7",defaultMessage:"Finish"}),l.CLOSE=i.intl.formatMessage({id:"/nCb7L",defaultMessage:"Close"}),l.DISMISS=i.intl.formatMessage({id:"h4rpeQ",defaultMessage:"Dismiss"}),l.CONFIGURE_NOW=i.intl.formatMessage({id:"vQKdKf",defaultMessage:"Configure now"}),l.RECONFIGURE=i.intl.formatMessage({id:"DN+Nvb",defaultMessage:"Reconfigure"}),l.CONFIRM_PREFERENCE=i.intl.formatMessage({id:"qlRt63",defaultMessage:"Confirm your preference"}),l.MANAGE_PREFERENCE=i.intl.formatMessage({id:"ILUbaa",defaultMessage:"Manage preference"}),l.SHOW_IN_GOOGLE_DRIVE=i.intl.formatMessage({id:"S0LHV5",defaultMessage:"Show in Google Drive"}),l.LINK_ACCOUNT=i.intl.formatMessage({id:"JhmneM",defaultMessage:"Link account"}),l.GET_MIGRATION_SETTINGS_ERROR=i.intl.formatMessage({id:"C40Kmf",defaultMessage:"Could not fetch migration settings"}),l.SET_MIGRATION_SETTINGS_ERROR=i.intl.formatMessage({id:"omeHSB",defaultMessage:"Could not update migration settings"}),l.EDIT_APP_PERMISSIONS=i.intl.formatMessage({id:"GYeDWi",defaultMessage:"Edit app permissions"}),l.MIGRATION_FOLDER=i.intl.formatMessage({id:"vp+jh3",defaultMessage:"Dropbox"}),l.DEFAULT_SHORTCUT_NAME=i.intl.formatMessage({id:"o9Zw70",defaultMessage:"Untitled"}),l.VIEW_SUMMARY=i.intl.formatMessage({id:"9m2UYm",defaultMessage:"View summary"}),l.LOADING_ANIMATION=i.intl.formatMessage({id:"SGA8pY",defaultMessage:"Loading animationâ€¦"}),l.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT=i.intl.formatMessage({id:"hC4dZf",defaultMessage:"You do not have permission to move your Google files to Google Drive. Please reach to your admin to get permission"}),l.CONVERT_NOW=i.intl.formatMessage({id:"Iff87z",defaultMessage:"Convert now"}),l.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT=i.intl.formatMessage({id:"u9TFTP",defaultMessage:"Please link to the Google account of the same email as your Dropbox account."}),l.FAIL_TO_LINK_GOOGLE_ACCOUNT=i.intl.formatMessage({id:"4L5zkJ",defaultMessage:"Failed to link Google account."}),l.GOOGLE_AUTH_FAILED=i.intl.formatMessage({id:"4Mo3Jb",defaultMessage:"Google authentication failed"}),l.GOOGLE_AUTH_POPUP_BLOCKED=i.intl.formatMessage({id:"6EyPz0",defaultMessage:"Pop-up blocked. Please disable pop-up blockers in order to link your Google account"});const d=["documents"];var _;async function m(a,i){const s=new t.DefaultUserApiV2Client(a),n=await t.GetProfileServicesRoutes(s).rpc("list_linked_services",void 0,{});let o=!1;for(const t of n.linked_services){if(!("google"===t.service_type[".tag"]))continue;if(!("is_connected"===t.connection_state[".tag"]))continue;if(d.every((e=>t.granted_permissions.some((t=>t[".tag"]===e))))&&(o=!0,!i||t.display_name===i))return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}return o?e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}async function f(i,s){const n=i.email;if(!s){const a=await m(i,n);if(a===e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK;if(a===e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK)try{await async function(e){const a=new t.DefaultUserApiV2Client(e);await t.GetProfileServicesRoutes(a).rpc("unlink",{service:{".tag":"google"}},{})}(i)}catch(e){}}const o=new a.ProfileServicesLinkingHandler,l=await o.auth_service_with_user_promise(t.ProfileServicesConstants.GOOGLE,i.id,null,"link_read_files",void 0,void 0,d,void 0,n);return l.success?l.display_name===n?e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}e.GddMigrationCompatibleLinkStatus=void 0,(_=e.GddMigrationCompatibleLinkStatus||(e.GddMigrationCompatibleLinkStatus={}))[_.HAS_COMPATIBLE_LINK=0]="HAS_COMPATIBLE_LINK",_[_.HAS_INCOMPATIBLE_LINK=1]="HAS_INCOMPATIBLE_LINK",_[_.NOT_LINKED=2]="NOT_LINKED";const c=t=>"window_not_created"===t?e.Strings.GOOGLE_AUTH_POPUP_BLOCKED:"window_closed"!==t?e.Strings.GOOGLE_AUTH_FAILED:void 0;t.injectInternalStyle("/static/metaserver/static/js/shortcuts/shared_components/templates/modal_template.module.out-vflEkYJAG.css",(e=>"._modalTemplateWrapper_1iofx_1{display:flex;flex-direction:row}._modalTemplateContainer_1iofx_6{align-items:flex-start;display:flex;flex:1;flex-direction:column;padding:0}._modalTemplatePaper_1iofx_15{align-items:flex-start;align-self:stretch;display:flex;flex-direction:row;padding:var(--spacing__unit--3) var(--spacing__unit--3) 0}._modalTemplateContent_1iofx_24{align-items:flex-start;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0}._modalTemplateHeading_1iofx_34{align-items:flex-start;display:flex;flex-direction:row;padding:var(--spacing__unit--4) var(--spacing__unit--3) var(--spacing__unit--2)}._modalTemplateText_1iofx_42{padding:0 var(--spacing__unit--3)}._modalTemplateActions_1iofx_46{align-items:center;align-self:stretch;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:var(--spacing__unit--3)}._modalTemplateButtonGroup_1iofx_56,._modalTemplateTertiaryActionContainer_1iofx_65{align-items:center;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:0}._modalTemplateTertiaryActionContainer_1iofx_65{flex-grow:1;justify-content:flex-end}._modalTemplateImageFrame_1iofx_76{align-items:center;background:var(--color__opacity--3);display:flex;flex:1;flex-direction:column;justify-content:center;min-height:420px;min-width:400px;position:relative}@media (max-width:767.98px){._modalTemplateImageFrame_1iofx_76{display:none}}"));const g="_modalTemplateWrapper_1iofx_1",u="_modalTemplateContainer_1iofx_6",p="_modalTemplatePaper_1iofx_15",M="_modalTemplateContent_1iofx_24",E="_modalTemplateHeading_1iofx_34",L="_modalTemplateText_1iofx_42",T="_modalTemplateActions_1iofx_46",C="_modalTemplateButtonGroup_1iofx_56",I="_modalTemplateTertiaryActionContainer_1iofx_65",O="_modalTemplateImageFrame_1iofx_76",N=({actions:e,ariaLabel:a,appElement:i,bodyText:s,height:n,infoTextAboveModalTitle:o,tertiaryActions:l,title:d,rightFrameComponent:_,onRequestClose:m,open:f,width:c,withCloseButton:N})=>(t.Modal.setAppElement(i||document.body),r.default.createElement(t.Modal,{onRequestClose:m,open:null==f||f,width:c,isCentered:!0,shouldCloseOnOverlayClick:!1,withCloseButton:N,"aria-labelledby":a},r.default.createElement("div",{className:g,style:{minHeight:null!=n?n:"auto"}},r.default.createElement("div",{className:u},o&&r.default.createElement("div",{className:p},r.default.createElement(t.Text,{size:"small",color:"faint"},o)),r.default.createElement("div",{className:M},r.default.createElement("div",{className:E},r.default.createElement(t.Title,null,d)),r.default.createElement("div",{className:L},s)),r.default.createElement("div",{className:T},e&&r.default.createElement("div",{className:C},e),l&&r.default.createElement("div",{className:I},l))),_&&r.default.createElement("div",{className:O},_))));N.displayName="ModalTemplate",e.GetShortcutsRoutes=function(e){return e.ns("shortcuts")},e.ModalTemplate=N,e.ensureUserHasGddMigrationCompatibleLink=f,e.ensureUserHasLinkedAccountAndReport=async a=>{try{const i=await f(a);switch(i){case e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:return!0;case e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:t.Snackbar.failSticky(e.Strings.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT);break;case e.GddMigrationCompatibleLinkStatus.NOT_LINKED:t.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT);break;default:t.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT),s.enforceExhaustive(i)}}catch(e){const a=c(e);a&&t.Snackbar.failSticky(a)}return!1},e.fetchUserHasGddMigrationCompatibleLink=m,e.getUserFriendlyLinkAccountErrorMessage=c}));
//# sourceMappingURL=c_shared_components_templates_modal_template.js-vfl-RD4WV.map

//# debugId=83625378-7f65-3ec7-a1e7-6220e4c6d7ad