!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fb94a3d1-a695-3409-a6c1-2d0f0b67bc44")}catch(e){}}();
define(["require","exports","./e_file_viewer_static_scl_page_file","react","./c_api_v2_routes_growth_provider","./c_memoize-one","./e_core_exception"],(function(e,t,a,n,c,r,o){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var p=s(n);let i,l=!1;const u=()=>c.isSeleniumTest()||"undefined"!=typeof jest;function h(){return new Promise((async(t,n)=>{var s;window.recaptchaOnloadCallback=function(){t(window.grecaptcha)};if("ON"===(null===(s=(await a.fetchExperiment("ps_infra_load_funcaptcha")).experiment)||void 0===s?void 0:s.variant)&&l&&new Promise((function(t,a){e(["./c_abuse_funcaptcha_modal"],t,a)})).then((async({loadFuncaptchaModal:e,recordFunCaptchaLoadingStats:t})=>{const a=performance.now();let n,c=null,r=!1;try{await e(),r=!0}catch(e){c=e}finally{n=performance.now()}t("funcaptcha_modal_loading",n-a,r,c)})),u())t(v);else{const e=function(){const e={onload:"recaptchaOnloadCallback",render:"explicit",hl:c.getPageLocale().replace("_","-")};return new r.URI({scheme:"https",authority:"www.google.com",path:"/recaptcha/api.js",query:e}).toString()}(),t=window.CSP_SCRIPT_NONCE;if(!t)return o.reportException({err:new Error("CSP nonce not set"),severity:o.SEVERITY.CRITICAL,tags:["product-safety-infra","recaptcha"]}),void n();!function(e,t){const a=document.createElement("script");a.setAttribute("src",e),a.setAttribute("nonce",t),document.body.appendChild(a)}(e,t)}}))}const d={},_={};let m=0;const f=e=>{e.setAttribute("class","g-recaptcha-response"),e.setAttribute("name","g-recaptcha-response"),e.value=""},v={reset(e){const t=_[e].querySelector(".g-recaptcha-response");return f(t),!0},render(e,t,a){const n=m;m+=1,r.assert(null==e.querySelector(".g-recaptcha-response"),"can't render multiple recaptcha elements in same div");const c=document.createElement("textarea");return c.id=`g-recaptcha-response-${n}`,f(c),e.appendChild(c),_[n]=e,d[n]=()=>{const e="DUMMY-RESPONSE";return c.value=e,t.callback&&t.callback(e),e},n},execute:e=>Promise.resolve(d[e]())};class g extends p.default.Component{constructor(e){super(e)}handle_captcha_errors(t,n){return t&&t.funcaptcha_verification_error&&a.notifyCaptchaConnectionError(),!(!t||!t.funcaptcha_response)&&(new Promise((function(t,a){e(["./c_abuse_funcaptcha_modal"],t,a)})).then((({openFuncaptchaModal:e})=>{e(this.props.email||"",n||this.props.source,(e=>{this.funcaptcha_response=e,this.props.onSubmit()}),this.props.onReady)})),!0)}clear_captcha_response(){this.funcaptcha_response=void 0}componentDidMount(){var e,t;e=void 0,void 0!==(t=!0)&&(l=t),i||(i=e?new Promise(((e,t)=>{a.waitForTTI().then(e),setTimeout(e,2500)})).then(h):h())}render(){return p.default.createElement("div",{ref:"container_div",className:a.cx({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},p.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))}submit(){this.clear_captcha_response(),this.props.onSubmit()}}g.displayName="CaptchaComponent";const w=a.requireCssWithComponent(g,["/static/metaserver/static/css/recaptcha-vflIN6j39.css"]);t.Captcha=w,t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()},t.get_captcha_responses=function(e){const t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t,a){return e.getWrappedComponent().handle_captcha_errors(t,a)}}));
//# sourceMappingURL=c_auth_common_captcha.js-vflB11hwW.map

//# debugId=fb94a3d1-a695-3409-a6c1-2d0f0b67bc44