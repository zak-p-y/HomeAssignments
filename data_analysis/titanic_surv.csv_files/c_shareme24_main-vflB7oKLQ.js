!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="86142ebf-0bff-37f2-9f1a-f7e409eef196")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_bem","./c_ui_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal","./c_ui_over-quota-sweep-blocking-modal_use_get_plans","./c_ui_share-blocking-wrapper_share_blocking_wrapper","./c_core_i18n","./e_data_modules_stormcrow","./c_common_components_layout","./c_stacks_lib_api","./c_inband-screen_internals_share-modal-share","./c_utils_dsx_dsx-react","./c_content-member-list_internals_content-member-list","./e_core_exception","./c_ui_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_common_components_buttons","./c_dig-icons_assets_ui-icon_line_qr-code","./c_dig-icons_assets_ui-icon_line_settings","./c_dig-icons_assets_ui-icon_fill_stacks","./c_memoize-one","./c_api_v2_routes_growth_provider","./c_api_v2_unauthed_client","./c_pap-events_navigation_select_create_folder_action","./c_src_sink_index","./c_dig-icons_assets_ui-icon_line_upload-file","./c_dig-icons_assets_ui-icon_line_team","./c_dig-icons_assets_ui-icon_line_syncing","./c_dig-components_tabs_index","./c_components_icons_icon_dropdown_selected","./c_chat_chat_constants","./c_date-fns__lib_requiredArgs_index","./c_dig-components_combinations_index","./c_flux_store_listener"],(function(e,t,n,a,i,r,o,s,l,c,d,u,m,g,f,p,h,_,y,E,b,v,w,k,S,C,M,T,D,L,I,A,x,P){"use strict";function N(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var $=N(t),O=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},R=[0],U=new Map;function F(e,a){var i=void 0===a?{}:a,r=i.threshold,o=void 0===r?R:r,s=i.root,l=i.rootMargin,c=void 0===l?"0px":l,d=n.useSafeState(),u=d[0],m=d[1];return t.useEffect((function(){var t=e&&"current"in e?e.current:e;if(t){var n=!0,a=function(e){var t,n=null!==(t=e.root)&&void 0!==t?t:document,a=U.get(n);a||(a=new Map,U.set(n,a));var i=JSON.stringify([e.rootMargin,e.threshold]),r=a.get(i);if(!r){var o=new Map,s=new IntersectionObserver((function(e){return e.forEach((function(e){var t;return null===(t=o.get(e.target))||void 0===t?void 0:t.forEach((function(t){return setTimeout((function(){return t(e)}),0)}))}))}),e);r={observer:s,observe:function(e,t){var n=o.get(e);n||(n=new Set,o.set(e,n),s.observe(e)),n.add(t)},unobserve:function(e,t){var r=o.get(e);r&&(r.delete(t),r.size||(o.delete(e),s.unobserve(e),o.size||(s.disconnect(),a.delete(i),a.size||U.delete(n))))}},a.set(i,r)}return r}({root:s&&"current"in s?s.current:s,rootMargin:c,threshold:o}),i=function(e){n&&m(e)};return a.observe(t,i),function(){n=!1,a.unobserve(t,i)}}}),O([e,s,c],o,!0)),u}function B(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function j(e){A.requiredArgs(1,arguments);var t=A.toDate(e);return!isNaN(t)}function H(e,t){A.requiredArgs(2,arguments);var n=A.startOfDay(e),a=A.startOfDay(t);return n.getTime()===a.getTime()}var q={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function V(e){return function(t){var n=t||{},a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}var W={date:V({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:V({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:V({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Y={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function G(e){return function(t,n){var a,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):r;a=e.formattingValues[o]||e.formattingValues[r]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;a=e.values[l]||e.values[s]}return a[e.argumentCallback?e.argumentCallback(t):t]}}var z={ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:G({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:G({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:G({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:G({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:G({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function K(e){return function(t,n){var a=String(t),i=n||{},r=i.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=a.match(o);if(!s)return null;var l,c=s[0],d=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(d,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=i.valueCallback?i.valueCallback(l):l,rest:a.slice(c.length)}}}var Q,X={ordinalNumber:(Q={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),a=t||{},i=n.match(Q.matchPattern);if(!i)return null;var r=i[0],o=n.match(Q.parsePattern);if(!o)return null;var s=Q.valueCallback?Q.valueCallback(o[0]):o[0];return{value:s=a.valueCallback?a.valueCallback(s):s,rest:n.slice(r.length)}}),era:K({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:K({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:K({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:K({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Z={code:"en-US",formatDistance:function(e,t,n){var a;return n=n||{},a="string"==typeof q[e]?q[e]:1===t?q[e].one:q[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+a:a+" ago":a},formatLong:W,formatRelative:function(e,t,n,a){return Y[e]},localize:z,match:X,options:{weekStartsOn:0,firstWeekContainsDate:1}};function J(e,t){return A.requiredArgs(2,arguments),function(e,t){A.requiredArgs(2,arguments);var n=A.toDate(e).getTime(),a=B(t);return new Date(n+a)}(e,-B(t))}function ee(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}var te={y:function(e,t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return ee("yy"===t?a%100:a,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):ee(n+1,2)},d:function(e,t){return ee(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return ee(e.getUTCHours()%12||12,t.length)},H:function(e,t){return ee(e.getUTCHours(),t.length)},m:function(e,t){return ee(e.getUTCMinutes(),t.length)},s:function(e,t){return ee(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,a=e.getUTCMilliseconds();return ee(Math.floor(a*Math.pow(10,n-3)),t.length)}};function ne(e){A.requiredArgs(1,arguments);var t=A.toDate(e),n=t.getUTCDay(),a=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function ae(e){A.requiredArgs(1,arguments);var t=A.toDate(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=ne(a),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var o=ne(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}var ie=6048e5;function re(e){A.requiredArgs(1,arguments);var t=A.toDate(e),n=ne(t).getTime()-function(e){A.requiredArgs(1,arguments);var t=ae(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),ne(n)}(t).getTime();return Math.round(n/ie)+1}function oe(e,t){A.requiredArgs(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.weekStartsOn,r=null==i?0:B(i),o=null==n.weekStartsOn?r:B(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=A.toDate(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function se(e,t){A.requiredArgs(1,arguments);var n=A.toDate(e,t),a=n.getUTCFullYear(),i=t||{},r=i.locale,o=r&&r.options&&r.options.firstWeekContainsDate,s=null==o?1:B(o),l=null==i.firstWeekContainsDate?s:B(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(a+1,0,l),c.setUTCHours(0,0,0,0);var d=oe(c,t),u=new Date(0);u.setUTCFullYear(a,0,l),u.setUTCHours(0,0,0,0);var m=oe(u,t);return n.getTime()>=d.getTime()?a+1:n.getTime()>=m.getTime()?a:a-1}var le=6048e5;function ce(e,t){A.requiredArgs(1,arguments);var n=A.toDate(e),a=oe(n,t).getTime()-function(e,t){A.requiredArgs(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.firstWeekContainsDate,r=null==i?1:B(i),o=null==n.firstWeekContainsDate?r:B(n.firstWeekContainsDate),s=se(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),oe(l,t)}(n,t).getTime();return Math.round(a/le)+1}var de="midnight",ue="noon",me="morning",ge="afternoon",fe="evening",pe="night",he={G:function(e,t,n){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var a=e.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return te.y(e,t)},Y:function(e,t,n,a){var i=se(e,a),r=i>0?i:1-i;return"YY"===t?ee(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):ee(r,t.length)},R:function(e,t){return ee(ae(e),t.length)},u:function(e,t){return ee(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ee(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ee(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){var a=e.getUTCMonth();switch(t){case"M":case"MM":return te.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return ee(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){var i=ce(e,a);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):ee(i,t.length)},I:function(e,t,n){var a=re(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):ee(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):te.d(e,t)},D:function(e,t,n){var a=function(e){A.requiredArgs(1,arguments);var t=A.toDate(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=n-t.getTime();return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):ee(a,t.length)},E:function(e,t,n){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){var i=e.getUTCDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return ee(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){var i=e.getUTCDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return ee(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var a=e.getUTCDay(),i=0===a?7:a;switch(t){case"i":return String(i);case"ii":return ee(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var a,i=e.getUTCHours();switch(a=12===i?ue:0===i?de:i/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var a,i=e.getUTCHours();switch(a=i>=17?fe:i>=12?ge:i>=4?me:pe,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return te.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):te.H(e,t)},K:function(e,t,n){var a=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):ee(a,t.length)},k:function(e,t,n){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):ee(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):te.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):te.s(e,t)},S:function(e,t){return te.S(e,t)},X:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return ye(i);case"XXXX":case"XX":return Ee(i);default:return Ee(i,":")}},x:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return ye(i);case"xxxx":case"xx":return Ee(i);default:return Ee(i,":")}},O:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_e(i,":");default:return"GMT"+Ee(i,":")}},z:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_e(i,":");default:return"GMT"+Ee(i,":")}},t:function(e,t,n,a){var i=a._originalDate||e;return ee(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,a){return ee((a._originalDate||e).getTime(),t.length)}};function _e(e,t){var n=e>0?"-":"+",a=Math.abs(e),i=Math.floor(a/60),r=a%60;if(0===r)return n+String(i);var o=t||"";return n+String(i)+o+ee(r,2)}function ye(e,t){return e%60==0?(e>0?"-":"+")+ee(Math.abs(e)/60,2):Ee(e,t)}function Ee(e,t){var n=t||"",a=e>0?"-":"+",i=Math.abs(e);return a+ee(Math.floor(i/60),2)+n+ee(i%60,2)}function be(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function ve(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var we={p:ve,P:function(e,t){var n,a=e.match(/(P+)(p+)?/),i=a[1],r=a[2];if(!r)return be(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",be(i,t)).replace("{{time}}",ve(r,t))}},ke=["D","DD"],Se=["YY","YYYY"];function Ce(e){return-1!==ke.indexOf(e)}function Me(e){return-1!==Se.indexOf(e)}function Te(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var De=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Le=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ie=/^'([^]*?)'?$/,Ae=/''/g,xe=/[a-zA-Z]/;function Pe(e,t,n){A.requiredArgs(2,arguments);var a=String(t),i=n||{},r=i.locale||Z,o=r.options&&r.options.firstWeekContainsDate,s=null==o?1:B(o),l=null==i.firstWeekContainsDate?s:B(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=r.options&&r.options.weekStartsOn,d=null==c?0:B(c),u=null==i.weekStartsOn?d:B(i.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!r.localize)throw new RangeError("locale must contain localize property");if(!r.formatLong)throw new RangeError("locale must contain formatLong property");var m=A.toDate(e);if(!j(m))throw new RangeError("Invalid time value");var g=J(m,A.getTimezoneOffsetInMilliseconds(m)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:r,_originalDate:m};return a.match(Le).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,we[t])(e,r.formatLong,f):e})).join("").match(De).map((function(n){if("''"===n)return"'";var a=n[0];if("'"===a)return n.match(Ie)[1].replace(Ae,"'");var o=he[a];if(o)return!i.useAdditionalWeekYearTokens&&Me(n)&&Te(n,t,e),!i.useAdditionalDayOfYearTokens&&Ce(n)&&Te(n,t,e),o(g,n,r.localize,f);if(a.match(xe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return n})).join("")}function Ne(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function $e(e){return A.requiredArgs(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Oe(e,t,n){A.requiredArgs(2,arguments);var a=n||{},i=a.locale,r=i&&i.options&&i.options.weekStartsOn,o=null==r?0:B(r),s=null==a.weekStartsOn?o:B(a.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=A.toDate(e),c=B(t),d=((c%7+7)%7<s?7:0)+c-l.getUTCDay();return l.setUTCDate(l.getUTCDate()+d),l}var Re=/^(1[0-2]|0?\d)/,Ue=/^(3[0-1]|[0-2]?\d)/,Fe=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Be=/^(5[0-3]|[0-4]?\d)/,je=/^(2[0-3]|[0-1]?\d)/,He=/^(2[0-4]|[0-1]?\d)/,qe=/^(1[0-1]|0?\d)/,Ve=/^(1[0-2]|0?\d)/,We=/^[0-5]?\d/,Ye=/^[0-5]?\d/,Ge=/^\d/,ze=/^\d{1,2}/,Ke=/^\d{1,3}/,Qe=/^\d{1,4}/,Xe=/^-?\d+/,Ze=/^-?\d/,Je=/^-?\d{1,2}/,et=/^-?\d{1,3}/,tt=/^-?\d{1,4}/,nt=/^([+-])(\d{2})(\d{2})?|Z/,at=/^([+-])(\d{2})(\d{2})|Z/,it=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,rt=/^([+-])(\d{2}):(\d{2})|Z/,ot=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function st(e,t,n){var a=t.match(e);if(!a)return null;var i=parseInt(a[0],10);return{value:n?n(i):i,rest:t.slice(a[0].length)}}function lt(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function ct(e,t){return st(Xe,e,t)}function dt(e,t,n){switch(e){case 1:return st(Ge,t,n);case 2:return st(ze,t,n);case 3:return st(Ke,t,n);case 4:return st(Qe,t,n);default:return st(new RegExp("^\\d{1,"+e+"}"),t,n)}}function ut(e,t,n){switch(e){case 1:return st(Ze,t,n);case 2:return st(Je,t,n);case 3:return st(et,t,n);case 4:return st(tt,t,n);default:return st(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function mt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function gt(e,t){var n,a=t>0,i=a?t:1-t;if(i<=50)n=e||100;else{var r=i+50;n=e+100*Math.floor(r/100)-(e>=r%100?100:0)}return a?n:1-n}var ft=[31,28,31,30,31,30,31,31,30,31,30,31],pt=[31,29,31,30,31,30,31,31,30,31,30,31];function ht(e){return e%400==0||e%4==0&&e%100!=0}var _t={G:{priority:140,parse:function(e,t,n,a){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,a){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,a){var i=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return dt(4,e,i);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return dt(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var i=e.getUTCFullYear();if(n.isTwoDigitYear){var r=gt(n.year,i);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,a){var i=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return dt(4,e,i);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:i});default:return dt(t.length,e,i)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,a){var i=se(e,a);if(n.isTwoDigitYear){var r=gt(n.year,i);return e.setUTCFullYear(r,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),oe(e,a)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),oe(e,a)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,a){return ut("R"===t?4:t.length,e)},set:function(e,t,n,a){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),ne(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,a){return ut("u"===t?4:t.length,e)},set:function(e,t,n,a){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,a){switch(t){case"Q":case"QQ":return dt(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,a){switch(t){case"q":case"qq":return dt(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,a){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,a){var i=function(e){return e-1};switch(t){case"M":return st(Re,e,i);case"MM":return dt(2,e,i);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,a){var i=function(e){return e-1};switch(t){case"L":return st(Re,e,i);case"LL":return dt(2,e,i);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:i});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,a){switch(t){case"w":return st(Be,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return oe(function(e,t,n){A.requiredArgs(2,arguments);var a=A.toDate(e),i=B(t),r=ce(a,n)-i;return a.setUTCDate(a.getUTCDate()-7*r),a}(e,n,a),a)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,a){switch(t){case"I":return st(Be,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,a){return ne(function(e,t){A.requiredArgs(2,arguments);var n=A.toDate(e),a=B(t),i=re(n)-a;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n,a),a)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"d":return st(Ue,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return dt(t.length,e)}},validate:function(e,t,n){var a=ht(e.getUTCFullYear()),i=e.getUTCMonth();return a?t>=1&&t<=pt[i]:t>=1&&t<=ft[i]},set:function(e,t,n,a){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,a){switch(t){case"D":case"DD":return st(Fe,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return dt(t.length,e)}},validate:function(e,t,n){return ht(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,a){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,a){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=Oe(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,a){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return dt(t.length,e,i);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=Oe(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,a){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return dt(t.length,e,i);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:i});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,a){return(e=Oe(e,n,a)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,a){var i=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return dt(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:i})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(e,{width:"short",context:"formatting",valueCallback:i})||n.day(e,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,a){return e=function(e,t){A.requiredArgs(2,arguments);var n=B(t);n%7==0&&(n-=7);var a=A.toDate(e),i=((n%7+7)%7<1?7:0)+n-a.getUTCDay();return a.setUTCDate(a.getUTCDate()+i),a}(e,n,a),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,a){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(mt(n),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,n,a){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(mt(n),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,n,a){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,a){return e.setUTCHours(mt(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,a){switch(t){case"h":return st(Ve,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,a){var i=e.getUTCHours()>=12;return i&&n<12?e.setUTCHours(n+12,0,0,0):i||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,a){switch(t){case"H":return st(je,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,a){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,a){switch(t){case"K":return st(qe,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,a){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,a){switch(t){case"k":return st(He,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,a){var i=n<=24?n%24:n;return e.setUTCHours(i,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,a){switch(t){case"m":return st(We,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,a){switch(t){case"s":return st(Ye,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return dt(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,a){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,a){return dt(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,a){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,a){switch(t){case"X":return lt(nt,e);case"XX":return lt(at,e);case"XXXX":return lt(it,e);case"XXXXX":return lt(ot,e);default:return lt(rt,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,a){switch(t){case"x":return lt(nt,e);case"xx":return lt(at,e);case"xxxx":return lt(it,e);case"xxxxx":return lt(ot,e);default:return lt(rt,e)}},set:function(e,t,n,a){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,a){return ct(e)},set:function(e,t,n,a){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,a){return ct(e)},set:function(e,t,n,a){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},yt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Et=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bt=/^'([^]*?)'?$/,vt=/''/g,wt=/\S/,kt=/[a-zA-Z]/;function St(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}const Ct="member_policy",Mt="viewer_info_policy",Tt="shared_link_policy",Dt="expires",Lt="allow_download",It="default",At="audience",xt="require_password",Pt="acl_update_policy",Nt="dropdown",$t="toggle",Ot="button",Rt="scl-sharing-modal-banner";class Ut extends $.PureComponent{typeClassName(){return`${Rt}--${this.props.type}`}render(){const{borderHidden:e,className:t,message:a,descriptionLinkUrl:i,descriptionLinkText:r}=this.props,o=n.cx(Rt,this.typeClassName(),t,{[`${Rt}--bottom-border`]:!e}),s=i&&r?$.createElement("div",null,$.createElement(n.Link,{href:i,hasNoUnderline:!0},r)):void 0;return $.createElement("div",{className:o,"data-testid":"sharing-modal-banner"},a,s)}}Ut.defaultProps={type:"default"},Ut.displayName="SharingModalBanner";class Ft extends $.Component{render(){const e=this.props.optionsDict[this.props.currentValue].label;return $.createElement(n.Menu.Wrapper,{className:"sharing-settings-dropdown",onSelection:e=>{e!==this.props.currentValue&&this.props.onValueSelected(e)}},(({getContentProps:t,getTriggerProps:a})=>$.createElement($.Fragment,null,$.createElement(n.Button,{...a(),withDropdownIcon:!0,variant:"opacity",disabled:this.props.disabled,"aria-label":`${e}, ${this.props.ariaLabel}`},$.createElement(n.Truncate,{maxWidth:180},e)),$.createElement(n.Menu.Content,{"data-sharing-sdk":"1",...t()},$.createElement(n.Menu.Segment,null,this.props.valuesList.map((e=>$.createElement(n.Menu.ActionItem,{key:e,value:e,"aria-label":this.props.optionsDict[e].label,className:e===this.props.currentValue?"selected":""},$.createElement("div",{style:{width:"250px",marginBottom:"8px"}},$.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},e===this.props.currentValue?$.createElement(L.IconDropdownSelected,{className:"scl-sharing-dropdown-menu-item-dig__path-color"}):null,$.createElement(n.Text,{isBold:!0,className:e===this.props.currentValue?"scl-sharing-dropdown-menu-item-dig__selected-color":"",style:{marginLeft:e===this.props.currentValue?"12px":"24px"}},this.props.optionsDict[e].label)),$.createElement("div",{style:{marginLeft:"24px",marginTop:"4px"}},$.createElement(n.Text,{color:"faint",size:"small",tagName:"div",style:{lineHeight:"18px"}},this.props.optionsDict[e].description)))))))))))}}Ft.displayName="SettingDropdown";class Bt extends $.PureComponent{constructor(){super(...arguments),this.handleLinkClicked=e=>{e.preventDefault(),this.props.descriptionLinkOnClicked&&this.props.descriptionLinkUrl&&this.props.descriptionLinkOnClicked(this.props.descriptionLinkUrl)}}render(){const{policyFieldName:e,className:t,rightSideElement:a,bottomElement:i}=this.props,r=n.cx("scl-sharing-modal-settings-row",t);return $.createElement("div",{className:r,"data-testid":e},$.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},$.createElement("div",{className:"scl-sharing-modal-settings-row-info"},$.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},$.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),$.createElement("div",{className:"scl-sharing-modal-settings-row-details"},$.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&$.createElement("span",null," ",$.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),a&&$.createElement("div",{className:"scl-sharing-modal-settings-right-element"},a)),i&&$.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},i))}}Bt.displayName="SharingModalSettingsRow";const jt="scl-card";class Ht extends $.PureComponent{render(){const{className:e}=this.props,t=n.cx(jt,e);return $.createElement("div",{className:t},this.renderHeader(),this.renderBody())}renderHeader(){if(this.props.icon||this.props.title||this.props.actions)return $.createElement("div",{className:`${jt}__header`},this.props.icon&&$.createElement("div",{className:`${jt}__icon`},this.props.icon),this.props.title&&$.createElement("div",{className:`${jt}__title`},this.props.title),this.props.actions&&$.createElement("div",{className:`${jt}__actions`},this.props.actions))}renderBody(){return $.createElement("div",{className:`${jt}__body`},this.props.children)}}Ht.displayName="Card";var qt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Vt(e){return function(t){var n=t||{},a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}var Wt={date:Vt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Vt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Vt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Yt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Gt(e){return function(t,n){var a,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):r;a=e.formattingValues[o]||e.formattingValues[r]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;a=e.values[l]||e.values[s]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function zt(e){return function(t,n){var a=String(t),i=n||{},r=i.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=a.match(o);if(!s)return null;var l,c=s[0],d=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(d,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=i.valueCallback?i.valueCallback(l):l,rest:a.slice(c.length)}}}var Kt,Qt={code:"en-US",formatDistance:function(e,t,n){var a;return n=n||{},a="string"==typeof qt[e]?qt[e]:1===t?qt[e].one:qt[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+a:a+" ago":a},formatLong:Wt,formatRelative:function(e,t,n,a){return Yt[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Gt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Gt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Gt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Gt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Gt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Kt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),a=t||{},i=n.match(Kt.matchPattern);if(!i)return null;var r=i[0],o=n.match(Kt.parsePattern);if(!o)return null;var s=Kt.valueCallback?Kt.valueCallback(o[0]):o[0];return{value:s=a.valueCallback?a.valueCallback(s):s,rest:n.slice(r.length)}}),era:zt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:zt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:zt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:zt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:zt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xt(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Zt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Jt(e){Zt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function en(e,t){return Zt(2,arguments),function(e,t){Zt(2,arguments);var n=Jt(e).getTime(),a=Xt(t);return new Date(n+a)}(e,-Xt(t))}function tn(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function nn(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var an={p:nn,P:function(e,t){var n,a=e.match(/(P+)(p+)?/),i=a[1],r=a[2];if(!r)return tn(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",tn(i,t)).replace("{{time}}",nn(r,t))}};function rn(e){return e.getTime()%6e4}function on(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*n+(n>0?(6e4+rn(t))%6e4:rn(t))}var sn=["D","DD"],ln=["YY","YYYY"];function cn(e){return-1!==sn.indexOf(e)}function dn(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}function un(e,t){Zt(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.weekStartsOn,r=null==i?0:Xt(i),o=null==n.weekStartsOn?r:Xt(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Jt(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function mn(e,t){Zt(1,arguments);var n=Jt(e,t),a=n.getUTCFullYear(),i=t||{},r=i.locale,o=r&&r.options&&r.options.firstWeekContainsDate,s=null==o?1:Xt(o),l=null==i.firstWeekContainsDate?s:Xt(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(a+1,0,l),c.setUTCHours(0,0,0,0);var d=un(c,t),u=new Date(0);u.setUTCFullYear(a,0,l),u.setUTCHours(0,0,0,0);var m=un(u,t);return n.getTime()>=d.getTime()?a+1:n.getTime()>=m.getTime()?a:a-1}function gn(e){Zt(1,arguments);var t=Jt(e),n=t.getUTCDay(),a=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function fn(e){Zt(1,arguments);var t=Jt(e),n=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var i=gn(a),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var o=gn(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function pn(e){Zt(1,arguments);var t=Jt(e),n=gn(t).getTime()-function(e){Zt(1,arguments);var t=fn(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),gn(n)}(t).getTime();return Math.round(n/6048e5)+1}function hn(e,t){Zt(1,arguments);var n=Jt(e),a=un(n,t).getTime()-function(e,t){Zt(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.firstWeekContainsDate,r=null==i?1:Xt(i),o=null==n.firstWeekContainsDate?r:Xt(n.firstWeekContainsDate),s=mn(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),un(l,t)}(n,t).getTime();return Math.round(a/6048e5)+1}function _n(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}var yn={G:function(e,t,n){var a=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var a=e.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return _n("yy"===t?a%100:a,t.length)}(e,t)},Y:function(e,t,n,a){var i=mn(e,a),r=i>0?i:1-i;return"YY"===t?_n(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):_n(r,t.length)},R:function(e,t){return _n(fn(e),t.length)},u:function(e,t){return _n(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return _n(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return _n(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){var a=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):_n(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){var a=e.getUTCMonth();switch(t){case"L":return String(a+1);case"LL":return _n(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){var i=hn(e,a);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):_n(i,t.length)},I:function(e,t,n){var a=pn(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):_n(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return _n(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var a=function(e){Zt(1,arguments);var t=Jt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=n-t.getTime();return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):_n(a,t.length)},E:function(e,t,n){var a=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){var i=e.getUTCDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return _n(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){var i=e.getUTCDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return _n(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var a=e.getUTCDay(),i=0===a?7:a;switch(t){case"i":return String(i);case"ii":return _n(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var a,i=e.getUTCHours();switch(a=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var a,i=e.getUTCHours();switch(a=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var a=e.getUTCHours()%12;return 0===a&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return function(e,t){return _n(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return _n(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var a=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):_n(a,t.length)},k:function(e,t,n){var a=e.getUTCHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):_n(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return _n(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return _n(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,a=e.getUTCMilliseconds();return _n(Math.floor(a*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return bn(i);case"XXXX":case"XX":return vn(i);default:return vn(i,":")}},x:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"x":return bn(i);case"xxxx":case"xx":return vn(i);default:return vn(i,":")}},O:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+En(i,":");default:return"GMT"+vn(i,":")}},z:function(e,t,n,a){var i=(a._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+En(i,":");default:return"GMT"+vn(i,":")}},t:function(e,t,n,a){var i=a._originalDate||e;return _n(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,a){return _n((a._originalDate||e).getTime(),t.length)}};function En(e,t){var n=e>0?"-":"+",a=Math.abs(e),i=Math.floor(a/60),r=a%60;if(0===r)return n+String(i);var o=t||"";return n+String(i)+o+_n(r,2)}function bn(e,t){return e%60==0?(e>0?"-":"+")+_n(Math.abs(e)/60,2):vn(e,t)}function vn(e,t){var n=t||"",a=e>0?"-":"+",i=Math.abs(e);return a+_n(Math.floor(i/60),2)+n+_n(i%60,2)}var wn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sn=/^'([^]*?)'?$/,Cn=/''/g,Mn=/[a-zA-Z]/;function Tn(e,t,n){Zt(2,arguments);var a=String(t),i=n||{},r=i.locale||Qt,o=r.options&&r.options.firstWeekContainsDate,s=null==o?1:Xt(o),l=null==i.firstWeekContainsDate?s:Xt(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=r.options&&r.options.weekStartsOn,d=null==c?0:Xt(c),u=null==i.weekStartsOn?d:Xt(i.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!r.localize)throw new RangeError("locale must contain localize property");if(!r.formatLong)throw new RangeError("locale must contain formatLong property");var m=Jt(e);if(!function(e){Zt(1,arguments);var t=Jt(e);return!isNaN(t)}(m))throw new RangeError("Invalid time value");var g=en(m,on(m)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:r,_originalDate:m},p=a.match(kn).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,an[t])(e,r.formatLong,f):e})).join("").match(wn).map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){return e.match(Sn)[1].replace(Cn,"'")}(e);var n=yn[t];if(n)return!i.useAdditionalWeekYearTokens&&function(e){return-1!==ln.indexOf(e)}(e)&&dn(e),!i.useAdditionalDayOfYearTokens&&cn(e)&&dn(e),n(g,e,r.localize,f);if(t.match(Mn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("");return p}function Dn(e,t){Zt(2,arguments);var n=Jt(e),a=Xt(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}function Ln(e,t){Zt(1,arguments);var n=e||{},a=Jt(n.start),i=Jt(n.end).getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var r=[],o=a;o.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=i;)r.push(Jt(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return r}function In(e,t){Zt(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.weekStartsOn,r=null==i?0:Xt(i),o=null==n.weekStartsOn?r:Xt(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Jt(e),l=s.getDay(),c=6+(l<o?-7:0)-(l-o);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function An(e){Zt(1,arguments);var t=Jt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function xn(e,t){Zt(1,arguments);var n=t||{},a=n.locale,i=a&&a.options&&a.options.weekStartsOn,r=null==i?0:Xt(i),o=null==n.weekStartsOn?r:Xt(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Jt(e),l=s.getDay(),c=(l<o?7:0)+l-o;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}var Pn=function(e){return Tn(e,"dd")},Nn=function(e){return Tn(e,"eeeeee")},$n=function(e){return Tn(e,"MMMM yyyy")};function On(e){var n=e.year,a=e.month,i=e.firstDayOfWeek,r=void 0===i?1:i,o=e.dayLabelFormat,s=void 0===o?Pn:o,l=e.weekdayLabelFormat,c=void 0===l?Nn:l,d=e.monthLabelFormat,u=void 0===d?$n:d;return{days:t.useMemo((function(){return function(e){var t=e.year,n=e.month,a=e.firstDayOfWeek,i=void 0===a?1:a,r=e.dayLabelFormat,o=void 0===r?function(e){return Tn(e,"dd")}:r,s=new Date(t,n),l=An(s),c=function(e){return Zt(1,arguments),Jt(e).getDay()}(l),d=function(e){Zt(1,arguments);var t=Jt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(s);return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,i++)a[i]=r[o];return a}(Array.from(Array(c>=i?c-i:6-i+c+1).keys()).fill(0),Ln({start:l,end:d}).map((function(e){return{date:e,dayLabel:o(e)}})))}({year:n,month:a,firstDayOfWeek:r,dayLabelFormat:s})}),[n,a,r,s]),weekdayLabels:t.useMemo((function(){return function(e){var t=void 0===e?{}:e,n=t.firstDayOfWeek,a=void 0===n?1:n,i=t.weekdayLabelFormat,r=void 0===i?function(e){return Tn(e,"iiiiii")}:i,o=new Date;return Ln({start:Dn(xn(o),a),end:Dn(In(o),a)}).reduce((function(e,t){return e.push(r(t)),e}),[])}({firstDayOfWeek:r,weekdayLabelFormat:c})}),[r,c]),monthLabel:u(new Date(n,a))}}function Rn(e,t){Zt(2,arguments);var n=Jt(e),a=Jt(t);return n.getTime()<a.getTime()}function Un(e,t){Zt(2,arguments);var n=Jt(e),a=Jt(t);return n.getTime()>a.getTime()}function Fn(e,t){Zt(2,arguments);var n=t||{},a=Jt(e).getTime(),i=Jt(n.start).getTime(),r=Jt(n.end).getTime();if(!(i<=r))throw new RangeError("Invalid interval");return a>=i&&a<=r}function Bn(e){Zt(1,arguments);var t=Jt(e);return t.setHours(0,0,0,0),t}function jn(e,t){Zt(2,arguments);var n=Bn(e),a=Bn(t);return n.getTime()===a.getTime()}function Hn(e,t){Zt(2,arguments);var n=Jt(e),a=Xt(t);if(isNaN(a))return new Date(NaN);if(!a)return n;var i=n.getDate(),r=new Date(n.getTime());return r.setMonth(n.getMonth()+a+1,0),i>=r.getDate()?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}var qn=function(e,t){return void 0===e&&(e=[]),e.some((function(e){return jn(t,e)}))};function Vn(e){var t=An(e);return{year:function(e){return Zt(1,arguments),Jt(e).getFullYear()}(t),month:function(e){return Zt(1,arguments),Jt(e).getMonth()}(t),date:t}}function Wn(e,t){var n=Vn(t||Bn(Date.now())),a=n.date,i=[n];return e>1&&(i=Array.from(Array(e-1).keys()).reduce((function(e){return a=Hn(e[e.length-1].date,1),e.concat([Vn(a)])}),i)),i}function Yn(e,t,n,a){var i=e[a?n>0?0:e.length-a:n>0?e.length-1:0].date;return Array.from(Array(t).keys()).reduce((function(e){return i=0===e.length?Hn(i,n):Hn(i,n>=0?1:-1),n>0?e.concat([Vn(i)]):[Vn(i)].concat(e)}),[])}function Gn(e){var t=e.startDate,n=e.endDate,a=e.isDateBlocked,i=e.minBookingDays,r=e.exactMinBookingDays,o=e.minBookingDate,s=e.maxBookingDate,l=!o||!Rn(t,Dn(o,-1)),c=!s||!Un(Dn(t,i-1),s);return!((!t||1!==i||n||a(t))&&(t&&i>1&&!n&&!r||t&&i>0&&r&&l&&c||t&&i>0&&r&&!o&&!s?Ln({start:t,end:Dn(t,i-1)}).some((function(e){return a(e)})):!t||!n||r||Rn(n,Dn(t,i-1))||Ln({start:t,end:n}).some((function(e){return a(e)}))))}function zn(e){var n=e.startDate,a=e.endDate,i=e.focusedInput,r=e.minBookingDate,o=e.maxBookingDate,s=e.onDatesChange,l=e.initialVisibleMonth,c=e.exactMinBookingDays,d=void 0!==c&&c,u=e.minBookingDays,m=void 0===u?1:u,g=e.numberOfMonths,f=void 0===g?2:g,p=e.firstDayOfWeek,h=void 0===p?1:p,_=e.isDateBlocked,y=void 0===_?function(){return!1}:_,E=e.unavailableDates,b=void 0===E?[]:E,v=e.changeActiveMonthOnSelect,w=void 0===v||v,k=t.useState((function(){return Wn(f,n||l||null)})),S=k[0],C=k[1],M=t.useState(null),T=M[0],D=M[1],L=t.useState(n),I=L[0],A=L[1];t.useEffect((function(){return"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("keydown",$),function(){window.removeEventListener&&window.removeEventListener("keydown",$)}}));var x=function(e){return qn(b,e)||y(e)},P=function(e){A(e),(!I||I&&!jn(e,I))&&C(Wn(f,e))},N=function(e){return function(e){var t=e.date,n=e.minBookingDate,a=e.maxBookingDate,i=e.isDateBlockedFn,r=e.startDate,o=e.endDate,s=e.minBookingDays,l=void 0===s?1:s,c=e.unavailableDates,d=void 0===c?[]:c,u=n?new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0):n,m=a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0):a;return!!(qn(d,t)||u&&Rn(t,u)||m&&Un(t,m)||r&&!o&&l>1&&Fn(t,{start:r,end:Dn(r,l-2)})||i&&i(t))}({date:e,minBookingDate:r,maxBookingDate:o,startDate:n,endDate:a,minBookingDays:m,isDateBlockedFn:x})};function $(e){if(("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key)&&!I){var t=S[0];P(t.date),C(Wn(f,t.date))}}var O=t.useCallback((function(){C(Yn(S,f,-1)),A(null)}),[S,f]),R=t.useCallback((function(){C(Yn(S,f,-1,1)),A(null)}),[S,f]),U=t.useCallback((function(){C(Yn(S,f,1)),A(null)}),[S,f]),F=t.useCallback((function(){C(Yn(S,f,1,1)),A(null)}),[S,f]),B=t.useCallback((function(e){C(Wn(f,e)),A(null)}),[f]),j=t.useCallback((function(e){void 0===e&&(e=1),C(Yn(S,f,-(12*e-f+1))),A(null)}),[S,f]),H=t.useCallback((function(e){void 0===e&&(e=1),C(Yn(S,f,12*e-f+1)),A(null)}),[S,f]);return{firstDayOfWeek:h,activeMonths:S,isDateSelected:function(e){return function(e,t,n){return!(!t||!n)&&Fn(e,{start:t,end:n})}(e,n,a)},isDateHovered:function(e){return function(e){var t=e.date,n=e.startDate,a=e.endDate,i=e.isDateBlocked,r=e.hoveredDate,o=e.minBookingDays;return r&&o>1&&e.exactMinBookingDays&&Fn(t,{start:r,end:Dn(r,o-1)})?!Ln({start:r,end:Dn(r,o-1)}).some((function(e){return i(e)})):n&&!a&&r&&Fn(t,{start:n,end:Dn(n,o-1)})&&jn(n,r)&&o>1?!Ln({start:n,end:Dn(n,o-1)}).some((function(e){return i(e)})):!(!n||a||!r||Rn(r,n)||!Fn(t,{start:n,end:r})||Ln({start:n,end:r}).some((function(e){return i(e)})))}({date:e,hoveredDate:T,startDate:n,endDate:a,minBookingDays:m,exactMinBookingDays:d,isDateBlocked:x})},isFirstOrLastSelectedDate:function(e){return function(e,t,n){return!!(t&&jn(e,t)||n&&jn(e,n))}(e,n,a)},isStartDate:function(e){return function(e,t){return!(!t||!jn(e,t))}(e,n)},isEndDate:function(e){return function(e,t){return!(!t||!jn(e,t))}(e,a)},isDateBlocked:N,numberOfMonths:f,isDateFocused:function(e){return!!I&&jn(e,I)},focusedDate:I,hoveredDate:T,onResetDates:function(){s({startDate:null,endDate:null,focusedInput:"startDate"})},onDateHover:function(e){if(e){if(e){var t=!N(e)||n&&jn(e,n),i=!r||!Rn(e,Dn(r,-1)),s=!o||!Un(e,o),l=Dn(e,m-1),c=!r||!Rn(l,r),u=!o||!Un(l,o),g=d&&m>1&&i&&s&&c&&u,f=n&&!a&&!d&&i&&s,p=!(m>1&&n)||Fn(e,{start:n,end:Dn(n,m-2)}),h=n&&jn(e,n)&&p;t&&(g||f||h)?D(e):null!==T&&D(null)}}else D(null)},onDateSelect:function(e){("endDate"===i||"startDate"===i)&&m>0&&d&&Gn({minBookingDays:m,exactMinBookingDays:d,minBookingDate:r,maxBookingDate:o,isDateBlocked:x,startDate:e,endDate:null})?s({startDate:e,endDate:Dn(e,m-1),focusedInput:null}):("endDate"===i&&n&&Rn(e,n)||"startDate"===i&&a&&Un(e,a))&&!d&&Gn({minBookingDays:m,isDateBlocked:x,startDate:e,endDate:null})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"startDate"===i&&!d&&Gn({minBookingDays:m,isDateBlocked:x,endDate:a,startDate:e})?s({endDate:a,startDate:e,focusedInput:"endDate"}):"startDate"===i&&!d&&Gn({minBookingDays:m,isDateBlocked:x,endDate:null,startDate:e})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"endDate"===i&&n&&!Rn(e,n)&&!d&&Gn({minBookingDays:m,isDateBlocked:x,startDate:n,endDate:e})&&s({startDate:n,endDate:e,focusedInput:null}),"endDate"!==i&&(!I||I&&!jn(e,I))&&w&&C(Wn(f,e))},onDateFocus:P,goToPreviousMonths:O,goToPreviousMonthsByOneMonth:R,goToNextMonths:U,goToNextMonthsByOneMonth:F,goToDate:B,goToPreviousYear:j,goToNextYear:H}}const Kn=["onClick"],Qn=["id","value","onChange","onSelection","format","disabled","inverse","isInvalid","isTransparent","size","data-testid","aria-label","aria-labelledby","isDateBlocked","autocomplete","autoFocus","placeholder"];var Xn={previous:"Previous",next:"Next"},Zn=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"]),Jn="L/d/y",ea={datePickerId:"",triggerRef:void 0,close:()=>!1,open:()=>!1,toggle:()=>!1,closeOnSelection:!0,withPreviousLabel:Xn.previous,withNextLabel:Xn.next,focusedDate:null,isDateFocused:()=>!1,isDateSelected:()=>!1,isDateHovered:()=>!1,isDateBlocked:()=>!1,isFirstOrLastSelectedDate:()=>!1,onDateFocus:()=>!1,onDateHover:()=>!1,onDateSelect:()=>!1,goToPreviousMonths:()=>!1,goToNextMonths:()=>!1,isStartDate:()=>!1,isEndDate:()=>!1},ta=$.createContext(ea);var na=(e,t)=>$e(e)&&$e(t)?H(e,t):e===t,aa=()=>new Date;var ia=(e,t)=>e.focusedInput!==t.focusedInput?{focusedInput:e.focusedInput}:na(t.startDate,e.startDate)&&na(t.endDate,e.endDate)?void 0:e,ra=" ",oa=e=>{let{date:n}=e;const{close:a,triggerRef:i,closeOnSelection:r,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}=$.useContext(ta),[p,h]=$.useState(!1),{onClick:_,onKeyDown:y,onMouseEnter:E,disabledDate:b,isSelected:v,isSelectedStartOrEnd:w,tabIndex:k}=function(e){var n=e.date,a=e.focusedDate,i=e.isDateSelected,r=e.isDateFocused,o=e.isFirstOrLastSelectedDate,s=e.isDateHovered,l=e.isDateBlocked,c=e.onDateSelect,d=e.onDateFocus,u=e.onDateHover,m=t.useCallback((function(){return c(n)}),[n,c]),g=t.useCallback((function(){return u(n)}),[n,u]),f=l(n)&&!s(n);return{tabIndex:null===a||r(n)?0:-1,isSelected:i(n),isSelectedStartOrEnd:o(n),isWithinHoverRange:s(n),disabledDate:f,onKeyDown:function(e){"ArrowRight"===e.key?d(Dn(n,1)):"ArrowLeft"===e.key?d(Dn(n,-1)):"ArrowUp"===e.key?d(Dn(n,-7)):"ArrowDown"===e.key&&d(Dn(n,7))},onClick:f?function(){}:m,onMouseEnter:g}}({date:n,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}),S=$.useCallback((e=>{p&&"Tab"===e.key?e.preventDefault():e.key===ra?h(!0):p||y&&y(e)}),[y,p]),C=$.useCallback((e=>{e.key===ra&&h(!1)}),[]),M=$.useCallback((e=>!v&&d(e)),[d,v]),T=$.useCallback((()=>{n&&M(n)||(_&&_(),r&&a({autoFocusRef:i}))}),[i,r,n,M,_,a]);return{getDayProps:$.useCallback((()=>({tabIndex:k,onClick:T,onKeyDown:S,onKeyUp:C,onMouseEnter:E})),[E,k,T,S,C]),isSelected:v,isSelectedStartOrEnd:w,isBlocked:M(n)||b,isFocused:s(n)}},sa=e=>new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(e),la=e=>new Intl.DateTimeFormat("en-US",{weekday:"narrow"}).format(e),ca=e=>new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(e),da=e=>{let{date:t,children:a}=e;const i=$.useRef(null),{getDayProps:r,isFocused:o,isBlocked:s,isSelected:l,isSelectedStartOrEnd:c}=oa({date:t}),{isStartDate:d,isEndDate:u}=$.useContext(ta);$.useEffect((()=>{i&&i.current&&o&&"focus"in i.current&&i.current.focus({preventScroll:!0})}),[i,o]);const m=H(t,aa()),g=d(t),f=u(t),p=n.classNames6("dig-DatePicker-day dig-10x86n28_22-7-0",{"dig-DatePicker-day--selected":l||c,"dig-10x86n2a_22-7-0":l||c,"dig-DatePicker-day--selectedEdge":c,"dig-10x86n2b_22-7-0":c,"dig-DatePicker-day--blocked":s,"dig-10x86n2c_22-7-0":s,"dig-DatePicker-day--today":m,"dig-10x86n29_22-7-0":m,"dig-DatePicker-day--start":g,"dig-10x86n2d_22-7-0":g,"dig-DatePicker-day--end":f,"dig-10x86n2e_22-7-0":f});return $.createElement("button",I._objectSpread2({ref:i,className:p,type:"button",disabled:s,"aria-pressed":l},r()),a)};da.displayName="Day";var ua=e=>{let{year:t,month:a,firstDayOfWeek:i,format:r,weekdayLabelFormat:o,dayLabelFormat:s}=e;const{datePickerId:l,withPreviousLabel:c,withNextLabel:d,monthLabel:u,weekdayLabels:m,days:g,getPreviousMonthProps:f,getNextMonthProps:p}=(e=>{let{year:t,month:n,firstDayOfWeek:a,format:i=sa,weekdayLabelFormat:r=la,dayLabelFormat:o=ca}=e;const{days:s,weekdayLabels:l,monthLabel:c}=On({year:t,month:n,firstDayOfWeek:a,monthLabelFormat:i,weekdayLabelFormat:r,dayLabelFormat:o}),{datePickerId:d,withPreviousLabel:u,withNextLabel:m,goToPreviousMonths:g,goToNextMonths:f}=$.useContext(ta);return{datePickerId:d,withPreviousLabel:u,withNextLabel:m,days:s,weekdayLabels:l,monthLabel:c,getPreviousMonthProps:$.useCallback((()=>({onClick:g})),[g]),getNextMonthProps:$.useCallback((()=>({onClick:f})),[f])}})({year:t,month:a,firstDayOfWeek:i,format:r,weekdayLabelFormat:o,dayLabelFormat:s});return $.createElement($.Fragment,null,$.createElement("div",{className:"dig-DatePicker-header dig-10x86n23_22-7-0"},$.createElement(n.Text,{className:"dig-DatePicker-title dig-10x86n24_22-7-0",size:"large",variant:"label",color:"standard"},u),$.createElement(x.IconButtonGroup,{size:"small"},(e=>{let{getButtonProps:t}=e;return $.createElement($.Fragment,null,$.createElement(n.Tooltip,{id:`${l}-previous`,title:c},$.createElement(n.IconButton,I._objectSpread2(I._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerPreviousMonth"},t()),f()),$.createElement(n.UIIcon,{size:"small",src:n.ChevronLeftLine}))),$.createElement(n.Tooltip,{id:`${l}-next`,title:d},$.createElement(n.IconButton,I._objectSpread2(I._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerNextMonth"},t()),p()),$.createElement(n.UIIcon,{size:"small",src:n.ChevronRightLine}))))}))),$.createElement("div",{className:"dig-DatePicker-weekdays dig-10x86n25_22-7-0"},m.map(((e,t)=>$.createElement(n.Text,{key:t,className:"dig-DatePicker-weekday dig-10x86n26_22-7-0",size:"xsmall",variant:"label",isBold:!0},e)))),$.createElement("div",{className:"dig-DatePicker-calendar-grid dig-10x86n27_22-7-0"},g.map(((e,t)=>"object"==typeof e?$.createElement(da,{key:e.date.toString(),date:e.date},e.dayLabel):$.createElement("div",{key:t})))))};ua.displayName="Month";var ma=$.createContext(void 0),ga=e=>{let{id:t,selectedDate:a,disabledDays:i=[],focusedInput:r="startDate",isDateBlocked:o,onSelection:s,onDateFocus:l,withPreviousLabel:c=Xn.previous,withNextLabel:d=Xn.next,monthLabelFormat:u,weekdayLabelFormat:m,dayLabelFormat:g,auto:f=!0,placement:p="bottom-start",positioningStrategy:h="absolute",closeOnBlur:_=!0,closeOnSelection:y=!0,shouldPropagateClickOutsideMouseEvents:E=!1,shouldHideDropShadow:b=!1,isBlock:v=!1,isPortaled:w=!0,onToggle:k,firstDayOfWeek:S=0,children:C}=e;const M=$.useMemo((()=>void 0===a?aa():a),[a]),T=$.useRef(null),D=$.useRef(null),L=$.useRef(null),[A,x]=$.useState(!1),P=n.useUniqueId({prefix:"dig-DatePicker-",idOverride:t}),N=$.useContext(ma),[O,R]=$.useState(p),[U,F]=$.useState(p);U!==p&&(R(p),F(p));const B=e=>{f&&R(e)},[j,H]=$.useState((()=>M));((e,t)=>{const n=$.useRef(!1);$.useEffect((()=>{n.current?e():n.current=!0}),t)})((()=>{"function"==typeof k&&k({isOpen:A})}),[A]),$.useEffect((()=>{H(M)}),[M]);const q=N?N.selectedRange[0]:j,V=N?N.selectedRange[1]:j,W=!!N,Y=$.useMemo((()=>W?((e,t,n)=>({type:1,focusedInput:n,createInitialState:()=>({startDate:e,endDate:t,focusedInput:n||"startDate"}),applyUpdates:ia}))(q,V,r):(e=>({type:0,focusedInput:"startDate",createInitialState:()=>({startDate:e,endDate:e,focusedInput:"startDate"}),applyUpdates:ia}))(q)),[W,q,V,r]),G=function(e){const[t,n]=$.useState(e.createInitialState()),a=$.useCallback((a=>{const i=e.applyUpdates(a,t);i&&n((e=>I._objectSpread2(I._objectSpread2({},e),i)))}),[t,e]),i=$.useCallback((e=>{let{startDate:t,endDate:n,focusedInput:i}=e;a({startDate:t,endDate:n,focusedInput:i||"startDate"})}),[a]),r=$.useCallback((t=>{let{startDate:n,endDate:i}=t;a({startDate:n,endDate:i,focusedInput:e.focusedInput})}),[a,e.focusedInput]);return{type:e.type,startDate:t.startDate,endDate:t.endDate,focusedInput:t.focusedInput,onDatesChange:i,sync:r}}(Y);$.useEffect((()=>{G.sync({startDate:q,endDate:V})}),[q,V,G]);const z=$.useCallback((e=>{s&&s(e),H(e.selectedDate)}),[s]),{activeMonths:K,goToPreviousMonths:Q,goToNextMonths:X,focusedDate:Z,isDateFocused:J,isDateSelected:ee,isDateHovered:te,isDateBlocked:ne,isFirstOrLastSelectedDate:ae,onDateFocus:ie,onDateSelect:re,onDateHover:oe,goToDate:se,isStartDate:le,isEndDate:ce}=function(e){let{picker:t,disabledDays:n,isDateBlocked:a,onSelection:i,onDateFocus:r}=e;const o=$.useCallback((e=>{if(t.onDatesChange(e),i){const{startDate:t,focusedInput:n}=e;let{endDate:a}=e;const r="endDate"===n;r&&!a&&(a=t),i({startDate:t,endDate:a,selectedDate:r?t:a})}}),[t,i]),{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:h,onDateSelect:_,onDateHover:y,goToDate:E,isStartDate:b,isEndDate:v}=zn({startDate:t.startDate,endDate:t.endDate,minBookingDays:0===t.type?1:void 0,exactMinBookingDays:0===t.type,minBookingDate:1===t.type&&"endDate"===t.focusedInput&&t.startDate||void 0,maxBookingDate:1===t.type&&"startDate"===t.focusedInput&&t.endDate||void 0,unavailableDates:n,isDateBlocked:a,focusedInput:t.focusedInput,onDatesChange:o,numberOfMonths:1}),w=$.useCallback((e=>{h&&h(e),r&&r(e)}),[r,h]),k=$.useCallback((e=>{1!==t.type||"endDate"!==t.focusedInput||null!==t.startDate||f(e)?_(e):o({focusedInput:"endDate",startDate:null,endDate:e})}),[f,o,_,t.type,t.focusedInput,t.startDate]);return{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:w,onDateSelect:k,onDateHover:y,goToDate:E,isStartDate:b,isEndDate:v}}({picker:G,disabledDays:i,isDateBlocked:o,onSelection:z,onDateFocus:l});$.useEffect((()=>{W&&!M&&(q&&!V&&se(q),V&&!q&&se(V),V||q||se(aa()))}),[q,V]);const de=1===K.length&&K[0],ue=$.useCallback((e=>{re(e),ie(e)}),[re,ie]),me=$.useCallback((e=>{const t=e&&e.autoFocusRef;x(!1),t&&t.current&&"focus"in t.current&&t.current.focus()}),[]),ge=$.useCallback((e=>{const t=e&&e.autoFocusDate;x(!0);const n=t||("startDate"===G.focusedInput?G.startDate:G.endDate);n&&ue(n)}),[G,ue]),fe=$.useCallback((e=>{const t=e&&e.autoFocusDate||("startDate"===G.focusedInput?G.startDate:G.endDate);t&&ue(t)}),[G,ue]),pe=$.useCallback((()=>{x((e=>!e));const e="startDate"===G.focusedInput?G.startDate:G.endDate;e&&ue(e)}),[G,ue]),he={datePickerId:P,triggerRef:D,closeOnSelection:y,close:me,open:ge,toggle:pe,withPreviousLabel:c,withNextLabel:d,monthLabelFormat:u,focusedDate:Z,isDateFocused:J,isDateSelected:ee,isDateHovered:te,isDateBlocked:ne,isFirstOrLastSelectedDate:ae,onDateFocus:ie,onDateSelect:re,onDateHover:oe,goToPreviousMonths:Q,goToNextMonths:X,isStartDate:le,isEndDate:ce},_e=$.useCallback((()=>{_&&me()}),[_,me]),ye=$.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClick:t}=e,n=I._objectWithoutProperties(e,Kn);return I._objectSpread2({onClick:e=>{x((e=>!e));const n="startDate"===G.focusedInput?G.startDate:G.endDate;n&&ie(n),t&&t(e)},ref:D},n)}),[D,G,ie]),Ee=$.useCallback((e=>{Zn.has(e.key)?e.preventDefault():A&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),me({autoFocusRef:D}))}),[me,A,D]),be=$.createElement(ta.Provider,{value:he},$.createElement("div",{className:n.classNames6("dig-DatePicker","dig-10x86n21_22-7-0",{"dig-DatePicker--shouldHideDropShadow":b,"dig-10x86n22_22-7-0":b}),onKeyDown:Ee,"data-testid":"digDatePicker"},de&&$.createElement(ua,{key:`${de.year}-${de.month}`,year:de.year,month:de.month,firstDayOfWeek:S,format:u,weekdayLabelFormat:m,dayLabelFormat:g}))),ve=(e=>{switch(e){case"top":case"top-start":case"top-end":default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(O),we=$.useMemo((()=>(e=>{const{direction:t}=e;return new Map([["open",{keyFrames:{transform:"up"===t?"translate(0, -4px)":"translate(0, 4px)",opacity:1},options:{duration:.125,ease:n.EASE_ENTER}}],["close",{keyFrames:{opacity:0},options:{duration:.125,ease:n.EASE_LEAVE}}]])})({direction:ve})),[ve]),{isMotionRunning:ke}=n.useMotion({states:we,currentState:A?"open":"close",elementRef:T});if("function"==typeof C){const e=C({getTriggerProps:ye,triggerRef:D,close:me,open:ge,toggle:pe,forceUpdate:fe});return $.createElement(n.ClickOutside,{className:"dig-DatePicker-backdrop dig-10x86n20_22-7-0",isBlock:v,onClickOutside:_e,shouldPropagateMouseEvents:E,isClickThroughPortaled:w,isActive:A},e,A||ke?$.createElement(n.Overlay,{className:`pleskac-${ve}`,auto:f,onChangePlacement:B,isPortaled:w,placement:O,positioningStrategy:h,ref:L,anchorRef:D,"data-testid":"digDatePickerOverlay"},$.createElement("div",{ref:T},be)):null)}return be};ga.displayName="DatePicker";var fa=(e,t)=>j(e)?"object"==typeof t?t.dateToString(e):Pe(e,t||""):"",pa=(e,t)=>"object"==typeof t?t.stringToDate(e):function(e,t,n,a){A.requiredArgs(3,arguments);var i=String(e),r=String(t),o=a||{},s=o.locale||Z;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,c=null==l?1:B(l),d=null==o.firstWeekContainsDate?c:B(o.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=s.options&&s.options.weekStartsOn,m=null==u?0:B(u),g=null==o.weekStartsOn?m:B(o.weekStartsOn);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===r)return""===i?A.toDate(n):new Date(NaN);var f,p={firstWeekContainsDate:d,weekStartsOn:g,locale:s},h=[{priority:10,subPriority:-1,set:St,index:0}],_=r.match(Et).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,we[t])(e,s.formatLong,p):e})).join("").match(yt),y=[];for(f=0;f<_.length;f++){var E=_[f];!o.useAdditionalWeekYearTokens&&Me(E)&&Te(E,r,e),!o.useAdditionalDayOfYearTokens&&Ce(E)&&Te(E,r,e);var b=E[0],v=_t[b];if(v){var w=v.incompatibleTokens;if(Array.isArray(w)){for(var k=void 0,S=0;S<y.length;S++){var C=y[S].token;if(-1!==w.indexOf(C)||C===b){k=y[S];break}}if(k)throw new RangeError("The format string mustn't contain `".concat(k.fullToken,"` and `").concat(E,"` at the same time"))}else if("*"===v.incompatibleTokens&&y.length)throw new RangeError("The format string mustn't contain `".concat(E,"` and any other token at the same time"));y.push({token:b,fullToken:E});var M=v.parse(i,E,s.match,p);if(!M)return new Date(NaN);h.push({priority:v.priority,subPriority:v.subPriority||0,set:v.set,validate:v.validate,value:M.value,index:h.length}),i=M.rest}else{if(b.match(kt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if("''"===E?E="'":"'"===b&&(E=E.match(bt)[1].replace(vt,"'")),0!==i.indexOf(E))return new Date(NaN);i=i.slice(E.length)}}if(i.length>0&&wt.test(i))return new Date(NaN);var T=h.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return h.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),D=A.toDate(n);if(isNaN(D))return new Date(NaN);var L=J(D,A.getTimezoneOffsetInMilliseconds(D)),I={};for(f=0;f<T.length;f++){var x=T[f];if(x.validate&&!x.validate(L,x.value,p))return new Date(NaN);var P=x.set(L,I,x.value,p);P[0]?(L=P[0],Ne(I,P[1])):L=P}return L}(e,t,new Date),ha=e=>{let{id:t,value:a,onChange:i,onSelection:r,format:o=Jn,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"data-testid":m,"aria-label":g,"aria-labelledby":f,isDateBlocked:p,autocomplete:h,autoFocus:_,placeholder:y}=e,E=I._objectWithoutProperties(e,Qn);const[b,v]=$.useState(fa(a,o)),w=$.useCallback((()=>{let e=null;return b.length&&(e=pa(b,o),!j(e)||p&&p(e))?(v(fa(a,o)),a):(i&&!na(e,a)&&i(e),e)}),[b,i,a,o,p]),k=e=>()=>{const t=w();e({autoFocusDate:t})},S=$.useCallback((e=>{v(e.target.value)}),[]),C=$.useCallback((e=>{i&&!na(e.selectedDate,a)&&i(e.selectedDate),r&&r(e)}),[i,r,a]),M=$.useCallback((e=>t=>{switch(t.key){case ra:return void t.preventDefault();case"Enter":t.preventDefault();const n=w();return void e({autoFocusDate:n})}}),[w]),T=$.useCallback((e=>t=>{if(t.key===ra){const t=w();e({autoFocusDate:t})}}),[w]),D=$.useCallback((e=>()=>{s||(w(),e())}),[s,w]);return $.useEffect((()=>{v(null===a?"":fa(a,o))}),[o,a]),$.createElement(ga,I._objectSpread2({selectedDate:a,onSelection:C,isDateBlocked:p},E),(e=>{let{getTriggerProps:a,open:i,forceUpdate:r}=e;return $.createElement(n.TextInput,I._objectSpread2(I._objectSpread2({id:t,value:b,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"aria-label":g,"aria-labelledby":f,"data-testid":m},a({onChange:S,onKeyDown:M(i),onKeyUp:T(i),onBlur:k(r)})),{},{withLeftAccessory:$.createElement(n.UIIcon,{src:P.CalendarLine,onClick:D(i)}),autoComplete:h,autoFocus:_,placeholder:y}))}))};const _a=e=>{const{policyName:t,policyDict:n,selector:a,onLinkClicked:i,extra:r,className:o}=e;return $.createElement(Bt,{policyFieldName:t,key:n.title,displayName:n.title,displayNameTitle:n.title,description:n.description,descriptionLinkUrl:n.descriptionLinkUrl,descriptionLinkText:n.descriptionLinkText,descriptionLinkOnClicked:i,rightSideElement:a,bottomElement:r,className:o})};let ya=0;const Ea=e=>{const t=$.useMemo((()=>(ya++,`settings-toggle-id-${ya}`)),[]),{currentValue:a,optionsDict:i,disabled:r,ariaLabel:o}=e,s=i[a].label;return $.createElement($.Fragment,null,$.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},$.createElement(n.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),$.createElement(n.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:i[a].value,disabled:r,onChange:t=>{r||e.onOptionChange(!i[a].value,t)}})))},ba=e=>{const{intl:t,linkMetadata:n,linkPolicy:a,onPolicyUpdate:i}=e,r=(e=>{const{linkMetadata:t,linkPolicy:n}=e,a=new Date;let i;if(u.isExternalAudience(n.audience)){const{days_to_expire_policy:e}=t.link_permissions;u.isExpirationPolicyEnforcedByAdmin(t.link_permissions)&&(i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+u.daysExpirationPolicyToNumber[e]))}return{before:new Date(a.getFullYear(),a.getMonth(),a.getDate()+1),after:i}})(e),o=a.expires||new Date;return $.createElement("div",{className:"sharing-settings-modal__input_spacing"},$.createElement(ha,{value:o,disabled:!u.canModifyExpire(n)||e.readOnlyPolicy,isDateBlocked:e=>e<r.before||!!(r.after&&e>r.after),onChange:e=>{e&&i({expires:e,display_expiration_warning:!1})},dayLabelFormat:$.useCallback((e=>t.formatDate(e,{day:"2-digit"})),[t]),monthLabelFormat:e=>t.formatDate(e,{month:"long",year:"numeric"}),weekdayLabelFormat:e=>t.formatDate(e,{weekday:"narrow"})}))},va=e=>{const{linkPolicy:t,linkMetadata:n,getPolicyDict:a,onPolicyUpdate:i}=e,r=a(Dt),o=null!=e.linkPolicy.expires?"enabled":"disabled",{days_to_expire_policy:s}=n.link_permissions;return $.createElement(Ea,{currentValue:o,optionsDict:r.optionsDict,onOptionChange:(e,a)=>{let r=null;e&&(r=t.expires,t.expires||(r=u.daysAfterToday(u.isExternalAudience(t.audience)&&u.isExpirationPolicySetByAdmin(n.link_permissions)?u.daysExpirationPolicyToNumber[s]:30))),i({expires:r,display_expiration_warning:!1})},disabled:wa(n,t)||e.readOnlyPolicy,ariaLabel:r.title})},wa=(e,t)=>!u.canToggleExpire(e)||u.isExternalAudience(t.audience)&&u.isExpirationPolicyEnforcedByAdmin(e.link_permissions),ka=e=>{const t=e.getPolicyDict(Dt),n=t=>{t&&t.expires instanceof Date&&(t.expires.setHours(23),t.expires.setMinutes(59),t.expires.setSeconds(59)),e.onPolicyUpdate(t)},a=null!=e.linkPolicy.expires,i=$.createElement(va,{...e,onPolicyUpdate:n}),r=$.createElement("div",null,i,a&&$.createElement(ba,{...e,onPolicyUpdate:n}));return $.createElement(_a,{policyName:Dt,policyDict:t,selector:r})},Sa=(e,t)=>u.isPasswordPolicyEnforcedByAdmin(e)&&u.isExternalAudience(t);function Ca(e,t){return t.link_password||""===t.link_password?t.link_password:u.hasLinkPassword(e)?"123456":""}const Ma=e=>{const{intl:t,linkPolicy:a,linkPermissions:i,onPolicyUpdate:r}=e;return $.createElement("div",{className:"sharing-settings-modal__input_spacing"},$.createElement(n.TextInput,{role:"textbox",autoFocus:!0,className:"password-input__input",disabled:!u.canModifyPassword(i)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{r({[e.target.name]:e.target.value})},type:"password",isInvalid:""===a.link_password,value:Ca(i,a)}))},Ta=e=>{const{getPolicyDict:t,linkPolicy:n}=e,a=t(xt),i=$.createElement("div",null,(e=>{const{linkPolicy:t,linkPermissions:n,getPolicyDict:a,onPolicyUpdate:i}=e,r=a(xt),o=r.optionsDict,s=t.require_password?"enabled":"disabled";return $.createElement(Ea,{currentValue:s,optionsDict:o,onOptionChange:(e,t)=>{i({require_password:e})},disabled:!u.canTogglePassword(n)||Sa(n,t.audience)||e.readOnlyPolicy,ariaLabel:r.title})})(e),(n.require_password||Sa(e.linkPermissions,n.audience)&&!e.readOnlyPolicy)&&$.createElement(Ma,{...e}));return $.createElement(_a,{policyName:xt,policyDict:a,selector:i})};class Da extends $.Component{render(){const e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return t!==n.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder&&t!==n.LinkAudienceDisallowedReason$1.DeleteAndRecreate?null:$.createElement(Ut,{className:"sharing-settings-modal__banner",type:"default",message:$.createElement("span",null,$.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",$.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})}audienceDisallowedText(e){if(e===n.ResolvedVisibilityPolicy.shared_folder_only){let e=this.props.linkPermissions.restricting_shared_folder_path;return void 0!==e?(e=u.Emstring.em_snippet(e,n.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder {shared_folder_name} can view this link."},{shared_folder_name:e})):void 0}return e===n.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0}audienceDisallowedAdviceText(e){return e===n.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):e===n.LinkAudienceDisallowedReason$1.DeleteAndRecreate?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0}}Da.displayName="RestrictedVisibilityBanner";const La=e=>{const{linkPermissions:t,linkPolicy:a,getPolicyDict:i,onPolicyUpdate:r}=e,o=a.audience||"",s=t.audience_options.filter((e=>!((e,t)=>"public"===e&&u.isPasswordPolicyEnforcedByAdmin(t)&&!n.isRighteousLink(t))(e.audience,t)&&e.allowed)).map((e=>e.audience)),l=i(At),c=s.length>0;return $.createElement(Ft,{currentValue:o,valuesList:s,optionsDict:l.optionsDict,onValueSelected:e=>{const n={audience:e};!function(e,t,n,a){if(u.isExternalAudience(e)){if(u.isExpirationPolicySetByAdmin(t)){const e=new Date,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()+u.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!n.expires||n.expires>i)&&(a.expires=i,a.display_expiration_warning=!0)}u.isPasswordPolicyEnforcedByAdmin(t)&&!n.require_password&&(a.require_password=!0,"public"===e&&(a.display_password_warning=!0))}else a.display_expiration_warning=!1,a.display_password_warning=!1}(e,t,a,n),r(n)},disabled:!c||e.readOnlyPolicy,ariaLabel:l.title})};function Ia(e){const t="password"===e.linkPolicy.audience;return $.createElement("div",null,$.createElement(La,{...e}),t&&$.createElement(Ma,{...e}))}function Aa(e){const{intl:t,linkPermissions:n}=e;let a;n.audience_options.filter((e=>e.allowed)).length>0||(a=$.createElement(Da,{intl:t,linkPermissions:n}));const i=e.getPolicyDict(At),r=$.createElement(Ia,{...e});return $.createElement(_a,{policyName:At,policyDict:i,selector:r,extra:a})}function xa(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}const Pa=e=>{const{intl:t,linkPolicy:n,linkPermissions:a}=e;return!n.allow_download&&a.can_disallow_download?$.createElement(Ut,{className:"sharing-settings-modal__banner",type:"warn",message:t.formatMessage({id:"+EZZAD",defaultMessage:"This applies only within Dropbox."})}):null},Na=e=>{const{linkPolicy:t,onPolicyUpdate:n,getPolicyDict:a,linkPermissions:i}=e,r=t.allow_download?"disabled":"enabled",o=a(Lt);return $.createElement(Ea,{currentValue:r,optionsDict:o.optionsDict,onOptionChange:(e,t)=>{n(Lt,!e)},disabled:!xa(i)||e.readOnlyPolicy,ariaLabel:o.title})},$a=e=>{const t=e.getPolicyDict(Lt),n=e.isEditFolderLink||e.isPaperDoc?void 0:$.createElement(Na,{...e}),a=e.isEditFolderLink||e.isPaperDoc?"setting-disabled":"";return $.createElement(_a,{policyName:Lt,policyDict:t,selector:n,onLinkClicked:e.onLinkClicked,extra:e.banner,className:a})},Oa=e=>({getShmodelInMultipleLinksPolicyDict(t,n){switch(t){case At:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:n?e.formatMessage({id:"4HZCOQ",defaultMessage:"Control who can view the folder with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:n?e.formatMessage({id:"ysL13U",defaultMessage:"Anyone with this link can view the folder."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:n?e.formatMessage({id:"AvhnVi",defaultMessage:"Team members with this link can view the folder."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},password:{label:e.formatMessage({id:"DDCDRp",defaultMessage:"People with password"}),description:n?e.formatMessage({id:"uos+ms",defaultMessage:"Password protect this link for viewing the folder."}):e.formatMessage({id:"oPivFQ",defaultMessage:"Password protect this link for viewing the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:Nt};case Dt:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:$t};case Lt:return{title:e.formatMessage({id:"d8lth0",defaultMessage:"Disable downloads"}),description:e.formatMessage({id:"B5ygR1",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:$t};case It:return{title:e.formatMessage({id:"LtXXzz",defaultMessage:"Default sharing settings"}),description:e.formatMessage({id:"dVXrDR",defaultMessage:"Go to account settings to set a default sharing permission"}),optionsDict:{},type:Ot};default:throw new Error("Policy name not found")}},getRLPolicyDict(t,n,a,i=!1){const r="editor"===n;switch(t){case At:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:r?a?e.formatMessage({id:"inMOXx",defaultMessage:"Control who can edit the folder with this link."}):i?e.formatMessage({id:"q43j+5",defaultMessage:"Control who can edit the collection with this link."}):e.formatMessage({id:"/1cHLH",defaultMessage:"Control who can edit the file with this link."}):i?e.formatMessage({id:"RE27lR",defaultMessage:"Control who can view the collection with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:r?a?e.formatMessage({id:"w/+tle",defaultMessage:"Anyone with this link can edit the folder."}):i?e.formatMessage({id:"6f9EIg",defaultMessage:"Anyone with this link can edit the collection."}):e.formatMessage({id:"a3Sd0R",defaultMessage:"Anyone with this link can edit the file."}):i?e.formatMessage({id:"anz5bU",defaultMessage:"Anyone with this link can view the collection."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:r?a?e.formatMessage({id:"qUcOUf",defaultMessage:"Team members with this link can edit the folder."}):i?e.formatMessage({id:"+rwKpP",defaultMessage:"Team members with this link can edit the collection."}):e.formatMessage({id:"dyCqAa",defaultMessage:"Team members with this link can edit the file."}):i?e.formatMessage({id:"p6witM",defaultMessage:"Team members with this link can view the collection."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:Nt};case xt:return{title:e.formatMessage({id:"8stY8L",defaultMessage:"Require password"}),description:a?e.formatMessage({id:"1Syz7Y",defaultMessage:"Set a password to limit access to the folder via link."}):i?e.formatMessage({id:"7ahyOy",defaultMessage:"Set a password to limit access to the collection via link."}):e.formatMessage({id:"AH/PXS",defaultMessage:"Set a password to limit access to the file via link."}),optionsDict:{enabled:{label:e.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:$t};case Lt:{const t=r&&(a||i);return{title:e.formatMessage({id:"9D4NOL",defaultMessage:"Disable downloads"}),description:t?e.formatMessage({id:"b44CQy",defaultMessage:"To disable downloads, share the link for viewing."}):e.formatMessage({id:"DIzsqJ",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:t?void 0:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:$t}}case Dt:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:$t};case It:return{title:e.formatMessage({id:"LtXXzz",defaultMessage:"Default sharing settings"}),description:e.formatMessage({id:"dVXrDR",defaultMessage:"Go to account settings to set a default sharing permission"}),optionsDict:{},type:Ot};default:throw new Error("Policy name not found")}}}),Ra=({className:e,...t})=>$.createElement("div",{className:n.cx("scl-scooter-loader",e),...t},$.createElement("div",{className:"scl-scooter-loader-animation"}));Ra.displayName="ScooterLoader";const Ua={default:"transparent",active:"#D0D4D9",edit:"transparent",view:"transparent"},Fa=()=>$.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},$.createElement("g",{transform:"translate(-24.000000, -8.000000)"},$.createElement("g",null,$.createElement("g",{transform:"translate(24.000000, 8.000000)"},$.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),$.createElement("path",{d:"M21.0859375,13.1015625 L20.0195312,14.1679688 L17.8320312,11.9804688\n                L18.8984375,10.9140625 C19.007813,10.804687 19.1445304,10.75 19.3085938,10.75\n                C19.4726571,10.75 19.6093745,10.804687 19.71875,10.9140625 L21.0859375,12.28125\n                C21.195313,12.3906255 21.25,12.5273429 21.25,12.6914062 C21.25,12.8554696\n                21.195313,12.992187 21.0859375,13.1015625 Z M10.75,19.0625 L17.203125,12.609375\n                L19.390625,14.796875 L12.9375,21.25 L10.75,21.25 L10.75,19.0625 Z",fill:"#6A7C8F"}))))),Ba=()=>$.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},$.createElement("g",{transform:"translate(-24.000000, -8.000000)"},$.createElement("g",null,$.createElement("g",{transform:"translate(24.000000, 8.000000)"},$.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),$.createElement("path",{d:"M14.7695312,14.7695312 C15.1158871,14.4231754 15.5260393,14.25 16,14.25\n                  C16.4739607,14.25 16.8841129,14.4231754 17.2304688,14.7695312 C17.5768246,\n                  15.1158871 17.75,15.5260393 17.75,16 C17.75,16.4739607 17.5768246,16.8841129\n                  17.2304688,17.2304688 C16.8841129,17.5768246 16.4739607,17.75 16,17.75 C15.5260393,\n                  17.75 15.1158871,17.5768246 14.7695312,17.2304688 C14.4231754,16.8841129 14.25,\n                  16.4739607 14.25,16 C14.25,15.5260393 14.4231754,15.1158871 14.7695312,14.7695312\n                  Z M13.921875,18.078125 C14.5052113,18.643232 15.1979127,18.9257812 16,18.9257812\n                  C16.8020873,18.9257812 17.4902315,18.6386747 18.0644531,18.0644531 C18.6386747,\n                  17.4902315 18.9257812,16.8020873 18.9257812,16 C18.9257812,15.1979127 18.6386747,\n                  14.5097685 18.0644531,13.9355469 C17.4902315,13.3613253 16.8020873,13.0742188 16,\n                  13.0742188 C15.1979127,13.0742188 14.5097685,13.3613253 13.9355469,13.9355469\n                  C13.3613253,14.5097685 13.0742188,15.1979127 13.0742188,16 C13.0742188,16.8020873\n                  13.356768,17.4947887 13.921875,18.078125 Z M12.0898438,12.828125 C13.2565163,\n                  12.0260377 14.5598886,11.625 16,11.625 C17.4401114,11.625 18.7434837,12.0260377\n                  19.9101562,12.828125 C21.0768288,13.6302123 21.915362,14.6874934 22.4257812,16\n                  C21.915362,17.3125066 21.0768288,18.3697877 19.9101562,19.171875 C18.7434837,\n                  19.9739623 17.4401114,20.375 16,20.375 C14.5598886,20.375 13.2565163,19.9739623\n                  12.0898438,19.171875 C10.9231712,18.3697877 10.084638,17.3125066 9.57421875,\n                  16 C10.084638,14.6874934 10.9231712,13.6302123 12.0898438,12.828125 Z",fill:"#667C91"}))))),ja=()=>$.createElement("g",{fill:"#6A7C8F",transform:"translate(16.071068, 16.071068) rotate(-315.000000)\n                  translate(-16.071068, -16.071068) translate(13.071068, 9.071068)"},$.createElement("path",{d:"M5.98487348,4.76239943 L4.58487348,4.76239943 L4.58487348,3.36107038\n                      C4.58487348,2.58309388 3.95807213,1.96239943 3.18487348,1.96239943\n                      C2.40628423,1.96239943 1.78487348,2.58860575 1.78487348,3.36107038\n                      L1.78487348,6.16372849 C1.78487348,6.94170499 2.41167483,7.56239943\n                      3.18487348,7.56239943 L3.18487348,8.96239943 C1.63847618,8.96239943\n                      0.384873479,7.70483456 0.384873479,6.16532106 L0.384873479,3.3594778\n                      C0.384873479,1.81469408 1.64162279,0.562399434 3.18487348,0.562399434\n                      C4.73127078,0.562399434 5.98487348,1.81996431 5.98487348,3.3594778\n                      L5.98487348,4.76239943 Z"}),$.createElement("path",{d:"M0.384873479,9.66239943 L1.78487348,9.66239943 L1.78487348,11.0637285\n                      C1.78487348,11.841705 2.41167483,12.4623994 3.18487348,12.4623994\n                      C3.96346273,12.4623994 4.58487348,11.8361931 4.58487348,11.0637285\n                      L4.58487348,8.26107038 C4.58487348,7.48309388 3.95807213,6.86239943\n                      3.18487348,6.86239943 L3.18487348,5.46239943 C4.73127078,5.46239943\n                      5.98487348,6.71996431 5.98487348,8.2594778 L5.98487348,11.0653211\n                      C5.98487348,12.6101048 4.72812417,13.8623994 3.18487348,13.8623994\n                      C1.63847618,13.8623994 0.384873479,12.6048346 0.384873479,11.0653211\n                      L0.384873479,9.66239943 Z"})),Ha=({className:e,variant:t})=>$.createElement("svg",{className:e,width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},$.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},$.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34",fill:Ua[t||"default"]}),(e=>{switch(e){case"edit":return Fa();case"view":return Ba();default:return ja()}})(t||"default"))),qa="scl-sharing-modal-downgrade-banner",Va=e=>{const{subheader:t,header:a,onClickCloseButton:i,onClickOutlineButton:r,onClickTransparentButton:o,outlineButtonLabel:l,transparentButtonLabel:c,showCloseButton:d}=e,u=s.useIntl();return $.createElement("div",{className:`${qa} dig-Theme---VIS`,"data-testid":"sharing-modal-downgrade-banner"},$.createElement("div",{className:`${qa}__header`},$.createElement(n.Text,{isBold:!0,size:"large"},a),d&&$.createElement(n.IconButton,{variant:"transparent","aria-label":u.formatMessage({id:"hhAj2K",defaultMessage:"Close"}),className:`${qa}__close`,onClick:i,size:"standard"},$.createElement(n.UIIcon,{src:n.CloseLine}))),$.createElement("div",{className:`${qa}__subheader`},$.createElement(n.Text,null,t)),$.createElement("div",{className:`${qa}__buttons`},$.createElement(n.Button,{variant:"outline",onClick:r},l),$.createElement(n.Button,{variant:"transparent",onClick:o},c)))};Va.displayName="SharingModalDowngradeBanner";const Wa={".tag":"no_one"},Ya={".tag":"password"},Ga={".tag":"team"},za={".tag":"public"};function Ka(e){switch(e){case"no_one":return Wa;case"password":return Ya;case"team":return Ga;case"public":return za;default:throw new Error(`Invalid tag: ${e}`)}}const Qa={".tag":"viewer"},Xa={".tag":"editor"},Za={".tag":"default"};n.injectInternalStyle("/static/metaserver/static/js/growth/ui/over-quota-share-banner-component/over_quota_share_banner_component.module.out-vflEEG0ol.css",(e=>"._bannerSection_l7aro_1{margin-bottom:var(--dig-spacing__micro__medium);margin-top:var(--dig-spacing__micro__small)}"));const Ja="_bannerSection_l7aro_1";const ei=({onRedirect:e})=>{var t,a,o,s,l,c,d,u,m,g;const f=n.useExperimentVariant("end_state_web_overquota_restrictions"),p=f&&f.variant===n.Variant.V1,h=$.default.useRef(!1),_=(null==f?void 0:f.variant)?f.variant:n.Variant.OFF,{user:y}=n.useActiveUser(),{quotaUpsellInfo:E,isLoadingQuotaUpsellInfo:b,quotaUpsellInfoError:v}=n.useQuotaUpsellInfo(y,f.variant===n.Variant.OFF),w=!(f.isLoading||b||f.error||v),k=(null===(t=null==E?void 0:E.restrictions)||void 0===t?void 0:t.enforce_restrictions)||(null===(a=null==E?void 0:E.restrictions)||void 0===a?void 0:a.show_restrictions_warning),S=p&&k,C=(null===(l=null===(s=null===(o=null==E?void 0:E.quota)||void 0===o?void 0:o.allocation)||void 0===s?void 0:s.individual)||void 0===l?void 0:l.allocated)||0,M=(null===(c=null==E?void 0:E.quota)||void 0===c?void 0:c.used)||0,T=null===(d=null==E?void 0:E.restrictions)||void 0===d?void 0:d.overquota_start_time_utc_seconds,D=T?Date.now()/1e3-T:void 0,L=!!(null===(u=null==E?void 0:E.restrictions)||void 0===u?void 0:u.enforce_restrictions),I=n.getOverQuotaReason(null==E?void 0:E.overquota_reason),A=null!==(m=r.getOrganicOrChurnedFromString(I))&&void 0!==m?m:"unlabeled";if($.default.useEffect((()=>{w&&k&&[n.Variant.V1,n.Variant.CONTROL,n.Variant.HOLDOUT].includes(_)&&(n.logExposure({feature:"end_state_web_overquota_restrictions",variant:_}),n.logAdditionalExposureDetails(_,"share_modal_banner",E))}),[_,k,w,E]),$.default.useEffect((()=>{w&&S&&!h.current&&(n.UDCL.logEvent({class:"quota",action:"shown",object:"overquota_share_modal_banner",properties:{quotaLimit:C,quotaUsed:M,secondsOverquota:D,hardblocked:L,organicOrChurned:A}},{tags:{hardblocked:L?"true":"false",organicOrChurned:A}}),h.current=!0)}),[w,S,C,M,D,L,A]),!w)return null;if(!S)return null;const x=(null===(g=null==E?void 0:E.restrictions)||void 0===g?void 0:g.show_restrictions_warning)||!1,P=function(e,t){var n;return e?(null===(n=null==t?void 0:t.restrictions)||void 0===n?void 0:n.restrictions_start_time_utc_seconds)?i.SHARING_RESTRICTION_WARNING(i.getRestrictionsDateString(t.restrictions.restrictions_start_time_utc_seconds)):i.SHARING_RESTRICTION_WARNING_NO_DATE:i.SHARING_ENFORCE_RESTRICTIONS}(x,E);return $.default.createElement(n.Box,{className:Ja,"data-testid":"over-quota-share-banner-component"},$.default.createElement(n.Banner,{type:x?"warning":"alert",borderRadius:"Large"},$.default.createElement(n.Box,{display:"flex",justifyContent:"space-between",alignItems:"center"},$.default.createElement(n.Banner.Message,null,P),$.default.createElement(n.Banner.Actions,null,$.default.createElement(n.Button,{variant:"transparent",onClick:()=>{n.UDCL.logEvent({class:"quota",action:"select",object:"overquota_share_modal_banner",properties:{quotaLimit:C,quotaUsed:M,secondsOverquota:D,hardblocked:L,organicOrChurned:A,actionElement:"upgrade"}},{tags:{actionElement:"upgrade",hardblocked:L?"true":"false",organicOrChurned:A}}),n.redirect("/out-of-space?_tk=oq_restrictions_modal"),null==e||e()}},i.UPGRADE)))))};ei.displayName="OverquotaShareBannerComponent";const ti=s.defineMessage({id:"UaJBfk",defaultMessage:"QR code for sharing"}),ni=s.defineMessage({id:"ZFsp0l",defaultMessage:"Download"}),ai=s.defineMessage({id:"E89n5D",defaultMessage:"Download QR code"}),ii=s.defineMessage({id:"EQKjGC",defaultMessage:"Anyone with the code can view."}),ri=s.defineMessage({id:"J8vTeR",defaultMessage:"Team members with the code can view."}),oi=s.defineMessage({id:"5TDAHV",defaultMessage:"Manage access"}),si=s.defineMessage({id:"tllLrY",defaultMessage:"Only people invited can view."}),li=s.defineMessage({id:"bWq9cz",defaultMessage:"Couldnt create QR code. You dont have permission to create a QR code to this content."}),ci=s.defineMessage({id:"tpMKHD",defaultMessage:"We cant find this file anymore. Try checking activity or folder history to see what happened."}),di=s.defineMessage({id:"zGqflr",defaultMessage:"You cant share until you verify your email address."}),ui=s.defineMessage({id:"zM/n79",defaultMessage:"Couldnt create QR code. Please try again later."}),mi=s.defineMessage({id:"s2Zxdl",defaultMessage:"Couldnt create QR code."});var gi;!function(e){e.PATH_FORBIDDEN="path_forbidden",e.PATH_NOT_FOUND="path_not_found",e.EMAIL_NOT_VERIFIED="email_not_verified",e.SERVICE_UNAVAILABLE="service_unavailable",e.UNKNOWN="unknown"}(gi||(gi={}));const fi=e=>`data:image/png;base64,${e}`;n.injectInternalStyle("/static/metaserver/static/js/sharing/features/sharing_qr_code/get_qr_code_modal.module.out-vflNN1fVL.css",(e=>"._get-qr-code-modal_dbu8m_1>div{background-color:var(--dig-color__background__subtle);border:1px solid var(--dig-color__border__subtle)}._get-qr-code-modal-image_dbu8m_6{display:flex;width:100%}._get-qr-code-modal-spinner_dbu8m_11{align-items:center;aspect-ratio:1/1;display:flex;justify-content:center;width:100%}._get-qr-code-modal-body_dbu8m_19{padding-bottom:var(--spacing__unit--3);padding-top:calc(var(--spacing__unit--1)*6)}._get-qr-code-modal-filename_dbu8m_25{white-space:nowrap}@media (min-width:601px){._get-qr-code-modal-body_dbu8m_19{padding-top:var(--spacing__unit--3)}._get-qr-code-modal_dbu8m_1 button.dig-Modal-close-btn{display:none}}"));const pi=({base64QrCode:e})=>$.default.createElement("img",{"data-testid":"qr-code-modal-image",className:"_get-qr-code-modal-image_dbu8m_6",src:fi(e),alt:s.intl.formatMessage(ti)});pi.displayName="GetQrCodeModalImage";const hi=()=>$.default.createElement("div",{className:"_get-qr-code-modal-spinner_dbu8m_11"},$.default.createElement(n.Spinner,{size:"medium"}));const _i=n.createApiv2Query({nsClient:function(e){return e.ns("sharing_qr_code")},rpc:"get_qr_code"}),yi=()=>{var e;const t="dark"===(null===(e=n.useTheme())||void 0===e?void 0:e.mode);return $.default.createElement($.default.Fragment,null,$.default.createElement(n.Box,{padding:"Micro XLarge",marginTop:"Micro Small",borderWidth:"1",borderColor:"Border Subtle",borderStyle:"Solid",backgroundColor:t?"Secondary Surface - State 1":"Background Base",borderRadius:"XLarge"},$.default.createElement(hi,null)),$.default.createElement(n.Box,{marginTop:"Micro Large"},$.default.createElement(n.Button,{size:"large",variant:"primary",fullWidth:!0,"data-uxa-log":"download_qr_code_modal_button","aria-label":s.intl.formatMessage(ai),disabled:!0,autoFocus:!0},s.intl.formatMessage(ni)),$.default.createElement(n.Box,{marginTop:"Micro Large"},$.default.createElement(n.Skeleton.Text,null)," ",$.default.createElement(n.Skeleton.Text,null))))};yi.displayName="GetQrCodeLoading";const Ei=({file:e,user:t,onSettingsClick:i,qrCodeResponse:r})=>{var o,l;const c=n.getFilename$1(e),d=null!==(o=r.qrcode)&&void 0!==o?o:"",u=r.effective_audience,m=$.default.useCallback(((i,r)=>{const o=n.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,s=a.get_browser_info();n.ShareTibEventLogger.log(t.id,i,o,{file_id:e.file_id,fq_path:e.fq_path,is_folder:e.is_dir,browser:s.browser,browser_version:s.version,...r})}),[t.id,e]);$.default.useEffect((()=>{const e=r.link_url;if(e){const t=n.parseLink(e),a=t.doesContainShmodelLink?n.ShareTibEventLogger.get_shmodel_extra_for_logging(void 0,n.getCleanedSharingUrl(t)):n.ShareTibEventLogger.get_scl_extra_for_logging(void 0,n.getCleanedSharingUrl(t)),i={sender_trackey:t.searchParams.get("st"),...a};m(n.TiburonEventName.CreateQrCode,i)}}),[m,r.link_url]);const g="dark"===(null===(l=n.useTheme())||void 0===l?void 0:l.mode),f=(e=>{switch(e){case"public":return ii;case"team":return ri;case"no_one":return si;default:return""}})(u);return $.default.createElement($.default.Fragment,null,$.default.createElement(n.Box,{padding:"Micro XLarge",marginTop:"Micro Small",borderWidth:"1",borderColor:"Border Subtle",borderStyle:"Solid",backgroundColor:g?"Secondary Surface - State 1":"Background Base",borderRadius:"XLarge"},$.default.createElement(pi,{base64QrCode:d})),$.default.createElement(n.Box,{marginTop:"Micro Large"},$.default.createElement(n.Button,{size:"large",variant:"primary",onClick:e=>{e.preventDefault(),((e,t)=>{const n=document.createElement("a");n.href=fi(e),n.download=`${t}_QR.png`,document.body.appendChild(n),n.click(),document.body.removeChild(n)})(d,c)},fullWidth:!0,"data-uxa-log":"download_qr_code_modal_button","aria-label":s.intl.formatMessage(ai),autoFocus:!0},s.intl.formatMessage(ni)),$.default.createElement(n.Box,{marginTop:"Micro Large"},f?$.default.createElement(n.Text,null,s.intl.formatMessage(f)):null,i?$.default.createElement($.default.Fragment,null," ",$.default.createElement(n.Link,{hasNoUnderline:!0,href:"#",onClick:e=>{e.preventDefault(),i()},"data-uxa-log":"settings_qr_code_modal_button"},s.intl.formatMessage(oi))):null)))};Ei.displayName="GetQrCodeLoaded";const bi=e=>{const t=e.user,a=e.onGetQrCodeError,i=(e=>{const t=_i.useQuery({apiArg:{read_path:e}},{staleTime:0});return $.useMemo((()=>t?t.isLoading?{isLoading:!0}:t.isError?{isLoading:!1,isError:!0,error:t.error.appError}:{output:t.data.apiData,isLoading:!1,isError:!1}:{isLoading:!0}),[t])})(e.file.file_id||e.file.fq_path),r=$.default.useRef(!1);return $.default.useEffect((()=>{var e;if(!1===r.current&&!i.isLoading&&(void 0===t||i.isError||void 0===i.output||void 0===i.output.qrcode||""===i.output.qrcode)){r.current=!0;const t=i.isError?null===(e=i.error)||void 0===e?void 0:e[".tag"]:void 0;n.Snackbar.warn(s.intl.formatMessage((e=>{switch(e){case gi.PATH_FORBIDDEN:return li;case gi.PATH_NOT_FOUND:return ci;case gi.EMAIL_NOT_VERIFIED:return di;case gi.SERVICE_UNAVAILABLE:return ui;default:return mi}})(t))),null==a||a()}}),[a,t,i]),i.isLoading?$.default.createElement(yi,null):void 0===t||i.isError||void 0===i.output||void 0===i.output.qrcode||""===i.output.qrcode?null:$.default.createElement(Ei,{...e,user:t,qrCodeResponse:i.output})};bi.displayName="GetQrCodeInner";const vi=e=>{const{user:t,isLoading:a}=n.useActiveUser();return a?$.default.createElement(yi,null):$.default.createElement(bi,{...e,user:t})};vi.displayName="GetQrCode";var wi;!function(e){e.MAIN="main",e.QRCODE="qrcode",e.INBAND="inband",e.MANAGE_ACCESS="manage_access",e.COPY_LINK="copy_link",e.SETTINGS="settings"}(wi||(wi={}));const ki=e=>{const t=$.useRef(null),[a,i]=$.useState(-1);$.useEffect((()=>{e.isOpen&&t.current&&"inband"!==e.currentScreen&&t.current.focus()}),[e.isOpen,e.currentScreen]);const r=e.onEscape,o=$.useCallback((e=>{var n,o,s,l;if(!t.current)return;if("Shift"===e.key)return;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){const t=e.target;t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"true"===t.contentEditable||t.isContentEditable)||(e.preventDefault(),e.nativeEvent.stopImmediatePropagation())}if("Escape"===e.key)return r(e),e.preventDefault(),void e.nativeEvent.stopImmediatePropagation();if("Tab"===e.key){if(e.preventDefault(),(null===(n=document.activeElement)||void 0===n?void 0:n.classList.contains("targets-tokenizer-suggestion"))||(null===(o=document.activeElement)||void 0===o?void 0:o.classList.contains("typeahead-import-contacts")))return void(null===(s=document.getElementById("targets-tokenizer-input-search"))||void 0===s||s.focus());if((null===(l=document.activeElement)||void 0===l?void 0:l.matches("#targets-tokenizer-input-search"))&&null==t.current.querySelector("textarea"))return;const r=t.current.querySelectorAll('button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled])');let c,d=a;for(let e=0;e<r.length;e++){if(r[e]===document.activeElement){d=e;break}}return c=e.shiftKey?(d-1+r.length)%r.length:(d+1)%r.length,r[c].focus(),void i(c)}}),[r,a,i]),s="anchored_v1"===e.displayMode?e.onAnchorInvalid:void 0,l=F("anchored_v1"===e.displayMode?t:null,{threshold:[.99]});$.useLayoutEffect((()=>{l&&!l.isIntersecting&&s&&s()}),[l,null==l?void 0:l.isIntersecting,s]);const d="anchored_v1"===e.displayMode?e.anchorRef:null;if($.useEffect((()=>{if("anchored_v1"!==e.displayMode||!s||null===d)return;const t=d.current;if(!t||"object"!=typeof t||!("nodeType"in t))return;const n=new MutationObserver((e=>{var n,a;for(const i of e)if("childList"===i.type)for(const e of Array.from(i.removedNodes))if(e===t||(null===(a=(n=e).contains)||void 0===a?void 0:a.call(n,t)))return void s()}));return n.observe(document.body,{childList:!0,subtree:!0}),()=>{n.disconnect()}}),[e.displayMode,s,d]),"centered_v1"===e.displayMode)return $.createElement(n.Modal,{open:e.isOpen,width:e.currentScreen===wi.SETTINGS?500:380,onRequestClose:e.onClickOutside,ref:t,isCentered:!0},$.createElement("div",{"data-testid":"shareme24-modal","data-uxa-log":"sm24-modal","data-uxa-interactions":"shown",className:n.cx(c.outerWrapper)},null!==e.header&&$.createElement(n.Modal.Header,{className:c.headerSection},e.header),$.createElement(n.Modal.Body,{className:n.cx(c.modalInnerWrapper,{[c.modalInnerWrapperMainExit]:e.isExitingMainToQr}),onAnimationEnd:e.onOverlayOrModalAnimationEnd},e.children)));if("drawer"===e.displayMode){const t="main"===e.currentScreen,a=t?"auto":"100%";return $.createElement(n.Drawer.ModalDrawer,{onRequestClose:e.onClickOutside,"aria-label":"sm24-drawer",isOpen:e.isOpen,alignment:"bottom",height:a,className:t?c.roundedCorner:void 0,"data-testid":"shareme24-drawer",shouldAnimate:!0,hasScrollLock:e.hasScrollLock},$.createElement("div",{className:n.cx(c.drawerOuterWrapper)},$.createElement(n.Drawer.Container,null,t?$.createElement("div",{className:c.handle}):void 0,$.createElement(n.Drawer.Header,{className:c.drawerHeader},$.createElement(n.Drawer.Layout,null,$.createElement(n.Drawer.LayoutItem,{width:"fill"},$.createElement(n.Drawer.Layout,null,e.header)))),$.createElement(n.Drawer.Body,{className:n.cx(c.modalInnerWrapper,c.drawerBody,{[c.modalInnerWrapperMainExit]:e.isExitingMainToQr}),onAnimationEnd:e.onOverlayOrModalAnimationEnd},e.children))))}return $.createElement(n.ClickOutside,{className:c.clickOutside,isActive:e.isOpen,onClickOutside:e.onClickOutside,shouldClickOutsideWhenDefaultPrevented:!1,"data-uxa-log":"sm24-clickaway","data-uxa-interactions":"click"},$.createElement(n.Overlay,{className:n.cx(c.overlay,{[c.overlayMainExit]:e.isExitingMainToQr}),offsetDistance:e.offsetDistance,anchorRef:e.anchorRef,placement:e.placement,auto:!0,onAnimationEnd:e.onOverlayOrModalAnimationEnd,elementResize:!0},$.createElement("div",{"data-testid":"shareme24-modal",className:n.cx(c.outerWrapper),style:{width:e.currentScreen===wi.SETTINGS?500:380},onKeyDown:o,ref:t,"data-uxa-log":"sm24-modal","data-uxa-interactions":"shown",tabIndex:0},null!==e.header&&$.createElement(n.Modal.Header,{className:c.headerSection},e.header),$.createElement(n.Modal.Body,{className:n.cx(c.modalInnerWrapper,{[c.modalInnerWrapperMainExit]:e.isExitingMainToQr}),onAnimationEnd:e.onOverlayOrModalAnimationEnd},e.children))))};ki.displayName="Wrapper";const Si=({styleName:e,...t})=>$.createElement("div",{className:`${c.buttonRow} ${e}`,"aria-hidden":t.hidden,...t},t.children);Si.displayName="ButtonRow";const Ci=({styleName:e,...t})=>$.createElement("div",{className:`${c.buttonRowButtonWrapper} ${e}`,"aria-hidden":t.hidden,...t},t.children);Ci.displayName="ButtonRowButtonWrapper";const Mi="SHARING_BANNED_MODAL",Ti=e=>{const[a,i]=t.useState(!0),r=s.intl.formatMessage({id:"sHjsEB",defaultMessage:"Couldnt complete share"}),o=s.intl.formatMessage({id:"3Ob1gB",defaultMessage:"Weve interrupted your sharing activity. For details or to contact support, read our <link>help center article.</link>"},{link:e=>$.default.createElement(n.Button,{variant:"transparent",href:n.ABUSE_HELP_ARTICLE_LINK,target:"_blank",hasNoUnderline:!0},e)});return $.default.createElement(n.Modal,{open:a,isCentered:!0,withCloseButton:"Close",onRequestClose:()=>i(!1),onAfterClose:e.onAfterClose,"aria-labelledby":"sharing-banned-modal-title"},$.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},$.default.createElement(n.Modal.Title,{id:"sharing-banned-modal-title"},r)),$.default.createElement(n.Modal.Body,null,o),$.default.createElement(n.Modal.Footer,null))};Ti.displayName="SharingBannedModal";const Di=e=>{(new Image).src=e},Li=e=>({user:{account_id:e.account_id,email:e.email,display_name:e.display_name,same_team:!0,disabled:!1}}),Ii=Symbol("ON_INITIAL_LOAD_START"),Ai=Symbol("ON_INITIAL_LOAD_FAILURE"),xi=Symbol("ON_INITIAL_LOAD_CANCEL"),Pi=Symbol("ON_INITIAL_LOAD_SUCCESS"),Ni=Symbol("ON_FOLDER_ALREADY_SHARED"),$i=Symbol("ON_TEST_INITIAL_LOAD_START"),Oi=Symbol("ON_TEST_INITIAL_LOAD_SUCCESS"),Ri=Symbol("ON_TEST_INITIAL_LOAD_CANCEL"),Ui=Symbol("ON_TEST_INITIAL_LOAD_FAILURE"),Fi=Symbol("ON_TEST_REFRESH_LOAD_START"),Bi=Symbol("ON_TEST_REFRESH_LOAD_SUCCESS"),ji=Symbol("ON_TEST_REFRESH_LOAD_CANCEL"),Hi=Symbol("ON_TEST_REFRESH_LOAD_FAILURE"),qi=Symbol("ON_DOUBLE_READ_DIFF"),{useEmitter:Vi,defaultEmitter:Wi}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o=t(u.Context),s={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},l={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key!==Ii){if(e.key===Ai){let t="none";if("response"in e.payload.error)try{const n=e.payload.error.response.error;".tag"in n&&(t=n[".tag"]||"none")}catch(e){t="loggingFailure"}const a={...s,errorType:e.payload.error.type,errorTag:t,objMetadataNewApiVariant:e.payload.objMetadataNewApiVariant};return n.UDCL.logEnd(n.PAP_Load_ShareModal({eventState:"failed",...l}),{key:o,tags:a}),void n.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"failed",key:o,tags:a})}if(e.key===xi){const t={...s,objMetadataNewApiVariant:e.payload.objMetadataNewApiVariant};return n.UDCL.logEnd(n.PAP_Load_ShareModal({eventState:"canceled",...l}),{eventState:"canceled",key:o,tags:t}),void n.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"canceled",key:o,tags:t})}if(e.key===Pi){const t={...s,objMetadataNewApiVariant:e.payload.objMetadataNewApiVariant};return n.UDCL.logEnd(n.PAP_Load_ShareModal({eventState:"success",...l}),{key:o,tags:t}),void n.UDCL.logEnd("ops.sm24.initial_data_load",{eventState:"success",key:o,tags:t})}if(e.key!==Ni)if(e.key!==$i)if(e.key!==Oi)if(e.key!==Ri)if(e.key!==Ui)if(e.key!==Fi)if(e.key!==Bi)if(e.key!==ji)if(e.key!==Hi){if(e.key===qi){const t=e.payload.diffs.reduce(((e,t)=>({...e,[`diff_${t.field}`]:"true"})),{});n.UDCL.logEvent("ops.sm24.double_read_diff",{tags:t,detail:{fileId:e.payload.fileId,diffs:e.payload.diffs}})}}else{let t="none";if("response"in e.payload.error)try{const n=e.payload.error.response;".tag"in n&&(t=n[".tag"]||"none")}catch(e){t="loggingFailure"}n.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"failed",key:o,tags:{...s,errorType:e.payload.error.type,errorTag:t}})}else n.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"canceled",key:o,tags:s});else n.UDCL.logEnd("ops.sm24.test_refresh_data_load",{eventState:"success",key:o,tags:s});else n.UDCL.logStart("ops.sm24.test_refresh_data_load",{key:o,tags:s});else{let t="none";if("response"in e.payload.error)try{const n=e.payload.error.response;".tag"in n&&(t=n[".tag"]||"none")}catch(e){t="loggingFailure"}n.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"failed",key:o,tags:{...s,errorType:e.payload.error.type,errorTag:t}})}else n.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"canceled",key:o,tags:s});else n.UDCL.logEnd("ops.sm24.test_initial_data_load",{eventState:"success",key:o,tags:s});else n.UDCL.logStart("ops.sm24.test_initial_data_load",{key:o,tags:s});else n.UDCL.logEvent("ops.sm24.already_shared",{tags:s})}else{const t={...s,objMetadataNewApiVariant:e.payload.objMetadataNewApiVariant};n.UDCL.logStart("ops.sm24.initial_data_load",{key:o,tags:t})}})),Yi=e=>{const t=Vi(),{isNonUserRelativeContext:a}=n.useSharingApiContext();return $.useCallback((async()=>{const i=e.$nonce.get(),r=e.$options.get(),o=e.$state.get();let s=r.objectIdentifier;"loaded"===o.status&&(s=o.objectIdentifier);const c=r.objMetadataNewApiVariant,d="V1"===c&&s.fileId,u=!d,m="ON"===c&&s.fileId;t.select(Ii).emit({objMetadataNewApiVariant:c});const g=n=>{e.$state.set({status:"error",errorType:"INITIAL_LOAD_ERROR",loadError:n}),t.select(Ai).emit({error:n,objMetadataNewApiVariant:c})},p=await n.getSharingApiv2ResponseWithErrors(n.sharingPrefsPackage.fetchQuery(l.queryClient,{})),h=await n.getSharingApiv2ResponseWithErrors(n.sharingAccountInfoPackage.fetchQuery(l.queryClient,{},{staleTime:18e5}));let _,y,E,b;if(d?y=await n.getSharingApiv2ResponseWithErrors(n.sharingObjectMetadataPackage.fetchQuery(l.queryClient,{apiArg:{file_id:s.fileId},pkgArg:{isNonUserRelativeContext:a}},{staleTime:3e5})):_=await l.queryClient.fetchQuery(["object-metadata",r.objectIdentifier],(()=>n.getSharingObjectMetadata(s,a))),m&&(t.select($i).emit(null),E=await n.getSharingApiv2ResponseWithErrors(n.sharingObjectMetadataPackage.fetchQuery(l.queryClient,{apiArg:{file_id:s.fileId},pkgArg:{isNonUserRelativeContext:a}},{staleTime:3e5})),"SUCCESS"===E.status?t.select(Oi).emit(null):"ERROR"===E.status?t.select(Ui).emit({error:{type:"METADATA_ERROR_V2",response:E.error}}):t.select(Ui).emit({error:{type:"METADATA_FATAL_V2",response:{status:n.Status$1.FATAL,error:E}}})),i!==e.$nonce.get())return t.select(xi).emit({objMetadataNewApiVariant:c}),void(m&&t.select(Ri).emit(null));if(u){if(!_)return void g({type:"OTHER"});if("SUCCESS"!==_.status)return void("ERROR"===_.status?(f.reportStack("SM24 initial data loader error",{severity:f.SEVERITY.NONCRITICAL,tags:["sm24_initial_data_loader_error_V1"],exc_extra:{file_id:s.fileId,error:_},silent:!1}),g({type:"METADATA_ERROR",response:_})):(f.reportStack("SM24 initial data loader error",{severity:f.SEVERITY.NONCRITICAL,tags:["sm24_initial_data_loader_fatal_V1"],exc_extra:{file_id:s.fileId,error:_},silent:!1}),g({type:"METADATA_FATAL",response:_})));b=_.output}else{if(!y)return void g({type:"OTHER"});if("SUCCESS"!==y.status)return void("ERROR"===y.status?(f.reportStack("SM24 initial data loader error",{severity:f.SEVERITY.NONCRITICAL,tags:["sm24_initial_data_loader_error_V2"],exc_extra:{file_id:s.fileId,error:y},silent:!1}),g({type:"METADATA_ERROR_V2",response:y})):(f.reportStack("SM24 initial data loader error",{severity:f.SEVERITY.NONCRITICAL,tags:["sm24_initial_data_loader_fatal_V2"],exc_extra:{file_id:s.fileId,error:y},silent:!1}),g({type:"METADATA_FATAL_V2",response:y})));b=y.output}if(m&&"SUCCESS"===(null==E?void 0:E.status)){const e=n.normalizeNewApiMetadata(E.output),a=n.normalizeOldApiMetadata(b),{redactedDiffs:i,originalDiffs:r}=n.diffNormalizedMetadata(a,e);if(i.length>0){const e=E.output.common_metadata.file_id;if(t.select(qi).emit({fileId:e,diffs:i}),r.length>0){const t=["sm24_metadata_diff",...r.map((e=>e.field)).map((e=>`diff_field_${e}`))];f.reportStack("SM24 metadata diff found",{severity:f.SEVERITY.NONCRITICAL,tags:t,exc_extra:{file_id:e,original_diffs:r},silent:!0})}}}if("SUCCESS"!==h.status||"SUCCESS"!==p.status)return void("SUCCESS"!==p.status?"ERROR"===p.status?g({type:"SHARING_PREFS_ERROR",response:p}):g({type:"SHARING_PREFS_FATAL",response:p}):"SUCCESS"!==h.status?g({type:"SHARING_ACCOUNT_INFO_ERROR"}):g({type:"OTHER"}));let v=s;"file_folder"===s[".tag"]&&n.getIsSharedFolder(b)&&(v={".tag":"shared_folder",sharedFolderId:n.getSharedFolderId(b),fileId:s.fileId}),e.$state.set({status:"loaded",objectIdentifier:v,memberActionsInProgress:{},memberAccountIdsAlreadyFetched:{},accountMetadata:h.output,memberAccounts:{},objectMetadata:b,sharingPrefs:p.output}),t.select(Pi).emit({objMetadataNewApiVariant:c})}),[e,t])},Gi=e=>{const t=(e=>$.useCallback((t=>{(e.$options.get().onRefreshError||(()=>{}))(t)}),[e]))(e),{isNonUserRelativeContext:a}=n.useSharingApiContext(),i=Vi();return $.useCallback((async()=>{const r=e.$state.get();if("loaded"!==r.status)return;const o=e.$nonce.get(),s=e.$state.get(),c=e.$options.get().objMetadataNewApiVariant,d="V1"===c&&r.objectIdentifier.fileId,u=!d,m="ON"===c&&r.objectIdentifier.fileId;let g,f,p,h;if(d?f=await n.getSharingApiv2ResponseWithErrors(n.sharingObjectMetadataPackage.fetchQuery(l.queryClient,{apiArg:{file_id:r.objectIdentifier.fileId},pkgArg:{isNonUserRelativeContext:a}},{staleTime:3e5})):g=await n.getSharingObjectMetadata(r.objectIdentifier,a),m&&(i.select(Fi).emit(null),p=await n.getSharingApiv2ResponseWithErrors(n.sharingObjectMetadataPackage.fetchQuery(l.queryClient,{apiArg:{file_id:r.objectIdentifier.fileId},pkgArg:{isNonUserRelativeContext:a}},{staleTime:3e5})),"SUCCESS"===p.status?i.select(Bi).emit(null):"ERROR"===p.status?i.select(Hi).emit({error:{type:"METADATA_ERROR_V2",response:p.error}}):i.select(Hi).emit({error:{type:"METADATA_FATAL_V2",response:{status:n.Status$1.FATAL,error:p}}})),e.$nonce.get()!==o||"loaded"!==s.status)return null;if(u){if(!g)return void t({type:"OTHER"});if("ERROR"===g.status)return t({type:"METADATA_ERROR",response:g}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"METADATA_ERROR",response:g}});if("FATAL"===g.status)return t({type:"FATAL",response:g}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"FATAL",response:g}});h=g.output}else{if(!f)return void t({type:"OTHER"});if("ERROR"===f.status)return t({type:"METADATA_ERROR_V2",response:f}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"METADATA_ERROR_V2",response:f}});if("FATAL"===f.status)return t({type:"FATAL",response:f}),void e.$state.set({status:"error",errorType:"REFRESH_LOAD_ERROR",loadError:{type:"FATAL",response:f}});h=f.output}let _=s.objectIdentifier;return"file_folder"===s.objectIdentifier[".tag"]&&n.getIsSharedFolder(h)&&(_={".tag":"shared_folder",sharedFolderId:n.getSharedFolderId(h),fileId:s.objectIdentifier.fileId}),e.$state.set({...s,objectMetadata:h,objectIdentifier:_}),null}),[e,t,i])},zi=e=>{const t=Yi(e),{variant:a,isLoading:i}=n.useExperimentVariant("sm24_obj_metadata_new_api"),r=!i,[o,s]=$.useState(null);$.useEffect((()=>{const i=null===(l=e.$options.get()).sessionId?null:"file"===l.objectIdentifier[".tag"]?`file:${l.sessionId}:${n.getContentIdOrPathFromObjectIdentifier(l.objectIdentifier)}`:"file_folder"===l.objectIdentifier[".tag"]?`folder:${l.sessionId}:${n.getContentIdOrPathFromObjectIdentifier(l.objectIdentifier)}`:`shared_folder:${l.sessionId}:${n.getContentIdOrPathFromObjectIdentifier(l.objectIdentifier)}`;var l;if(null===i)return null!==o&&s(null),void("unloaded"!==e.$state.get().status&&m.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"unloaded"})})));r&&(i===o&&"unloaded"!==e.$state.get().status||(m.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"loading"})})),s(i),e.$options.set({...e.$options.get(),objMetadataNewApiVariant:a}),n.logExposure({feature:"sm24_obj_metadata_new_api",variant:a}),t()))}))},Ki=e=>{const t=e.$state.get(),{user:a,isLoading:i}=n.useActiveUser(),r="loaded"===t.status&&!n.getIsLinkOnlyMode(t.objectMetadata)&&(n.getCanInvite(t.objectMetadata,u.VIEWER)||n.getCanInvite(t.objectMetadata,u.EDITOR)),o=e.$options.get().objectIdentifier;$.useEffect((()=>{r&&!i&&a&&(async(e,t)=>{"file_folder"===t[".tag"]&&n.prefetchFolderSharingObjectMetadata(t.path),n.prefetchListObjectMembersData(t),g.prefetchListSharedLinks(t),"file"===t[".tag"]&&n.prefetchSeenStateInfoData(t.fileId);const a=await n.fetchObjectMembers(t,!0);if(a){const{groups:t,users:n,invitees:i}={...a};0===n.length&&0===t.length&&0===i.length&&e&&(a.users=[Li(e)]);const r=a.users.map((e=>e.user.account_id)),o=await g.getAccountBatch(r);if("SUCCESS"===o.status){const t=Object.values(o.output),n=t.find((t=>t.account_id===(null==e?void 0:e.account_id)));(null==n?void 0:n.profile_photo_url)&&Di(n.profile_photo_url),t.slice(0,2).forEach((e=>{e.profile_photo_url&&Di(e.profile_photo_url)}))}}})(a,o)}),[r,i,a,o])},Qi=e=>{const t=Gi(e),n=Yi(e),a=(e=>$.useCallback((t=>{const n=e.$state.get();"loaded"===n.status&&e.$state.set({...n,objectIdentifier:t})}),[e]))(e),i=m.useStore(e.$state);return $.useMemo((()=>({...i,refreshObjectMetadata:t,refreshModal:n,onObjectIdentifierChanged:a})),[i,t,n,a])},Xi=e=>{const t=(e=>m.useInitStore(e,(()=>({$nonce:m.store(0),$options:m.store(e),$state:m.store({status:"unloaded"})}))))(e);return zi(t),Ki(t),(e=>{$.useEffect((()=>()=>{m.batch((()=>{e.$nonce.set(e.$nonce.get()+1),e.$state.set({status:"unloaded"})}))}),[])})(t),Qi(t)},Zi=({children:e,...t})=>{const n=Xi(t);return $.createElement(l.QueryClientProvider,{client:l.queryClient},$.createElement($.Fragment,null,e(n)))};Zi.displayName="ShareModalDataLoader";const Ji=$.createContext({status:"unloaded"}),er=({children:e,...t})=>$.createElement(Zi,{...t},(t=>$.createElement(Ji.Provider,{value:t},e)));er.displayName="Provider";const tr=()=>$.useContext(Ji),nr=Symbol("ON_CLICK_PROGRESSIVE"),ar=Symbol("ON_MOUSE_ENTER_PROGRESSIVE"),ir=Symbol("ON_MOUSE_LEAVE_PROGRESSIVE"),{useEmitter:rr,defaultEmitter:or}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===nr)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"copy_link"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"copy_link"}});if(e.key!==ar){if(e.key!==ir)return n.exhausts(e,void 0);n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"copy_link"}})}else n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"copy_link"}),{tags:{...o,action:"copy_link"}})})),sr=e=>{const{objectMetadata:t,accountMetadata:a,onCopyLinkButtonClicked:i,componentViewTime:r}=e,o=n.isNewApiMetadata(t),[l,c]=$.useState(!1),[d,m]=$.useState(!1),[g,f]=$.useState(0),p=$.useRef(null),_=rr(),y=u.isTmrMember(a),E=n.getCanCreateLink(t,n.VIEWER,y),b=n.getCanCreateLink(t,n.EDITOR,y)||E,v=$.useCallback((()=>{const e=d?Date.now()-g:void 0,t=Date.now()-r;_.select(nr).emit({dwellTime:e,timeSinceView:t}),i()}),[r,_,d,i,g]),w=$.useCallback((()=>{f(Date.now()),m(!0),_.select(ar).emit(null),c(!0)}),[_]),k=$.useCallback((()=>{const e=d?Date.now()-g:void 0;m(!1),_.select(ir).emit({dwellTime:e}),c(!1)}),[_,d,g]),S=$.useMemo((()=>!!o&&!b),[o,b]);return $.createElement($.Fragment,null,$.createElement(h.ButtonWrapper,{ref:p,onMouseEnter:w,onMouseLeave:k,"data-uxa-log":"sharing-lego-copy_link-button.loaded","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{onClick:v,disabled:S,"data-testid":"copy-link-entry-button"},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:n.LinkLine,size:"medium","data-testid":"copy-link-entry-button-icon"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(h.ButtonTitle,{content:(C=s.intl,C.formatMessage({id:"1xxmJZ",defaultMessage:"Copy link"}))})))),(()=>{let e=null;return o&&!b&&(e=$.createElement(n.Text,null,s.intl.formatMessage({id:"wVml0u",defaultMessage:"You dont have permission to copy this link."}))),e?$.createElement(n.Tooltip.Control,{open:l,placement:"top",auto:!0,triggerRef:p,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e):null})());var C};sr.displayName="CopyLinkEntryButtonInner";const lr=e=>{const{objectIdentifier:t,onCopyLinkButtonClicked:a,componentViewTime:i}=e,r=n.useSharingObjectMetadata(t.fileId),o=u.useSharingAccountInfo(),s=r.isLoading,l=!r.isLoading&&r.isError,c=s||l?void 0:r.output,d=o.isLoading,m=!o.isLoading&&o.isError,g=d||m?void 0:o.output;return s||d?$.createElement(h.ButtonWrapper,{"data-uxa-log":"sharing-lego-copy-link-button.loading","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{disabled:!0},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:n.LinkLine,size:"medium"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(n.Skeleton.Text,{size:"small",style:{marginTop:22}})))):c&&g?$.createElement(sr,{accountMetadata:g,objectMetadata:c,onCopyLinkButtonClicked:a,componentViewTime:i}):null};lr.displayName="CopyLinkEntryButton";const cr=Symbol("ON_CLICK"),dr=Symbol("ON_MOUSE_ENTER"),ur=Symbol("ON_MOUSE_LEAVE"),{useEmitter:mr,defaultEmitter:gr}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===cr)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"copy_link"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"copy_link"}});e.key!==dr?e.key!==ur||n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"copy_link",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"copy_link"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"copy_link"}),{tags:{...o,action:"copy_link"}})})),fr=({store:e,objectMetadata:t})=>{const a=!!t&&n.isNewApiMetadata(t),[i,r]=$.useState(!1),o=$.useRef(null),l=mr(),c=!!t&&n.getCanCreateLink(t,n.VIEWER,!1),d=!!t&&n.getCanCreateLink(t,n.EDITOR,!1),u=c||d,m=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();l.select(cr).emit({dwellTime:t,timeSinceView:n}),e.$isHovered.set(!1),e.$props.get().onClickCopyLinkButton()}),[l,e]),g=$.useCallback((()=>{l.select(dr).emit(null),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now()),r(!0)}),[l,e]),f=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;l.select(ur).emit({dwellTime:t}),e.$isHovered.set(!1),e.$hoverStartTime.set(0),r(!1)}),[l,e]);$.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]);const p=!!a&&!u;return $.createElement($.Fragment,null,$.createElement(h.ButtonWrapper,{ref:o,onMouseEnter:g,onMouseLeave:f,"data-uxa-log":"sm24-copy_link-button.loaded","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{onClick:m,disabled:p,"data-testid":"copy-link-button"},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:n.LinkLine,size:"medium","data-testid":"copy-link-icon"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(h.ButtonTitle,{content:(_=s.intl,_.formatMessage({id:"1xxmJZ",defaultMessage:"Copy link"}))})))),(()=>{let e=null;return a&&!u&&(e=$.createElement(n.Text,null,s.intl.formatMessage({id:"wVml0u",defaultMessage:"You dont have permission to copy this link."}))),e?$.createElement(n.Tooltip.Control,{open:i,placement:"top",auto:!0,triggerRef:o,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},e):null})());var _};fr.displayName="LoadedButton";const pr=()=>$.createElement(h.ButtonWrapper,{"data-uxa-log":"sm24-copy-link-button.loading","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{disabled:!0},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:n.LinkLine,size:"medium"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(n.Skeleton.Text,{size:"small",style:{marginTop:22}}))));pr.displayName="LoadingButton";const hr=({store:e})=>{const{variant:t,isLoading:a}=n.useExperimentVariant("sm24_obj_metadata_new_api"),i=tr();return a||"V1"===t&&"loading"===i.status?$.createElement(pr,null):"V1"===t&&"error"===i.status?null:"V1"===t&&"loaded"===i.status?$.createElement(fr,{store:e,objectMetadata:i.objectMetadata}):$.createElement(fr,{store:e})};hr.displayName="Inner";const _r=e=>{const t=(e=>m.useInitStore(e,(e=>({$props:e,$isHovered:m.store(!1),$hoverStartTime:m.store(0),$componentViewTime:m.store(0)}))))(e);return $.createElement(hr,{store:t})};var yr;_r.displayName="CopyLinkButton",function(e){e.MAIN="main",e.QRCODE="qrcode",e.INBAND="inband",e.MANAGE_ACCESS="manage_access",e.COPY_LINK="copy_link",e.SETTINGS="settings"}(yr||(yr={}));const Er=({store:e})=>{const{objectIdentifier:t}=m.useStore(e.$props),a=m.useStore(e.$componentViewTime),{variant:i,isLoading:r}=n.useExperimentVariant("sm24_progressive_oob_m1"),o=$.useCallback((()=>{m.batch((()=>{e.$props.get().copyLinkHandler(),e.$props.get().onActionClicked(!0)}))}),[e]),s=u.usePlatform()===u.Platforms.METASERVER,l=$.useCallback((()=>{let t=()=>{};const n=new Promise((e=>{t=e}));if("undefined"!=typeof ClipboardItem&&navigator.clipboard.write){const e=new ClipboardItem({"text/plain":n});navigator.clipboard.write([e])}else n.then((e=>navigator.clipboard.writeText(e)));const a={write:e=>t(e)};s?(e.$clipboardWriter.set(a),e.$isClickawayLocked.set(!0),p.showOQModalOrContinue({action:"share_link",continueCallback:()=>{m.batch((()=>{e.$currentScreen.set(yr.COPY_LINK),e.$isClickawayLocked.set(!1)}))},abortCallback:()=>{e.$isClickawayLocked.set(!1)}})):m.batch((()=>{e.$clipboardWriter.set(a),e.$currentScreen.set(yr.COPY_LINK)}))}),[e,s]);return $.useMemo((()=>(n.logExposure({feature:"sm24_progressive_oob_m1",variant:i}),!r&&"V1"===i)),[i,r])?$.createElement(lr,{onCopyLinkButtonClicked:l,objectIdentifier:t,componentViewTime:a}):$.createElement(_r,{onClickCopyLinkButton:o,objectIdentifier:t})};Er.displayName="CopyLinkButton";const br=e=>e.formatMessage({id:"JoKNtB",defaultMessage:"Share with stacks"}),vr=e=>e.formatMessage({id:"Sk39rj",defaultMessage:"New"}),wr=Symbol("ON_CLICK"),kr=Symbol("ON_MOUSE_ENTER"),Sr=Symbol("ON_MOUSE_LEAVE"),{useEmitter:Cr,defaultEmitter:Mr}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===wr)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"stack",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"stack"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"stack",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"stack"}});e.key!==kr?e.key!==Sr||n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"stack",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"stack"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"stack"}),{tags:{...o,action:"stack"}})})),Tr="stack-button",Dr="stack-icon",Lr=({store:e,showStackNewFeatureBadge:t,user:a})=>{const i=Cr(),r=$.default.useCallback((()=>{const r=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,o=Date.now()-e.$componentViewTime.get();i.select(wr).emit({dwellTime:r,timeSinceView:o}),e.$isHovered.set(!1),t&&n.setUserMetadata({FSS_STACKS_SM24_SEEN:!0},a),e.$props.get().onClickStackButton()}),[a,e,i,t]),o=$.default.useCallback((()=>{i.select(kr).emit(null),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,i]),l=$.default.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;i.select(Sr).emit({dwellTime:t}),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,i]);return $.default.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),$.default.createElement($.default.Fragment,null,$.default.createElement(h.ButtonWrapper,{onMouseEnter:o,onMouseLeave:l,"data-uxa-log":"sm24-stack-button.loaded","data-uxa-interactions":"shown click"},$.default.createElement(h.HorizontalButton,{"data-testid":Tr,onClick:r},$.default.createElement(h.ButtonIconContainer,null,$.default.createElement(n.UIIcon,{src:_.CreateStackLine,size:"medium","data-testid":Dr})),$.default.createElement(h.ButtonInnerRow,null,$.default.createElement(h.ButtonTitle,{content:br(s.intl)}),t&&$.default.createElement(n.Box,{style:{height:"var(--dig-spacing__macro__small)"},color:"Identity On Yellow",borderRadius:"Small",backgroundColor:"Identity Yellow",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Action",fontSize:"Action Small",fontWeight:"Strong",letterSpacing:"Action",paddingLeft:"10",paddingRight:"10","data-testid":"stack-new-feature-badge","aria-label":vr(s.intl)},vr(s.intl))))))};Lr.displayName="StackButton";const Ir=({store:e})=>{const t=Cr(),{isFolderFileCountOverLimit:a}=m.useStore(e.$props),[i,r]=$.default.useState(!1),o=$.default.useRef(null),l=$.default.useCallback((()=>{t.select(kr).emit(null),r(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,t]),c=$.default.useCallback((()=>{const n=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(Sr).emit({dwellTime:n}),r(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,t]);return $.default.createElement($.default.Fragment,null,$.default.createElement(h.ButtonWrapper,{ref:o,onMouseEnter:l,onMouseLeave:c,"data-uxa-log":"sm24-stack-button.disabled","data-uxa-interactions":"shown click"},$.default.createElement(h.HorizontalButton,{disabled:!0,"data-testid":Tr},$.default.createElement(h.ButtonIconContainer,null,$.default.createElement(n.UIIcon,{src:_.CreateStackLine,size:"medium","data-testid":Dr})),$.default.createElement(h.ButtonInnerColumn,null,$.default.createElement(h.ButtonTitle,{content:br(s.intl)})))),a&&$.default.createElement(n.Tooltip.Control,{open:i,placement:"left",auto:!0,triggerRef:o,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},$.default.createElement(n.Text,null,s.intl.formatMessage({id:"HVfk/B",defaultMessage:"Cant add more than 200 files to a stack at a time"}))))};Ir.displayName="StackButtonDisabled";const Ar=()=>$.default.createElement(h.ButtonWrapper,{"data-uxa-log":"sm24-stack-button.loading","data-uxa-interactions":"shown click"},$.default.createElement(h.HorizontalButton,{disabled:!0,"data-testid":Tr},$.default.createElement(n.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),$.default.createElement(n.Skeleton.Text,{size:"large",width:200})));Ar.displayName="LoadingButton";const xr=({store:e})=>{const{isFolderFileCountOverLimit:a,contents:i}=m.useStore(e.$props),r=n.mustGetActiveUserApiV2Properties(),[o,s]=t.useState(null);return t.useEffect((()=>{n.getUserMetadata(["FSS_STACKS_SM24_SEEN"],r).then((e=>{s(!e.FSS_STACKS_SM24_SEEN)}))}),[r]),null===o?$.default.createElement(Ar,null):i?$.default.createElement(Lr,{store:e,showStackNewFeatureBadge:o,user:r}):null===a?$.default.createElement(Ar,null):$.default.createElement(Ir,{store:e})};xr.displayName="Inner";const Pr=e=>{const t=(e=>{const t=tr(),n=m.useInitStore(t,(e=>e));return m.useInitStore(e,(e=>{const t=m.store(!1),a=m.store(0),i=m.store(0);return{$props:e,$data:n,$isHovered:t,$hoverStartTime:a,$componentViewTime:i}}))})(e);return $.default.createElement(xr,{store:t})};Pr.displayName="StacksButton";const Nr=({store:e})=>{const t=$.useCallback((()=>{e.$props.get().createStackHandler(),e.$props.get().onActionClicked()}),[e]),n=m.useStore(e.$isFolderFileCountOverLimit),a=m.useStore(e.$contents);return $.createElement(Pr,{onClickStackButton:t,isFolderFileCountOverLimit:n,contents:a})};Nr.displayName="DashStacksButton";const $r=({store:e})=>{const{objectIdentifier:t}=m.useStore(e.$props),n=m.useStore(e.$componentViewTime),a=u.usePlatform()===u.Platforms.METASERVER,i=$.useCallback((()=>{m.batch((()=>{e.$isEnteringInband.set(!0),e.$currentScreen.set(yr.INBAND),e.$isInbandStarted.set(!0)}))}),[e]);return $.createElement(g.InbandEntryButton,{oid:t,onInbandButtonClicked:()=>{a?(e.$isInterstitialVisible.set(!0),p.showOQModalOrContinue({show:p.Show.WarningOnly,action:"share_add_people",continueCallback:()=>{i(),e.$isInterstitialVisible.set(!1)},abortCallback:()=>e.$isInterstitialVisible.set(!1)})):i()},componentViewTime:n})};$r.displayName="InbandInviteButton";const Or=e=>e.formatMessage({id:"O6jjXZ",defaultMessage:"Create a view-only QR code"}),Rr=Symbol("ON_CLICK"),Ur=Symbol("ON_MOUSE_ENTER"),Fr=Symbol("ON_MOUSE_LEAVE"),{useEmitter:Br,defaultEmitter:jr}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===Rr)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"qr_code"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"qr_code"}});e.key!==Ur?e.key!==Fr||n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"qr_code",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"qr_code"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"qr_code"}),{tags:{...o,action:"qr_code"}})})),Hr=({store:e})=>{const[t,a]=$.useState(!1),i=$.useRef(null),r=Br(),o=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();r.select(Rr).emit({dwellTime:t,timeSinceView:n}),e.$isHovered.set(!1),e.$props.get().onClickQrCodeButton()}),[e,r]),l=$.useCallback((()=>{r.select(Ur).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,r]),c=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;r.select(Fr).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,r]);return $.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),$.createElement($.Fragment,null,$.createElement(h.UtilityIconButton,{"data-testid":"qr-code-button",onClick:o,onMouseEnter:l,onMouseLeave:c,ref:i,variant:e.$props.get().buttonVariant,"data-uxa-log":"sm24-qrcode-button.loaded","data-uxa-interactions":"shown click"},$.createElement(n.UIIcon,{src:_.QrCodeLine,"aria-label":Or(s.intl)})),$.createElement(n.Tooltip.Control,{open:t,placement:"top",auto:!0,triggerRef:i,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},$.createElement(n.Text,null,Or(s.intl))))};Hr.displayName="LoadedButton";const qr=({store:e})=>$.createElement(Hr,{store:e});qr.displayName="Inner";const Vr=e=>{const t=(e=>{const t=tr(),n=m.useInitStore(t,(e=>e));return m.useInitStore(e,(e=>{const t=m.store(!1),a=m.store(0),i=m.store(0);return{$props:e,$data:n,$isHovered:t,$hoverStartTime:a,$componentViewTime:i}}))})(e);return $.createElement(qr,{store:t})};Vr.displayName="QrCodeButton";const Wr=({store:e,buttonVariant:t,onRequestClose:n})=>{const a=u.usePlatform()===u.Platforms.METASERVER,i=$.useCallback((()=>{m.batch((()=>{e.$isExitingMainToQr.set(!0),e.$isEnteringQr.set(!0)}))}),[e.$isExitingMainToQr,e.$isEnteringQr]),r=$.useCallback((()=>{a?(e.$isInterstitialVisible.set(!0),p.showOQModalOrContinue({action:"share_qr_code",continueCallback:()=>{i(),e.$isInterstitialVisible.set(!1)},abortCallback:()=>{n(),e.$isInterstitialVisible.set(!1)}})):i()}),[a,i,n,e.$isInterstitialVisible]);return $.createElement(Vr,{onClickQrCodeButton:r,buttonVariant:t})};Wr.displayName="QrCodeButton";const Yr=e=>e.formatMessage({id:"8sEPDx",defaultMessage:"Settings"}),Gr=Symbol("ON_CLICK"),zr=Symbol("ON_MOUSE_ENTER"),Kr=Symbol("ON_MOUSE_LEAVE"),{useEmitter:Qr,defaultEmitter:Xr}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===Gr)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"settings"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"settings"}});e.key!==zr?e.key!==Kr||n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"settings",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"settings"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"settings"}),{tags:{...o,action:"settings"}})})),Zr=({store:e})=>{const[t,a]=$.useState(!1),i=$.useRef(null),r=Qr(),o=$.useCallback((()=>{const t=e.$data.get(),a=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,i=Date.now()-e.$componentViewTime.get();r.select(Gr).emit({dwellTime:a,timeSinceView:i}),e.$isHovered.set(!1);let o=!1;"loaded"!==t.status||n.isNewApiMetadata(t.objectMetadata)?"loaded"===t.status&&n.isNewApiMetadata(t.objectMetadata)&&(o=!n.getCanInvite(t.objectMetadata,u.VIEWER)&&!n.getCanInvite(t.objectMetadata,u.EDITOR)):o=n.getIsLinkOnlyMode(t.objectMetadata),e.$props.get().onClickSettingsButton({shouldOpenLinkSettings:o})}),[e,r]),l=$.useCallback((()=>{r.select(zr).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,r]),c=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;r.select(Kr).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,r]);return $.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),$.createElement($.Fragment,null,$.createElement(h.UtilityIconButton,{"data-testid":"settings-button",onClick:o,onMouseEnter:l,onMouseLeave:c,ref:i,variant:e.$props.get().buttonVariant,"data-uxa-log":"sm24-settings-button.loaded","data-uxa-interactions":"shown click","data-campaign-element-id":"share-modal-settings-button"},$.createElement(n.UIIcon,{src:y.SettingsLine,"aria-label":Yr(s.intl)})),$.createElement(n.Tooltip.Control,{open:t,placement:"top",auto:!0,triggerRef:i,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},$.createElement(n.Text,null,Yr(s.intl))))};Zr.displayName="LoadedButton";const Jr=({store:e})=>$.createElement(Zr,{store:e});Jr.displayName="Inner";const eo=e=>{const t=(e=>{const t=tr(),n=m.useInitStore(t,(e=>e));return m.useInitStore(e,(e=>{const t=m.store(!1),a=m.store(0),i=m.store(0);return{$props:e,$data:n,$isHovered:t,$hoverStartTime:a,$componentViewTime:i}}))})(e);return $.createElement(Jr,{store:t})};eo.displayName="SettingsButton";const to=({store:e,buttonVariant:t})=>{const n=m.useStore(e.$objectIdentifier),a=$.useCallback((t=>{const n=e.$props.get();"integrated_v1"!==n.settingsMode?(n.onActionClicked(),n.settingsHandler(t)):e.$currentScreen.set(yr.SETTINGS)}),[e]);return $.createElement(eo,{onClickSettingsButton:a,objectIdentifier:n,buttonVariant:t})};to.displayName="SettingsButton";const no=e=>e.formatMessage({id:"FuFURj",defaultMessage:"Transfer a copy"}),ao=Symbol("ON_CLICK"),io=Symbol("ON_CLICK_ENABLE_TRANSFER"),ro=Symbol("ON_MOUSE_ENTER"),oo=Symbol("ON_MOUSE_LEAVE"),{useEmitter:so,defaultEmitter:lo}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===ao)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"transfer"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"transfer"}});e.key!==ro?e.key!==oo?e.key!==io||n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"enable_transfer_tooltip"}),{tags:{...o,action:"transfer"}}):n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"transfer",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"transfer"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"transfer"}),{tags:{...o,action:"transfer"}})})),co=({store:e})=>{const t=so(),a=$.useCallback((()=>{const n=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,a=Date.now()-e.$componentViewTime.get();t.select(ao).emit({dwellTime:n,timeSinceView:a}),e.$isHovered.set(!1),e.$props.get().onClickTransferButton()}),[e,t]),i=$.useCallback((()=>{t.select(ro).emit(null),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,t]),r=$.useCallback((()=>{const n=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(oo).emit({dwellTime:n}),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,t]);return $.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]),$.createElement($.Fragment,null,$.createElement(h.ButtonWrapper,{onMouseEnter:i,onMouseLeave:r,"data-uxa-log":"sm24-transfer-button.loaded","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{"data-testid":"transfer-button",onClick:a},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:E.DropboxTransferLine,size:"medium"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(h.ButtonTitle,{content:no(s.intl)})))))};co.displayName="ChonkyBoiiLoadedButton";const uo=({store:e})=>{const t=so(),a=u.useOpenUrl(),[i,r]=$.useState(!1),o=$.useRef(null),{canUserUseTransfer:l,canContentUseTransfer:c,canUserEnableTransfer:d}=m.useStore(e.$props),g=$.useCallback((()=>{t.select(io).emit(null),a("/team/admin/settings/sharing")}),[t,a]),f=$.useCallback((()=>{t.select(ro).emit(null),r(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,t]),p=$.useCallback((()=>{const n=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;t.select(oo).emit({dwellTime:n}),r(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,t]);let _="";var y,b;return l?c||(_=(e=>e.formatMessage({id:"LvDT7L",defaultMessage:"This is not a file type that can be copied."}))(s.intl)):d?(y=s.intl,b=()=>{g()},_=y.formatMessage({id:"eGWSHS",defaultMessage:"Your team has transfer turned off. <button>Turn on</button>"},{button:e=>$.createElement(n.Button,{variant:"transparent",onClick:b},e)})):_=(e=>e.formatMessage({id:"l+F4Tm",defaultMessage:"Ask an admin to allow Transfer a copy."}))(s.intl),$.createElement($.Fragment,null,$.createElement(h.ButtonWrapper,{"data-uxa-log":"sm24-transfer-button.disabled","data-uxa-interactions":"shown click",ref:o,onMouseEnter:f,onMouseLeave:p},$.createElement(h.VerticalButton,{disabled:!0},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:E.DropboxTransferLine,size:"medium"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(h.ButtonTitle,{content:no(s.intl)})))),$.createElement(n.Tooltip.Control,{open:i,placement:"top",auto:!0,triggerRef:o,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},$.createElement(n.Text,null,_)))};uo.displayName="ChonkyBoiiDisabledButton";const mo=()=>$.createElement(h.ButtonWrapper,{"data-uxa-log":"sm24-transfer-button.loading","data-uxa-interactions":"shown click"},$.createElement(h.VerticalButton,{disabled:!0},$.createElement(h.ButtonIconContainer,null,$.createElement(n.UIIcon,{src:E.DropboxTransferLine,size:"medium"})),$.createElement(h.Spacer,null),$.createElement(h.ButtonInnerColumn,null,$.createElement(n.Skeleton.Text,{size:"small",style:{marginTop:22}}))));mo.displayName="LoadingButton";const go=({store:e})=>{const{canUserUseTransfer:t,canContentUseTransfer:n,isTransferEligibilityLoading:a}=m.useStore(e.$props);return a?$.createElement(mo,null):t&&n?$.createElement(co,{store:e}):$.createElement(uo,{store:e})};go.displayName="Inner";const fo=e=>{const t=(e=>{const t=tr(),n=m.useInitStore(t,(e=>e));return m.useInitStore(e,(e=>{const t=m.store(!1),a=m.store(0),i=m.store(0);return{$props:e,$data:n,$isHovered:t,$hoverStartTime:a,$componentViewTime:i}}))})(e);return $.createElement(go,{store:t})};fo.displayName="TransferButton";const po=({store:e})=>{const t=m.useStore(e.$objectIdentifier),n=$.useCallback((()=>{e.$props.get().transferHandler(),e.$props.get().onActionClicked()}),[e]),a=m.useStore(e.$canContentUseTransfer),i=m.useStore(e.$canUserUseTransfer),r=m.useStore(e.$canUserEnableTransfer),o=m.useStore(e.$isTransferEligibilityLoading);return $.createElement(fo,{canContentUseTransfer:a,canUserUseTransfer:i,canUserEnableTransfer:r,isTransferEligibilityLoading:o,onClickTransferButton:n,objectIdentifier:t})};po.displayName="TransferButton";const ho=(e,t)=>{switch(t[".tag"]){case"public":return{title:e.formatMessage({id:"cryQmP",defaultMessage:"Anyone"}),subtitle:e.formatMessage({id:"W43EHG",defaultMessage:"Anyone with this link can access"})};case"team":return{title:e.formatMessage({id:"Xdvlat",defaultMessage:"Team members"}),subtitle:e.formatMessage({id:"ICYuX7",defaultMessage:"Team members with this link can access"})};case"password":return{title:e.formatMessage({id:"S3o4my",defaultMessage:"Password protected"}),subtitle:e.formatMessage({id:"sGqBO7",defaultMessage:"People with the password"})};case"no_one":return{title:e.formatMessage({id:"uAvRTc",defaultMessage:"Only people invited"}),subtitle:e.formatMessage({id:"UvwRPT",defaultMessage:"This link is off and does not grant additional access to anyone"})};default:return{title:"",subtitle:""}}},_o=e=>e.formatMessage({id:"EVszmg",defaultMessage:"Choose who can access"}),yo=(e,t)=>{switch(t[".tag"]){case"editor":return{title:e.formatMessage({id:"nop2ci",defaultMessage:"Edit link"}),subtitle:e.formatMessage({id:"Yzhe/8",defaultMessage:"People with this link can edit, comment, delete and add files"})};case"viewer":return{title:e.formatMessage({id:"B6qDgp",defaultMessage:"View link"}),subtitle:e.formatMessage({id:"CWTjfa",defaultMessage:"People with this link can view, comment, and download"})};default:return{title:"",subtitle:""}}},Eo=e=>e.formatMessage({id:"7thuuZ",defaultMessage:"Choose link type"});var bo;!function(e){e.CREATING_LINK="CREATING_LINK",e.CREATED_LINK="CREATED_LINK",e.ERROR_CREATING_LINK="ERROR_CREATING_LINK",e.COPIED_LINK="COPIED_LINK",e.ERROR_COPYING_LINK="ERROR_COPYING_LINK",e.UPDATING_LINK="UPDATING_LINK",e.UPDATED_LINK="UPDATED_LINK",e.ERROR_UPDATING_LINK="ERROR_UPDATING_LINK",e.CAN_COPY_LINK="CAN_COPY_LINK"}(bo||(bo={}));const vo={$props:m.atom({oid:{".tag":"file",fileId:""},objectMetadataResult:{isLoading:!0},settingsHandler:()=>{},manageAccessHandler:()=>{},onRequestClose:()=>{},createLinkMutation:{mutate:()=>{},mutateAsync:()=>Promise.resolve({apiData:void 0,pkgData:null}),data:void 0,error:null,status:"idle",reset:()=>{},isError:!1,isIdle:!0,isLoading:!1,isSuccess:!1,failureCount:0,failureReason:null,isPaused:!1,variables:void 0,context:void 0},modifyLinkMutation:{mutate:()=>{},mutateAsync:()=>Promise.resolve({apiData:void 0,pkgData:null}),data:void 0,error:null,status:"idle",reset:()=>{},isError:!1,isIdle:!0,isLoading:!1,isSuccess:!1,failureCount:0,failureReason:null,isPaused:!1,variables:void 0,context:void 0}}),$currentLinkMetadata:m.atom(null),$linkStatus:m.atom(bo.CREATING_LINK),$linkError:m.atom(null),$isLinkNewlyCreated:m.atom(!1),$currentLinkAudience:m.atom(Wa),$currentLinkAccessLevel:m.atom(Qa),$currentLinkAllowedAudiences:m.atom([]),$viewLinkMetadata:m.atom(null),$editLinkMetadata:m.atom(null),$pendingAccessLevel:m.atom(null),$pendingAudience:m.atom(null),$isAudienceDowngrade:m.atom(!1),$advancedSettingsType:m.atom("none"),$allowedAccessLevels:m.atom([]),$senderTrackkey:m.atom("")},{StoreProvider:wo,useStore:ko}=m.defineStoreProvider((e=>{const t=m.proxy((()=>{var t,n;const a=e.get().createLinkMutation,i=e.get().modifyLinkMutation;if(a.isLoading||i.isLoading)return{isLoading:!0};if(a.isSuccess)return{isLoading:!1,isError:!1,output:a.data.apiData,isNewlyCreated:!0};if(i.isSuccess){const e=i.data.apiData,{".tag":t,...n}=null!=e?e:{};return{isLoading:!1,isError:!1,output:n,isNewlyCreated:!1}}if(a.isError){const e=null===(t=a.error)||void 0===t?void 0:t.error,n=(e=>{if(e&&"shared_link_already_exists"===e[".tag"]){const t=e.shared_link_already_exists;if(t&&".tag"in t&&"metadata"===t[".tag"]&&"metadata"in t)return t.metadata}})(e);return n?{isError:!1,isLoading:!1,output:n,isNewlyCreated:!1}:{isLoading:!1,isError:!0,error:e}}if(i.isError){return{isLoading:!1,isError:!0,error:null===(n=i.error)||void 0===n?void 0:n.error}}return{isLoading:!1,isError:!0,error:{".tag":"unknown_mutation_error"}}})),a=m.proxy((()=>{const e=t.get();return e.isLoading||e.isError||!e.output?null:e.output})),i=m.proxy((()=>{const e=t.get();return!(e.isLoading||e.isError||!e.isNewlyCreated)&&e.isNewlyCreated})),r=m.proxy((()=>{const e=t.get();return!e.isLoading&&e.isError&&e.error?e.error:null})),o=m.atom(Wa),s=m.atom([]),l=m.atom(null),c=m.atom(null),d=m.atom(null),u=m.atom(null),g=m.atom(Qa),f=m.proxy((()=>{const t=[],a=e.get().objectMetadataResult;if(!a.isLoading&&!a.isError){const e=n.getCanCreateLink(a.output,Qa,!1),i=n.getCanCreateLink(a.output,Xa,!1);e&&t.push(Qa),i&&t.push(Xa)}return t})),p=m.atom(f.get()),h=m.atom(!1),_=m.atom("none"),y=m.atom(null),E=m.atom(bo.CREATING_LINK),b=m.atom(!1),v=m.atom(null),w=m.atom(n.vendSenderTrackey());let k=!1,S=!1,C=null,M=null;const T=(e,t)=>{var n,a,i,r,o,s,l,c;return!t||(e.id!==t.id||e.url!==t.url||(null===(a=null===(n=e.link_permissions)||void 0===n?void 0:n.effective_audience)||void 0===a?void 0:a[".tag"])!==(null===(r=null===(i=t.link_permissions)||void 0===i?void 0:i.effective_audience)||void 0===r?void 0:r[".tag"])||(null===(s=null===(o=e.link_permissions)||void 0===o?void 0:o.link_access_level)||void 0===s?void 0:s[".tag"])!==(null===(c=null===(l=t.link_permissions)||void 0===l?void 0:l.link_access_level)||void 0===c?void 0:c[".tag"]))};return a.obs((()=>{if(k)return;const e=a.get();if(e){if(!T(e,C))return;k=!0;try{const t=n.appendTrackeyToSharedLinkAndSortParams(e.url,w.get());C=e,y.set({...e,url:t}),b.set(i.get()||!1)}finally{setTimeout((()=>{k=!1}),0)}}})),r.obs((()=>{const e=r.get(),t=E.get();e&&(v.set(e),t===bo.CREATING_LINK?E.set(bo.ERROR_CREATING_LINK):t===bo.UPDATING_LINK&&E.set(bo.ERROR_UPDATING_LINK))})),y.obs((()=>{var e,t,n,a;if(S)return;const i=y.get(),r=E.get();if(i){if(m=i,f=r,(p=M)&&f===p.status&&!T(m,p.metadata))return;S=!0;try{M={metadata:i,status:r};let m=!1;const f=null!==(t=null===(e=i.link_permissions.audience_options)||void 0===e?void 0:e.map((e=>e.allowed?Ka(e.audience[".tag"]):null)).filter((e=>null!==e)))&&void 0!==t?t:[];s.set(f);const p=null===(n=i.link_permissions)||void 0===n?void 0:n.effective_audience;p&&p[".tag"]?o.set(Ka(p[".tag"])):m=!0;const h=null===(a=i.link_permissions)||void 0===a?void 0:a.link_access_level;if(h&&h[".tag"]){const e=function(e){switch(e){case"viewer":return Qa;case"editor":return Xa;default:throw new Error(`Invalid tag: ${e}`)}}(h[".tag"]);g.set(e),e===Xa?c.set(i):l.set(i)}else m=!0;m?(v.set({".tag":"unknown_update_error"}),r===bo.CREATING_LINK?E.set(bo.ERROR_CREATING_LINK):r===bo.UPDATING_LINK&&E.set(bo.ERROR_UPDATING_LINK)):(r===bo.CREATING_LINK?E.set(bo.CREATED_LINK):r===bo.UPDATING_LINK&&E.set(bo.UPDATED_LINK),d.set(null),u.set(null))}finally{setTimeout((()=>{S=!1}),0)}}var m,f,p})),t.obs((()=>{const t=e.get().createLinkMutation,n=e.get().modifyLinkMutation;(t.isLoading||n.isLoading)&&(C=null,M=null)})),{$props:e,$currentLinkMetadata:y,$linkStatus:E,$linkError:v,$isLinkNewlyCreated:b,$currentLinkAccessLevel:g,$currentLinkAudience:o,$currentLinkAllowedAudiences:s,$viewLinkMetadata:l,$editLinkMetadata:c,$pendingAudience:d,$pendingAccessLevel:u,$isAudienceDowngrade:h,$advancedSettingsType:_,$allowedAccessLevels:p,$senderTrackkey:w}}),vo),So=e=>{const t=n.useSharingObjectMetadata(e.oid.fileId),a=(i=e.oid,l.useMutation({mutationFn:e=>n.createSharedLinkWithSettingsMutationFn()({queryClient:l.queryClient,reqCtx:{}})({apiArg:e}),onSettled:async()=>await g.invalidateListSharedLinks(i)}));var i;const r=(e=>n.sharingModifySharedLinkSettingsPackage(e).useMutation())(e.oid);return $.useEffect((()=>{!a.isIdle||a.isSuccess||a.isError||a.mutate({path:n.getContentIdOrPathFromObjectIdentifier(e.oid),settings:{access:Za}})}),[a,e.oid]),$.createElement(wo,{objectMetadataResult:t,createLinkMutation:a,modifyLinkMutation:r,...e})};So.displayName="Provider";const Co=Symbol("ON_COPY_LINK_CREATED"),Mo=Symbol("COPY_LINK_HANDLE_AUDIENCE_CHANGE"),To=Symbol("COPY_LINK_ACCESS_LEVEL_TOGGLED"),Do=Symbol("COPY_LINK_HANDLE_ACCESS_LEVEL_CHANGE"),Lo=Symbol("COPY_LINK_SCREEN_LOADING"),Io=Symbol("COPY_LINK_SCREEN_LOADED"),Ao=Symbol("COPY_LINK_SETTINGS_BUTTON_CLICKED"),xo=Symbol("COPY_LINK_AUDIENCE_TOGGLED"),Po=Symbol("COPY_LINK_SCREEN_ERROR"),No=Symbol("COPY_LINK_COPIED"),$o=Symbol("COPY_LINK_CTA_CLICKED"),Oo=Symbol("COPY_LINK_UPDATING"),Ro=Symbol("COPY_LINK_MANAGE_ACCESS_LEVEL_CLICKED"),Uo=Symbol("ON_CREATE_SHARED_LINK_START"),Fo=Symbol("ON_CREATE_SHARED_LINK_SUCCESS"),Bo=Symbol("ON_CREATE_SHARED_LINK_ERROR"),jo=Symbol("ON_COPY_SHARED_LINK_START"),Ho=Symbol("ON_COPY_SHARED_LINK_SUCCESS"),qo=Symbol("ON_COPY_SHARED_LINK_ERROR"),Vo=Symbol("ON_COPY_SHARED_LINK_CANCELED"),{useEmitter:Wo,defaultEmitter:Yo}=n.defineLogger((async({event:e,getContextValue:t})=>{var a,i,r,o,s,l,c,d,u,m,g,f,p,h;const _=t(n.Context$1),y=t(n.Context$2),E=t(n.Context$3),b={...n.getTags$4(_),...n.getTags$5(y),...n.getTags$6(E)},v={isDir:b.isDir,isSm24:b.isSm24,screen:b.screen,actionSurfaceAndElement:`${b.actionSurface}___${b.actionElement}`},w={...n.getProperties$4(_),...n.getProperties$5(y),...n.getProperties$6(E)};if(e.key!==Mo)if(e.key!==To)if(e.key!==Do)if(e.key!==Co)if(e.key!==Lo)if(e.key!==Io)if(e.key!==Ao)if(e.key!==xo)if(e.key!==Po)if(e.key!==No)if(e.key!==$o)if(e.key!==Oo)if(e.key!==Ro){if(e.key===Uo){const t={isDir:w.isDir,actionSurface:null!==(a=w.actionSurface)&&void 0!==a?a:"undefined",actionElement:null!==(i=w.actionElement)&&void 0!==i?i:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel};let r;return r=w.isDir?{...t}:{...t,fileExtension:w.fileExtension},void n.UDCL.logStart(n.PAP_Create_SharedLink({...r}),{tags:{...v}})}if(e.key!==Fo)if(e.key!==Bo){if(e.key===jo){const t={isDir:w.isDir,actionSurface:null!==(c=w.actionSurface)&&void 0!==c?c:"undefined",actionElement:null!==(d=w.actionElement)&&void 0!==d?d:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel};let a;return a=w.isDir?{...t}:{...t,fileExtension:w.fileExtension},void n.UDCL.logStart(n.PAP_Copy_SharedLink({...a}),{tags:{...v}})}e.key!==Ho?e.key!==qo?e.key!==Vo||n.UDCL.logEnd(n.PAP_Copy_SharedLink({isDir:w.isDir,actionSurface:null!==(p=w.actionSurface)&&void 0!==p?p:"undefined",actionElement:null!==(h=w.actionElement)&&void 0!==h?h:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel,eventState:"canceled"}),{tags:{...v},eventState:"canceled"}):n.UDCL.logEnd(n.PAP_Copy_SharedLink({isDir:w.isDir,actionSurface:null!==(g=w.actionSurface)&&void 0!==g?g:"undefined",actionElement:null!==(f=w.actionElement)&&void 0!==f?f:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel,createSharedLinkErrorReason:n.getCreateSharedLinkErrorReasonFromString(e.payload.error),eventState:"failed"}),{tags:{...v},eventState:"failed"}):n.UDCL.logEnd(n.PAP_Copy_SharedLink({isDir:w.isDir,actionSurface:null!==(u=w.actionSurface)&&void 0!==u?u:"undefined",actionElement:null!==(m=w.actionElement)&&void 0!==m?m:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel,sharedLinkResolvedAccessLevel:e.payload.resolvedAccessLevel,createdNewLink:e.payload.isNewlyCreated,eventState:"success"}),{tags:{...v},eventState:"success"})}else n.UDCL.logEnd(n.PAP_Create_SharedLink({eventState:"failed",isDir:w.isDir,actionSurface:null!==(s=w.actionSurface)&&void 0!==s?s:"undefined",actionElement:null!==(l=w.actionElement)&&void 0!==l?l:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel,createSharedLinkErrorReason:n.getCreateSharedLinkErrorReasonFromString(e.payload.error)}),{tags:{...v},eventState:"failed"});else n.UDCL.logEnd(n.PAP_Create_SharedLink({eventState:"success",isDir:w.isDir,actionSurface:null!==(r=w.actionSurface)&&void 0!==r?r:"undefined",actionElement:null!==(o=w.actionElement)&&void 0!==o?o:"undefined",contentAction:w.contentAction,shareModalType:w.shareModalType,contentIdentifier:w.contentIdentifier,sharedLinkRequestedAccessLevel:e.payload.requestedAccessLevel,sharedLinkResolvedAccessLevel:e.payload.resolvedAccessLevel,createdNewLink:e.payload.isNewlyCreated}),{tags:{...v},eventState:"success"})}else n.UDCL.logEvent("ops.sm24.copyLinkManageAccessLevelClicked",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkUpdating",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkCtaClicked",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkCopied",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkScreenError",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkAudienceToggled",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkSettingsButtonClicked",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkScreenLoaded",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkScreenLoading",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkCreated",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkHandleAccessLevelChange",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkAccessLevelToggled",{tags:v});else n.UDCL.logEvent("ops.sm24.copyLinkHandleAudienceChange",{tags:v})})),Go=()=>{const e=ko(),t=m.useAtom(e.$currentLinkMetadata),a=u.useLogger(),i=Wo(),r=m.useAtom(e.$currentLinkAccessLevel),o=m.useAtom(e.$isLinkNewlyCreated),s=$.useCallback(((n=!0)=>{n&&e.$linkStatus.set(bo.COPIED_LINK),setTimeout((()=>{e.$linkStatus.set(bo.CAN_COPY_LINK)}),5e3),t&&(a("SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_SUCCESS",{linkMetadata:t}),i.select(Ho).emit({requestedAccessLevel:"default",resolvedAccessLevel:r[".tag"],isNewlyCreated:o}))}),[e,t,a,i,r,o]),l=$.useCallback((()=>{e.$linkStatus.set(bo.ERROR_COPYING_LINK),t&&(a("SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_ERROR",{linkMetadata:t}),i.select(qo).emit({requestedAccessLevel:"default",error:"failed_copy_to_clipboard"}))}),[e,t,a,i]),c=$.useCallback(((e=!0)=>{(null==t?void 0:t.url)&&n.copyToClipboard(t.url,(()=>{s(e)}),(()=>{navigator.clipboard?navigator.clipboard.writeText(t.url).then((()=>{s(e)}),(()=>{l()})):l()}))}),[null==t?void 0:t.url,l,s]),d=$.useCallback(((e,n=!0)=>{(null==t?void 0:t.url)&&e&&(e.write(t.url),s(n))}),[null==t?void 0:t.url,s]);return{copyLinkToClipboard:$.useCallback(((n,a=!0)=>{(null==t?void 0:t.url)&&((()=>{const e=document.createElement("input");e.setAttribute("tabindex","-1"),e.value="sharing is caring",document.body.appendChild(e),e.select();const t=document.queryCommandEnabled("copy");return document.body.removeChild(e),t})()?c(a):n?d(n,a):(e.$linkStatus.set(bo.ERROR_COPYING_LINK),i.select(Vo).emit({requestedAccessLevel:"default"})))}),[null==t?void 0:t.url,c,d,i,e])}};n.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/copy-link-screen/internals/link-audience-dropdown.module.out-vflDS2QfZ.css",(e=>"._container_1knze_1,._textContainer_1knze_6{align-items:center;display:flex}._textContainer_1knze_6{font-family:var(--type__body__standard--fontfamily);font-size:var(--dig-type__size__text__small);font-weight:var(--type__body__standard--fontweight);line-height:var(--dig-type__lineheight__text__small)}._menuWrapper_1knze_15{padding:8px 0;white-space:nowrap}._menuContent_1knze_20{max-width:300px;min-width:300px}._menuRowContent_1knze_25{margin:0;padding:7px 0 7px 8px!important}._menuSelectItem_1knze_30{padding:0 16px}._menuSubtitle_1knze_34{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}._leftRowAccessory_1knze_40{margin:0}._rightRowAccessory_1knze_44{margin:0!important;padding-left:8px}._button_1knze_49{font-family:var(--type__body__standard--fontfamily);font-size:var(--dig-type__size__text__small);font-weight:500;letter-spacing:0}"));const zo="_container_1knze_1",Ko="_textContainer_1knze_6",Qo="_menuContent_1knze_20",Xo="_menuRowContent_1knze_25",Zo="_menuSelectItem_1knze_30",Jo="_menuSubtitle_1knze_34",es="_leftRowAccessory_1knze_40",ts="_rightRowAccessory_1knze_44",ns="_button_1knze_49",as=({})=>{const e=s.useIntl(),t=ko(),a=m.useStore(t.$props),i=m.useAtom(t.$currentLinkAudience),r=m.useAtom(t.$currentLinkAllowedAudiences),o=m.useAtom(t.$pendingAudience),l=m.useAtom(t.$pendingAccessLevel),c=m.useAtom(t.$linkStatus),d=m.useAtom(t.$currentLinkMetadata),g=null==d?void 0:d.link_permissions,f=a.modifyLinkMutation,p=Wo(),{shouldShowPasswordRequiredByAdminBanner:h,shouldShowExpirationRequiredByAdminBanner:_}=$.useMemo((()=>{const e=!!(null==g?void 0:g.enforce_shared_link_password_policy)&&"required"===g.enforce_shared_link_password_policy[".tag"],t=!0===(null==g?void 0:g.require_password),n=!!(null==g?void 0:g.days_to_expire_policy)&&"none"!==g.days_to_expire_policy[".tag"],a=!!(null==d?void 0:d.expires),i=(()=>{var e;if(!(null==g?void 0:g.days_to_expire_policy))return null;const t=g.days_to_expire_policy[".tag"];return null!==(e=u.daysExpirationPolicyToNumber[t])&&void 0!==e?e:null})(),r=!!((null==d?void 0:d.expires)&&null!==i&&new Date(d.expires)>new Date(Date.now()+24*i*60*60*1e3));return{shouldShowPasswordRequiredByAdminBanner:e&&!t,shouldShowExpirationRequiredByAdminBanner:n&&(!a||r)}}),[g,d]);let y=!1;const E=$.useMemo((()=>null!==o||null!==l||c===bo.UPDATING_LINK),[o,l,c]),{copyLinkToClipboard:b}=Go(),v=$.useCallback((e=>{var n;let a=()=>{};const i=new Promise((e=>{a=e}));if("undefined"!=typeof ClipboardItem&&navigator.clipboard.write){const e=new ClipboardItem({"text/plain":i});navigator.clipboard.write([e])}else i.then((e=>navigator.clipboard.writeText(e)));const r={write:e=>a(e)};t.$linkStatus.set(bo.UPDATING_LINK),f.mutate({apiArg:{url:null!==(n=null==d?void 0:d.url)&&void 0!==n?n:"",settings:{audience:e}}},{onSuccess:()=>{p.select(Mo).emit(null),p.select(jo).emit({requestedAccessLevel:"default"}),b(r,!1)}})}),[f,t,d,b,p]),w=$.useCallback((()=>{p.select(xo).emit(null)}),[p]),k=$.useCallback((async e=>{if(t.$pendingAudience.set(e),t.$isAudienceDowngrade.set(!1),t.$advancedSettingsType.set("none"),"public"===e[".tag"])h&&_?(t.$advancedSettingsType.set("password_and_expiration"),t.$pendingAudience.set(null)):h?(t.$advancedSettingsType.set("password"),t.$pendingAudience.set(null)):_?(t.$advancedSettingsType.set("expiration"),t.$pendingAudience.set(null)):v(e);else{("public"===i[".tag"]&&("team"===e[".tag"]||"no_one"===e[".tag"])||"team"===i[".tag"]&&"no_one"===e[".tag"])&&t.$isAudienceDowngrade.set(!0),v(e)}}),[t,h,_,i,v]),S=$.useCallback((e=>{w(),e!==i&&(k(e),y=!0)}),[i,w,k]),C=$.useMemo((()=>r.some((e=>e[".tag"]===i[".tag"]))?r.length:r.length+1),[r,i]),M=C>1;return $.createElement("div",{className:zo,"data-testid":"link-audience-dropdown"},M?$.createElement(n.Menu.Wrapper,{onSelection:S,isPortaled:!1,"data-testid":"link-audience-dropdown-menu","data-uxa-log":"copy-link-screen-link-audience-dropdown.opened","data-uxa-interactions":"click"},(({getContentProps:t,getTriggerProps:a})=>$.createElement($.Fragment,null,$.createElement(n.Button,{...a(),variant:"outline",tone:"neutral",size:"medium",withDropdownIcon:M,"data-testid":"link-audience-dropdown-button",disabled:E,className:ns,withIconStart:$.createElement(is,{audience:i,iconSize:"small"})},ho(e,i).title),$.createElement(n.Menu.Content,{"data-sharing-sdk":"1",...t(),placement:"bottom-start",className:Qo},$.createElement(n.Menu.Segment,{withLabel:_o(e)},r.map((t=>$.createElement(n.Menu.SelectItem,{"data-uxa-log":y?"copy-link-screen-link-audience-dropdown.selected":null,"data-uxa-interactions":y?"click":"noop",key:t[".tag"],value:t,"data-testid":`link-audience-dropdown-${t[".tag"]}-item`,selected:t[".tag"]===i[".tag"],preferComposition:!0,className:Zo},$.createElement(n.Menu.RowAccessory,{className:es},t[".tag"]===i[".tag"]?$.createElement(n.UIIcon,{src:n.CheckmarkLine,role:"presentation"}):null),$.createElement(n.Menu.RowContent,{className:Xo},$.createElement(n.Menu.RowTitle,null,ho(e,t).title),$.createElement(n.Menu.RowSubtitle,{className:Jo},ho(e,t).subtitle)),$.createElement(n.Menu.RowAccessory,{className:ts},$.createElement(is,{audience:t,iconSize:"medium"})))))))))):$.createElement(n.Text,{className:Ko,size:"medium"},$.createElement(is,{audience:i,iconSize:"small"}),ho(e,i).title))};as.displayName="LinkAudienceDropdown";const is=({audience:e,iconSize:t})=>{const a=$.useMemo((()=>"public"===e[".tag"]?n.GlobeLine:"team"===e[".tag"]?M.TeamLine:"no_one"===e[".tag"]?C.LockLine:"password"===e[".tag"]?_.PasswordsLine:null),[e]);return null===a?null:$.createElement(n.UIIcon,{src:a,size:t,"data-testid":"link-audience-dropdown-icon",role:"presentation"})};is.displayName="AudienceIcon";n.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/copy-link-screen/internals/link-access-dropdown.module.out-vflEp3Ifa.css",(e=>"._container_1knze_1,._textContainer_1knze_6{align-items:center;display:flex}._textContainer_1knze_6{font-family:var(--type__body__standard--fontfamily);font-size:var(--dig-type__size__text__small);font-weight:var(--type__body__standard--fontweight);line-height:var(--dig-type__lineheight__text__small)}._menuWrapper_1knze_15{padding:8px 0;white-space:nowrap}._menuContent_1knze_20{max-width:300px;min-width:300px}._menuRowContent_1knze_25{margin:0;padding:7px 0 7px 8px!important}._menuSelectItem_1knze_30{padding:0 16px}._menuSubtitle_1knze_34{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}._leftRowAccessory_1knze_40{margin:0}._rightRowAccessory_1knze_44{margin:0!important;padding-left:8px}._button_1knze_49{font-family:var(--type__body__standard--fontfamily);font-size:var(--dig-type__size__text__small);font-weight:500;letter-spacing:0}"));const rs="_container_1knze_1",os="_textContainer_1knze_6",ss="_menuContent_1knze_20",ls="_menuRowContent_1knze_25",cs="_menuSelectItem_1knze_30",ds="_menuSubtitle_1knze_34",us="_leftRowAccessory_1knze_40",ms="_rightRowAccessory_1knze_44",gs="_button_1knze_49",fs=({})=>{const e=s.useIntl(),t=ko(),a=m.useStore(t.$props),i=m.useAtom(t.$currentLinkAccessLevel),r=m.useAtom(t.$allowedAccessLevels),o=m.useAtom(t.$pendingAudience),l=m.useAtom(t.$pendingAccessLevel),c=m.useAtom(t.$linkStatus),d=Wo(),u=a.createLinkMutation;let g=!1;const f=$.useMemo((()=>null!==o||null!==l||c===bo.UPDATING_LINK),[o,l,c]),{copyLinkToClipboard:p}=Go(),[h,_]=$.useState(null);$.useEffect((()=>{c===bo.UPDATED_LINK&&h&&(d.select(Do).emit(null),d.select(jo).emit({requestedAccessLevel:"default"}),p(h,!1),_(null))}),[c,h,d,p]);const y=$.useCallback((e=>{let i=()=>{};const r=new Promise((e=>{i=e}));if("undefined"!=typeof ClipboardItem&&navigator.clipboard.write){const e=new ClipboardItem({"text/plain":r});navigator.clipboard.write([e])}else r.then((e=>navigator.clipboard.writeText(e)));const o={write:e=>i(e)};_(o),t.$linkStatus.set(bo.UPDATING_LINK),"viewer"===e[".tag"]&&t.$viewLinkMetadata.get()?t.$currentLinkMetadata.set(t.$viewLinkMetadata.get()):"editor"===e[".tag"]&&t.$editLinkMetadata.get()?t.$currentLinkMetadata.set(t.$editLinkMetadata.get()):u.mutate({path:n.getContentIdOrPathFromObjectIdentifier(a.oid),settings:{access:e}})}),[t,u,a.oid]),E=$.useCallback((()=>{d.select(To).emit(null)}),[d]),b=$.useCallback((async e=>{t.$pendingAccessLevel.set(e),y(e)}),[t,y]),v=$.useCallback((e=>{E(),e!==i&&(b(e),g=!0)}),[i,E,b]),w=r.length>1;return $.createElement("div",{className:rs,"data-testid":"link-access-dropdown"},w?$.createElement(n.Menu.Wrapper,{onSelection:v,isPortaled:!1,"data-testid":"link-access-dropdown-menu","data-uxa-log":"copy-link-screen-link-access-dropdown.opened","data-uxa-interactions":"click"},(({getContentProps:t,getTriggerProps:a})=>$.createElement($.Fragment,null,$.createElement(n.Button,{...a(),variant:"outline",tone:"neutral",size:"medium",withDropdownIcon:w,"data-testid":"link-access-dropdown-button",disabled:f,className:gs,withIconStart:$.createElement(ps,{accessLevel:i,iconSize:"small"})},yo(e,i).title),$.createElement(n.Menu.Content,{"data-sharing-sdk":"1",...t(),placement:"bottom-start",className:ss},$.createElement(n.Menu.Segment,{withLabel:Eo(e)},r.map((t=>$.createElement(n.Menu.SelectItem,{"data-uxa-log":g?"copy-link-screen-link-access-dropdown.selected":null,"data-uxa-interactions":g?"click":"noop",key:t[".tag"],value:t,"data-testid":`link-access-dropdown-${t[".tag"]}-item`,selected:t[".tag"]===i[".tag"],preferComposition:!0,className:cs},$.createElement(n.Menu.RowAccessory,{className:us},t[".tag"]===i[".tag"]?$.createElement(n.UIIcon,{src:n.CheckmarkLine,role:"presentation"}):null),$.createElement(n.Menu.RowContent,{className:ls},$.createElement(n.Menu.RowTitle,null,yo(e,t).title),$.createElement(n.Menu.RowSubtitle,{className:ds},yo(e,t).subtitle)),$.createElement(n.Menu.RowAccessory,{className:ms},$.createElement(ps,{accessLevel:t,iconSize:"medium"})))))))))):$.createElement(n.Text,{className:os},yo(e,i).title))};fs.displayName="LinkAccessDropdown";const ps=({accessLevel:e,iconSize:t})=>{const a=$.useMemo((()=>"editor"===e[".tag"]?n.EditLine:"viewer"===e[".tag"]?n.ShowLine:null),[e]);return null===a?null:$.createElement(n.UIIcon,{src:a,size:t,"data-testid":"link-access-dropdown-icon",role:"presentation"})};ps.displayName="AccessLevelIcon";const hs=()=>$.createElement("div",{"data-testid":"loading-screen",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"var(--dig-spacing__micro__small)",height:"122px"},"data-uxa-log":"sm24-copy_link_screen.loading","data-uxa-interactions":"shown"},$.createElement(n.Spinner,{size:"medium",withTrack:!0,hasOpaqueTrack:!0}),$.createElement(n.Text,{size:"small",color:"subtle"},s.intl.formatMessage({id:"XtsMXq",defaultMessage:"Getting the link"})));hs.displayName="LoadingScreen";const _s=()=>{const e=ko(),t=m.useStore(e.$props),a=$.useCallback((()=>{t.onRequestClose()}),[t]);return $.createElement("div",{className:c.classes.headerSectionButtonContainer,"data-testid":"close-button"},$.createElement(n.IconButton,{variant:"borderless",shape:"standard",size:"medium",tone:"neutral",onClick:a},$.createElement(n.UIIcon,{src:n.CloseLine})))};_s.displayName="CloseButton";const ys=()=>{const e=ko(),t=m.useStore(e.$props),{objectMetadataResult:a}=t,i=!(!a.isLoading&&a.isError),r=a.isLoading||a.isError?"":n.getName(a.output);return $.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},i&&$.createElement("div",{className:c.classes.headerSectionTextContainer,"data-testid":"header-section"},$.createElement(n.Text,{size:"medium",isBold:!0,className:c.classes.headerSectionPrimaryText},$.createElement(n.Truncate,{location:.5},s.intl.formatMessage({id:"K4WVkI",defaultMessage:"Link copied to"}))),$.createElement(n.Text,{size:"small",color:"subtle"},$.createElement(n.Truncate,{location:.5},r))),$.createElement(_s,null))};ys.displayName="HeaderSection";n.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/copy-link-screen/internals/link-section.module.out-vflJgUUnr.css",(e=>"._badgeAsText_gpgfl_1{text-wrap:nowrap;align-items:center;border-radius:var(--dig-radius__small);display:flex;font-family:var(--dig-type__family__action);font-size:var(--dig-type__size__action__small);font-weight:500;letter-spacing:var(--dig-type__letterspacing__action);margin-right:calc(var(--dig-spacing__micro__xsmall)*-1);padding-left:var(--dig-spacing__micro__small);padding-right:var(--dig-spacing__micro__small);white-space:nowrap;width:fit-content}._badgeAsTextSuccess_gpgfl_20{background-color:var(--dig-color__success__surface--state-1);color:var(--dig-color__success__base)}._badgeAsTextUpdate_gpgfl_26{background-color:var(--dig-color__selection__surface--state-1);color:var(--dig-color__selection__base)}._badgeIcon_gpgfl_32{padding-right:var(--dig-spacing__micro__xsmall)}._badgeAsButton_gpgfl_36{margin-right:calc(var(--dig-spacing__micro__xsmall)*-1)}._updatingContainer_gpgfl_40{position:relative}._updatingOverlay_gpgfl_45{opacity:0;pointer-events:none;position:absolute;right:12px;top:50%;transform:translateY(-50%);transition:opacity .2s ease;z-index:1}._updatingContainer_gpgfl_40:has(input:disabled){pointer-events:none}._updatingContainer_gpgfl_40:has(input:disabled) ._updatingOverlay_gpgfl_45{opacity:1}"));const Es="_badgeAsTextSuccess_gpgfl_20 _badgeAsText_gpgfl_1",bs="_badgeAsTextUpdate_gpgfl_26 _badgeAsText_gpgfl_1",vs="_badgeIcon_gpgfl_32",ws="_badgeAsButton_gpgfl_36",ks="_updatingContainer_gpgfl_40",Ss="_updatingOverlay_gpgfl_45",Cs=()=>{const e=ko(),t=m.useAtom(e.$props),{copyLinkToClipboard:a}=Go(),i=Wo(),[r,o]=$.useState(!1),l=$.useCallback((()=>{i.select($o).emit(null),i.select(jo).emit({requestedAccessLevel:"default"}),a()}),[a,i]),c=m.useAtom(e.$linkStatus),d=m.useAtom(e.$currentLinkMetadata),u=$.useMemo((()=>null==d?void 0:d.url),[d]),g=$.useRef(null);$.useEffect((()=>{c===bo.CREATED_LINK&&u&&u!==g.current&&(g.current=u,a(t.clipboardWriter))}),[c,u,a,t.clipboardWriter]),$.useEffect((()=>{c===bo.UPDATING_LINK&&i.select(Oo).emit(null)}),[c,i]);const f=m.useAtom(e.$advancedSettingsType),p=$.useMemo((()=>"none"===f&&u),[f,u]),h=m.useAtom(e.$currentLinkAccessLevel);return $.createElement("div",null,p?$.createElement("div",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},$.createElement("div",{className:c===bo.UPDATING_LINK?ks:"","data-testid":"link-section"},$.createElement(n.TextInput,{onCopy:l,size:"large",readOnly:!0,wrapperProps:{style:{backgroundColor:"var(--dig-color__background__base)",borderColor:"var(--dig-color__selection__base)",borderStyle:"solid",borderWidth:"3px",borderRadius:"var(--dig-radius__large)"}},value:u,withRightAccessory:(e=>{const t=(()=>{switch(c){case bo.COPIED_LINK:return $.createElement(n.Text,{className:Es},h===Xa?s.intl.formatMessage({id:"qaLT/q",defaultMessage:"Edit link copied"}):(e=>e.formatMessage({id:"Ged5jl",defaultMessage:"View link copied"}))(s.intl));case bo.UPDATED_LINK:return $.createElement(n.Text,{className:bs},h===Xa?(e=>e.formatMessage({id:"vxhXNy",defaultMessage:"Edit link updated"}))(s.intl):(e=>e.formatMessage({id:"7WIftp",defaultMessage:"View link updated"}))(s.intl));case bo.CAN_COPY_LINK:return e?$.createElement(n.Button,{variant:"primary",size:"small",onClick:l,className:ws},(e=>e.formatMessage({id:"1xxmJZ",defaultMessage:"Copy link"}))(s.intl)):null;default:return null}})();return $.createElement("div",{style:{minHeight:"32px",display:"flex",alignItems:"center"}},t)})(r),disabled:c===bo.UPDATING_LINK}),$.createElement("div",{className:Ss},$.createElement(n.Text,{className:bs},$.createElement(n.UIIcon,{src:T.SyncingLine,className:vs,size:"small"}),s.intl.formatMessage({id:"JSbtot",defaultMessage:"Updating link"}))))):null)};Cs.displayName="LinkSection";const Ms=()=>{const e=ko(),t=m.useAtom(e.$currentLinkAccessLevel),a=Wo();return $.createElement(n.IconButton,{"data-testid":"settings-button",variant:"filled",shape:"standard",size:"small",tone:"neutral",onClick:()=>{let n;n="editor"===t[".tag"]?"edit_link_settings":"view_link_settings",a.select(Ao).emit(null);e.$props.get().settingsHandler({initialTab:n})},"data-uxa-log":"copy-link-screen-settings-button.loaded","data-uxa-interactions":"shown click"},$.createElement(n.UIIcon,{"aria-label":"Settings",src:y.SettingsLine}))};Ms.displayName="SettingsButton";const Ts=()=>{const e=ko(),t=m.useStore(e.$props),a=m.useAtom(e.$isAudienceDowngrade),i=m.useAtom(e.$advancedSettingsType),r=Wo(),o=$.useMemo((()=>a&&"none"===i),[a,i]),l=$.useMemo((()=>"none"!==i),[i]),c=m.useAtom(e.$currentLinkAccessLevel),[d,u]=$.useState(!0);return $.createElement($.Fragment,null,$.createElement("div",null,o&&d?$.createElement(n.Banner,{withLeftIcon:$.createElement(n.UIIcon,{src:n.InfoLine}),onRequestClose:()=>u(!1),withCloseButton:"Close",type:"attention",variant:"basic","data-testid":"downgrade-audience-warning-banner",style:{marginTop:"var(--dig-spacing__micro__small)"}},$.createElement(n.Banner.Message,null,s.intl.formatMessage({id:"tpf5uf",defaultMessage:"People who have used this link might still have access"})),$.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"left"}},$.createElement(n.Banner.Actions,null,$.createElement(n.Button,{variant:"transparent",size:"medium",tone:"neutral",onClick:()=>{r.select(Ro).emit(null),t.manageAccessHandler()},"data-testid":"downgrade-audience-warning-banner-manage-access-button"},(e=>e.formatMessage({id:"Gas2Hs",defaultMessage:"Who has access"}))(s.intl))))):null),$.createElement("div",null,l?$.createElement(n.Banner,{withLeftIcon:$.createElement(n.UIIcon,{src:n.InfoLine}),type:"attention",variant:"basic","data-testid":"advanced-settings-required-banner",style:{marginTop:"var(--dig-spacing__micro__small)"}},$.createElement(n.Banner.Message,null,"password"===i&&(e=>e.formatMessage({id:"3QuI0e",defaultMessage:"Your admin requires to set a password for links shared outside the team."}))(s.intl),"expiration"===i&&(e=>e.formatMessage({id:"lmN7n/",defaultMessage:"Your admin requires setting an expiration date for links shared outside the team."}))(s.intl),"password_and_expiration"===i&&(e=>e.formatMessage({id:"Xqjz7p",defaultMessage:"Your admin requires setting a password and expiration date for links shared outside the team."}))(s.intl)),$.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"left"}},$.createElement(n.Banner.Actions,null,$.createElement(n.Button,{variant:"transparent",size:"medium",tone:"neutral",onClick:()=>{let t;t="editor"===c[".tag"]?"edit_link_settings":"view_link_settings";e.$props.get().settingsHandler({initialTab:t})},"data-testid":"advanced-settings-required-banner-set-password-button"},"password_and_expiration"===i?(e=>e.formatMessage({id:"1A/1xg",defaultMessage:"Update now"}))(s.intl):"expiration"===i?(e=>e.formatMessage({id:"QB5ZnN",defaultMessage:"Update expiration date"}))(s.intl):(e=>e.formatMessage({id:"shepOP",defaultMessage:"Update password"}))(s.intl))))):null))};Ts.displayName="EdgeCaseBanners";const Ds=()=>$.createElement("div",{style:{display:"flex",padding:"var(--dig-spacing__micro__medium)",flexDirection:"column",alignItems:"center",gap:"var(--dig-spacing__micro__small)"},"data-testid":"error-screen"},$.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--dig-spacing__micro__xsmall)"}},$.createElement(n.UIIcon,{src:n.FailLine,size:"large"})),$.createElement(n.Text,{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"var(--dig-spacing__micro__xsmall)",alignSelf:"stretch",fontStyle:"normal",fontWeight:"var(--dig-type__weight__strong)",lineHeight:"var(--dig-line-height__label__small)",letterSpacing:"var(--dig-letter-spacing__action__medium)"}},s.intl.formatMessage({id:"qmGnVg",defaultMessage:"Couldnt copy link"})),$.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},$.createElement(n.Text,{style:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:"var(--dig-color__text__subtle)",textOverflow:"ellipsis",fontFamily:"var(--dig-font-family__text)",fontSize:"var(--dig-font-size__text__small)",fontStyle:"normal",fontWeight:"var(--dig-type__weight__base)",lineHeight:"var(--dig-line-height__label__small)",gap:"var(--dig-spacing__micro__xsmall)"}},(e=>e.formatMessage({id:"hkT9RW",defaultMessage:"Try reloading the page or asking us for"}))(s.intl),$.createElement(n.Link,{href:"https://www.dropbox.com/get_help",style:{display:"flex",justifyContent:"center",alignItems:"center",fontFamily:"var(--dig-font-family__text)",fontSize:"var(--dig-font-size__text__small)",fontStyle:"normal",fontWeight:"var(--dig-type__weight__base)",lineHeight:"var(--dig-line-height__label__small)",textDecorationLine:"underline",textDecorationStyle:"solid",color:"var(--dig-color__primary__base)"}},(e=>e.formatMessage({id:"yvCTUR",defaultMessage:"help"}))(s.intl)))));Ds.displayName="ErrorScreen";const Ls=e=>$.createElement(So,{...e},$.createElement(Is,null));Ls.displayName="CopyLinkScreen";const Is=()=>{const e=ko(),t=m.useAtom(e.$props),{objectMetadataResult:n}=t,a=n.isLoading,i=!n.isLoading&&!n.isError,r=!n.isLoading&&n.isError,o=m.useAtom(e.$linkStatus),s=m.useAtom(e.$currentLinkAccessLevel),l=m.useAtom(e.$isLinkNewlyCreated),c=m.useAtom(e.$linkError),d=Wo(),g=u.useLogger(),f=r||o===bo.ERROR_CREATING_LINK||o===bo.ERROR_UPDATING_LINK,p=a||o===bo.CREATING_LINK,h=i&&o!==bo.CREATING_LINK;return $.useEffect((()=>{var e,t;o===bo.CREATING_LINK?(d.select(Uo).emit({requestedAccessLevel:"default"}),d.select(jo).emit({requestedAccessLevel:"default"})):o===bo.CREATED_LINK?(d.select(Co).emit(null),d.select(Fo).emit({requestedAccessLevel:"default",resolvedAccessLevel:s[".tag"],isNewlyCreated:l})):o===bo.COPIED_LINK?d.select(No).emit(null):o===bo.ERROR_CREATING_LINK&&(g("SHARE_MODAL_SHARE__COPY_LINK_LEGO__CREATE_ERROR",{linkMetadata:null}),d.select(Bo).emit({requestedAccessLevel:"default",error:null!==(e=c&&c[".tag"])&&void 0!==e?e:"unknown_error_type"}),d.select(qo).emit({requestedAccessLevel:"default",error:null!==(t=c&&c[".tag"])&&void 0!==t?t:"unknown_error_type"}))}),[o,d,s,l,c,g]),$.useEffect((()=>{h&&d.select(Io).emit(null),f&&d.select(Po).emit(null),p&&d.select(Lo).emit(null)}),[h,f,p,d]),p?$.createElement(hs,null):f?$.createElement($.Fragment,null,$.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},$.createElement(Ds,null))):h?$.createElement("div",{"data-testid":"copy-link-screen-with-store","data-uxa-log":"sm24-copy_link_screen.loaded","data-uxa-interactions":"shown",style:{display:"flex",flexDirection:"column"}},$.createElement(ys,null),$.createElement("div",null,$.createElement("div",{style:{display:"flex",alignItems:"flex-start",alignSelf:"stretch",marginBottom:"var(--dig-spacing__micro__small)"}},$.createElement(Ts,null)),$.createElement(Cs,null),$.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"var(--dig-spacing__micro__small)"}},$.createElement("div",{style:{display:"flex",alignItems:"center",gap:"var(--dig-spacing__micro__xsmall)"}},$.createElement(fs,null),$.createElement(as,null)),$.createElement(Ms,null)))):null};Is.displayName="CopyLinkScreenWithStore";const As=({store:e})=>{const t=m.useStore(e.$props),n=m.useStore(e.$clipboardWriter),{objectIdentifier:a,manageAccessHandler:i,onRequestClose:r}=t,o=$.useCallback((t=>{const n=e.$props.get();"integrated_v1"!==n.settingsMode?n.settingsHandler(t):m.batch((()=>{t.shouldOpenLinkSettings?e.$initialSettingsTab.set("edit_link_settings"===t.initialTab?"edit_link_settings":"view_link_settings"):e.$initialSettingsTab.set("object_settings"),e.$currentScreen.set(yr.SETTINGS)}))}),[e]);return $.createElement(Ls,{oid:a,settingsHandler:o,manageAccessHandler:i,onRequestClose:r,clipboardWriter:n})};As.displayName="CopyLinkScreen";const xs=e=>e.formatMessage({id:"yBYjtJ",defaultMessage:"Close"}),Ps=Symbol("ON_CLICK"),Ns=Symbol("ON_MOUSE_ENTER"),$s=Symbol("ON_MOUSE_LEAVE"),{useEmitter:Os,defaultEmitter:Rs}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};if(e.key===Ps)return n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...o,action:"close"}}),void n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...o,action:"close"}});e.key!==Ns?e.key!==$s||n.UDCL.logEvent(g.PAP_Log_FlexibleSharingEntrypointActionDwellTime({...s,flexibleSharingEntryPointAction:"close",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...o,action:"close"}}):n.UDCL.logEvent(g.PAP_Hover_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:"close"}),{tags:{...o,action:"close"}})})),Us=({store:e})=>{const[t,a]=$.useState(!1),i=$.useRef(null),r=Os(),o=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0,n=Date.now()-e.$componentViewTime.get();r.select(Ps).emit({dwellTime:t,timeSinceView:n}),e.$isHovered.set(!1),e.$props.get().onClickCloseButton()}),[e,r]),l=$.useCallback((()=>{r.select(Ns).emit(null),a(!0),e.$isHovered.set(!0),e.$hoverStartTime.set(Date.now())}),[e,r]),c=$.useCallback((()=>{const t=e.$isHovered.get()?Date.now()-e.$hoverStartTime.get():void 0;r.select($s).emit({dwellTime:t}),a(!1),e.$isHovered.set(!1),e.$hoverStartTime.set(0)}),[e,r]);$.useEffect((()=>{e.$componentViewTime.set(Date.now())}),[e]);const d=m.useStore(e.$disabled);return $.createElement($.Fragment,null,$.createElement(h.HeaderIconButton,{"data-testid":"close-button",onClick:o,onMouseEnter:l,onMouseLeave:c,ref:i,variant:e.$props.get().buttonVariant,disabled:d,"data-uxa-log":"sm24-close-button","data-uxa-interactions":"click"},$.createElement(n.UIIcon,{src:n.CloseLine,"aria-label":xs(s.intl)})),$.createElement(n.Tooltip.Control,{open:!d&&t,placement:"top",auto:!0,triggerRef:i,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},$.createElement(n.Text,null,xs(s.intl))))};Us.displayName="LoadedButton";const Fs=({store:e})=>$.createElement(Us,{store:e});Fs.displayName="Inner";const Bs=e=>{const t=(e=>{const t=tr(),n=m.useInitStore(t,(e=>e));return m.useInitStore(e,(e=>{const t=m.store(!1),a=m.store(0),i=m.store(0),r=m.proxy((()=>{var t;return null!==(t=e.get().disabled)&&void 0!==t&&t}));return{$props:e,$data:n,$isHovered:t,$hoverStartTime:a,$componentViewTime:i,$disabled:r}}))})(e);return $.createElement(Fs,{store:t})};Bs.displayName="CloseButton";const js=({store:e,buttonVariant:t})=>{const n=m.useStore(e.$isClickawayLocked),a=$.useCallback((()=>{e.$props.get().onRequestClose()}),[e]);return $.createElement(Bs,{onClickCloseButton:a,buttonVariant:t,disabled:n})};js.displayName="CloseButton";const Hs=Symbol("ON_CLICK_OUTSIDE"),qs=Symbol("ON_RESIZE"),Vs=Symbol("ON_OPEN"),Ws=Symbol("ON_OVER_QUOTA_SHARE_BANNER_UPGRADE"),Ys=Symbol("ON_VIEW_MANAGE_ACCESS_ENTRY_POINT_BUTTON"),{useEmitter:Gs,defaultEmitter:zs}=n.defineLogger((async({event:e,getContextValue:t})=>{const a=t(n.Context$1),i=t(n.Context$2),r=t(n.Context$3),o={...n.getTags$4(a),...n.getTags$5(i),...n.getTags$6(r)},s={...n.getProperties$4(a),...n.getProperties$5(i),...n.getProperties$6(r)};e.key!==Vs?e.key!==Hs&&e.key!==qs?e.key!==Ys?e.key===Ws&&n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:e.payload.action,flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView||void 0}),{tags:{...o,action:e.payload.action}}):n.UDCL.logEvent(g.PAP_View_ManageAccess({...s,manageAccessElement:"manage_access_entry_point_button"}),{tags:{...o,element:"manage_access_entry_point_button"}}):n.UDCL.logEvent(u.PAP_Select_FlexibleSharingEntrypointAction({...s,flexibleSharingEntryPointAction:e.payload.action,flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView||void 0}),{tags:{...o,action:e.payload.action}}):n.UDCL.logEvent(function(e){return{class:"sharing_sender",action:"view",object:"flexible_sharing_entrypoint",properties:e}}({...s}),{tags:o})})),Ks=({store:e})=>{const t=e.$props.get().objectIdentifier,n=tr(),a=Gs(),i="loaded"===n.status?n.objectIdentifier:t,r=$.useCallback((()=>{m.batch((()=>{e.$currentScreen.set(yr.MANAGE_ACCESS),e.$isSuggestionsOpen.set(!1)}))}),[e]),o=$.useCallback((()=>{a.select(Ys).emit(null)}),[a]);return i?$.createElement("div",null,$.createElement(g.ContentMemberFacepileButton,{oid:i,onClick:r,onView:o})):null};Ks.displayName="ManageAccessFacepileButton";const Qs=e=>e.formatMessage({id:"4mDOPx",defaultMessage:"Folder"}),Xs=(e,t)=>e.formatMessage({id:"Y8cvK0",defaultMessage:"Share {contentName}"},{contentName:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME)}),Zs=e=>e.formatMessage({id:"EbXgYu",defaultMessage:"Create QR code"}),Js=e=>e.formatMessage({id:"Qn7mSN",defaultMessage:"People with access to"}),el=e=>e.formatMessage({id:"FQ6/b6",defaultMessage:"Link copied to"}),tl=({store:e})=>{const t=m.useStore(e.$currentScreen),a=m.useStore(e.$props),i=t===yr.INBAND,r=t===yr.MANAGE_ACCESS,o=t===yr.COPY_LINK,{firstLine:l,secondLine:d}=$.useMemo((()=>{const e=n.getFilename(a.fileOrFolder);switch(t){case yr.INBAND:return{firstLine:(i=s.intl,i.formatMessage({id:"DOMI0b",defaultMessage:"Add people to"})),secondLine:e};case yr.QRCODE:return{firstLine:Zs(s.intl),secondLine:e};case yr.MANAGE_ACCESS:return{firstLine:Js(s.intl),secondLine:e};case yr.COPY_LINK:return{firstLine:el(s.intl),secondLine:e};case yr.MAIN:default:return{firstLine:Xs(s.intl,e),secondLine:a.fileOrFolder.is_dir?Qs(s.intl):n.formatBytes(s.intl,a.fileOrFolder.bytes,2,!1)}}var i}),[t,a.fileOrFolder]),u=$.useCallback((()=>{e.$currentScreen.set(yr.INBAND)}),[e]),g=i?220:void 0;return o?null:$.createElement($.Fragment,null,r&&$.createElement("div",{className:c.classes.headerSectionBackButton},$.createElement(n.IconButton,{onClick:u,variant:"borderless",shape:"standard",size:"medium",tone:"neutral","data-uxa-log":"sm24_back_button"},$.createElement(n.UIIcon,{src:n.ArrowLeftLine}))),$.createElement("div",{className:c.classes.headerSectionTextContainer},$.createElement(n.Text,{size:"medium",isBold:!0,className:c.classes.headerSectionPrimaryText},$.createElement(n.Truncate,{location:.5},l)),$.createElement(n.Text,{size:"small",color:"subtle"},$.createElement(n.Truncate,{maxWidth:g,location:.5},d))),$.createElement("div",{className:c.classes.headerSectionRightContainer},i&&$.createElement(Ks,{store:e}),$.createElement("div",{className:c.classes.headerSectionButtonContainer},$.createElement(js,{store:e,buttonVariant:"borderless"}))))};tl.displayName="HeaderSection";const nl=({store:e})=>{const t=m.useStore(e.$props),a=tr(),{objectIdentifier:i}=t,r=m.useStore(e.$inviteTargets),o=m.useStore(e.$inviteMessage),s=$.useCallback((t=>{e.$inviteMessage.set(t)}),[e]),l=$.useCallback((t=>{e.$inviteTargets.set(t)}),[e]),c=$.useCallback((()=>{e.$isClickawayLocked.set(!0)}),[e]),d=$.useCallback((()=>{e.$isClickawayLocked.set(!1)}),[e]),g=$.useCallback((()=>{e.$isClickawayLocked.set(!1),e.$props.get().onInbandShareCompleted(),n.invalidateObjectMembers(i),n.invalidateSharingObjectMetadata(i)}),[e,i]),f=$.useCallback((()=>{e.$isInbandStarted.set(!0)}),[e]),p=$.useCallback((t=>{e.$isSuggestionsOpen.set(t)}),[e]),h=$.useCallback((async()=>{"loaded"===a.status&&await a.refreshObjectMetadata()}),[a]),_=$.useCallback((async()=>{"loaded"===a.status&&await a.refreshModal()}),[a]);return $.createElement(u.Inband,{oid:t.objectIdentifier,inviteMessage:o,inviteTargets:r,hasUpdatedAccountMetadata:!1,onCloseClick:()=>t.onRequestClose(),onTargetsDropdownFocusChange:p,onInviteMessageChange:s,onInviteTargetsChange:l,onShareStart:c,onShareFailure:d,onInbandShareSuccess:g,onStartInband:f,onRefreshObjectMetadata:h,onRefreshModal:_})};nl.displayName="InbandShareScreen";const al=({children:e})=>{const t=tr();return $.createElement(n.ContextProvider,{context:n.Context$3,value:"loaded"===t.status?t.objectMetadata:null},$.createElement(u.MetadataProvider,{sharingObjectMetadata:"loaded"===t.status?t.objectMetadata:void 0,sharingPrefs:"loaded"===t.status?t.sharingPrefs:void 0,sharingObjectIdentifier:"loaded"===t.status?t.objectIdentifier:void 0,shareMe24Metadata:{isShareMe24:!0}},e))};al.displayName="LoggingMetadataProvider";const il=({store:e})=>{const{objectIdentifier:t,onRequestClose:a}=m.useStore(e.$props),i=tr(),r=$.useCallback((e=>{"loaded"===i.status&&i.onObjectIdentifierChanged(e)}),[i]),o=$.useCallback((t=>{const n=e.$props.get();"integrated_v1"!==n.settingsMode?n.settingsHandler(t):m.batch((()=>{t.shouldOpenLinkSettings?e.$initialSettingsTab.set("edit_link_settings"===t.initialTab?"edit_link_settings":"view_link_settings"):e.$initialSettingsTab.set("object_settings"),e.$currentScreen.set(yr.SETTINGS)}))}),[e]),s=$.useCallback((()=>{a()}),[a]),l=$.useCallback((()=>{e.$currentScreen.set(yr.INBAND)}),[e]),c=$.useCallback((()=>{e.$currentScreen.set(yr.INBAND),n.invalidateSharingObjectMetadata(t),g.invalidateListSharedLinks(t),n.invalidateObjectMembers(t)}),[t,e.$currentScreen]),d="loaded"===i.status?i.objectIdentifier:t;return d?$.createElement(n.Box,{style:{height:"322px",overflowY:"auto",scrollbarWidth:"thin"}},$.createElement(g.ContentMemberList,{objectIdentifier:d,openLinkSettings:o,onRequestClose:s,onChangeConfidentiality:l,onTransferFolderOwnership:c,onObjectIdentifierChanged:r,onConfirmationModalShownChange:()=>{}})):null};il.displayName="ManageAccessScreen";const rl=u.define({name:"sharing.modifySharedLinksettings"},(e=>t=>u.handler(e.sharingAlphaModifySharedLinkSettings(t)))),ol=e=>{switch(e){case"public":return n.PUBLIC;case"team":return n.TEAM;case"password":return n.PASSWORD;case"no_one":return n.NO_ONE;default:return n.OTHER$1}},sl=(e,t,n,a)=>{const i=u.SharingSettingsUtil(e).getModifiedSettings(t,a,n);return void 0===i?null:i},ll=e=>{var t,n,a,i,r,o,s,l;const c=null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"],d=null===(n=e.link_permissions.resolved_visibility)||void 0===n?void 0:n[".tag"],u=null===(a=e.link_permissions.effective_audience)||void 0===a?void 0:a[".tag"];return{allow_comments:e.link_permissions.allow_comments,can_revoke:e.link_permissions.can_revoke,allow_download:e.link_permissions.allow_download,can_allow_download:e.link_permissions.can_allow_download,can_disallow_download:e.link_permissions.can_disallow_download,can_set_expiry:e.link_permissions.can_set_expiry,can_remove_expiry:e.link_permissions.can_remove_expiry,can_set_password:Boolean(e.link_permissions.can_set_password),can_remove_password:Boolean(e.link_permissions.can_remove_password),require_password:Boolean(e.link_permissions.require_password),link_access_level:"other"===c||void 0===c?"viewer":c,team_restricts_comments:e.link_permissions.team_restricts_comments,can_use_extended_sharing_controls:e.link_permissions.can_use_extended_sharing_controls,resolved_visibility:"other"===d||void 0===d?"no_one":d,effective_audience:"other"===u||"members"===u?void 0:u,requested_visibility:(null===(i=e.link_permissions.requested_visibility)||void 0===i?void 0:i[".tag"])||"public",revoke_failure_reason:null===(r=e.link_permissions.revoke_failure_reason)||void 0===r?void 0:r[".tag"],restricting_shared_folder_path:e.link_permissions.restricting_shared_folder_path,audience_options:(e.link_permissions.audience_options||[]).filter((e=>"other"!==e.audience[".tag"])).map((e=>{var t;return{audience:e.audience[".tag"],allowed:e.allowed,disallowed_reason:null===(t=e.disallowed_reason)||void 0===t?void 0:t[".tag"]}})),visibility_policies:e.link_permissions.visibility_policies.map((e=>({policy:e.policy[".tag"],resolved_policy:e.resolved_policy[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason}))),days_to_expire_policy:null===(o=e.link_permissions.days_to_expire_policy)||void 0===o?void 0:o[".tag"],change_shared_link_expiration_policy:null===(s=e.link_permissions.change_shared_link_expiration_policy)||void 0===s?void 0:s[".tag"],enforce_shared_link_password_policy:null===(l=e.link_permissions.enforce_shared_link_password_policy)||void 0===l?void 0:l[".tag"]}},cl=(e,t)=>null===t?null:{url:t.url,content_owner_team_info:t.content_owner_team_info,expires:t.expires?new Date(t.expires):void 0,require_password:t.link_permissions.require_password,file_type:n.getIsFile(e)?"file":n.getIsCollection(e)?"collection":"folder",id:t.id,link_permissions:ll(t),name:t.name,path_lower:t.path_lower,rev:void 0,server_modified:void 0,team_member_info:t.team_member_info?{...t.team_member_info,member_id:t.team_member_info.member_id||""}:void 0,preview_type:t.preview_type},dl=(e,t)=>null===t?null:u.SharingSettingsUtil(e).getLinkPolicy(t),ul=(e,t)=>"edit_link_settings"===e?n.SettingsTabName.EditLinkSettingsTab:"view_link_settings"===e?n.SettingsTabName.ViewLinkSettingsTab:t?n.SettingsTabName.FileSettingsTab:n.SettingsTabName.FolderSettingsTab,ml=e=>e.formatMessage({id:"pTINM6",defaultMessage:"Cancel"}),gl=e=>e.formatMessage({id:"qIDtpl",defaultMessage:"Saving..."}),fl=e=>e.formatMessage({id:"rQzKcA",defaultMessage:"Save"}),pl=e=>e.formatMessage({id:"s5wejr",defaultMessage:"People with this link can edit"}),hl=e=>e.formatMessage({id:"OrDD0F",defaultMessage:"People with this link can view"}),_l=e=>e.formatMessage({id:"9P9QP9",defaultMessage:"Delete link"}),yl=e=>e.formatMessage({id:"98ues2",defaultMessage:"Create link"}),El=e=>e.formatMessage({id:"5c/Fw9",defaultMessage:"There was a problem completing this request."}),bl=e=>e.formatMessage({id:"thZih0",defaultMessage:"File settings updated."}),vl=e=>e.formatMessage({id:"y/SwCN",defaultMessage:"Updating folder settings"}),wl=e=>e.formatMessage({id:"9KbrAJ",defaultMessage:"You don`t have permission to perform this action."}),kl=e=>e.formatMessage({id:"/KMAtq",defaultMessage:"Folder settings updated."}),Sl=e=>e.formatMessage({id:"xbSGM1",defaultMessage:"This setting is turned off for all files in this folder."}),Cl=e=>e.formatMessage({id:"BUD+SU",defaultMessage:"Your admin has disabled this setting."}),Ml=e=>e.formatMessage({id:"hIM/KB",defaultMessage:"You dont have permission to change the settings on this file."}),Tl=e=>e.formatMessage({id:"PLkx47",defaultMessage:"Anyone with edit access can change these settings."}),Dl=(e,t,a)=>e.formatMessage({id:"7Lpr6B",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:e=>$.createElement("strong",null,e),name:u.Emstring.em_snippet(t,a?n.SNIPPET_SIZES.DESKTOP_FILENAME:n.SNIPPET_SIZES.FILENAME)}),Ll=e=>e.formatMessage({id:"oW3nlu",defaultMessage:"Link deletion failed. Please retry."}),Il=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}):e.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),Al=e=>e.formatMessage({id:"p1EB+W",defaultMessage:"You dont have permission to create a link to this file"}),xl=e=>e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}),Pl=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"1+z1aQ",defaultMessage:"Edit link created"}):e.formatMessage({id:"IalA6p",defaultMessage:"View link created"}),Nl=e=>e.formatMessage({id:"V2Zurn",defaultMessage:"People who have used this link might still have access"}),$l=e=>e.formatMessage({id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."}),Ol=e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}),Rl=e=>e.formatMessage({id:"UBFEXr",defaultMessage:"Who still has access?"}),Ul=e=>e.formatMessage({id:"OMkgF4",defaultMessage:"Settings saved."}),Fl=(e,t)=>e.formatMessage({id:"SuyTXe",defaultMessage:"Unsharing <st>{name}</st>..."},{st:e=>$.createElement("strong",null,e),name:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME)}),Bl=(e,t)=>e.formatMessage({id:"K7TiCS",defaultMessage:"Unshared <st>{name}</st>."},{st:e=>$.createElement("strong",null,e),name:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME)}),jl=e=>e.formatMessage({id:"sL/c0K",defaultMessage:"Unshare failed. Please retry."}),Hl=(e,t)=>n.getIsFile(t)?(e=>e.formatMessage({id:"px+mde",defaultMessage:"Unshare file"}))(e):n.getIsInsideTeamFolderTree(t)?(e=>e.formatMessage({id:"11dNm1",defaultMessage:"Reset membership"}))(e):(e=>e.formatMessage({id:"qyAR1S",defaultMessage:"Unshare folder"}))(e),ql=(e,t)=>e.formatMessage({id:"W4bv7f",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> You can change these settings or manage access in the Admin Console."},{folder_name:t,st:e=>$.createElement("strong",null,e)}),Vl=(e,t)=>e.formatMessage({id:"M+bKji",defaultMessage:"<adminLink>Go to admin console</adminLink>"},{adminLink:e=>$.createElement(n.Button,{variant:"transparent",onClick:()=>t("/team/admin/content/home")},e)}),Wl=(e,t)=>e.formatMessage({id:"kBmOrE",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> To edit, ask your admin."},{folder_name:t,st:e=>$.createElement("strong",null,e)}),Yl=(e,t)=>e.formatMessage({id:"FAe8j7",defaultMessage:"<findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>$.createElement(n.Button,{variant:"transparent",onClick:()=>t("/team?_tk=left_nav_team")},e)}),Gl=(e,t)=>e.formatMessage({id:"5Aqtnn",defaultMessage:"Only the owner (you) can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME),st:e=>$.createElement("strong",null,e)}),zl=(e,t)=>e.formatMessage({id:"o9IXBs",defaultMessage:"Only the owner can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME),st:e=>$.createElement("strong",null,e)}),Kl=e=>e.formatMessage({id:"iQBMyq",defaultMessage:"Only team admins can change these settings."}),Ql=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),Xl=e=>e.formatMessage({id:"RCQdy7",defaultMessage:"This file hasnt been shared yet"});class Zl extends $.Component{constructor(e){super(e),this.handleMultiplePolicyUpdate=e=>{const t={...this.props.linkPolicy,...e};this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const n={...this.props.linkPolicy,[e]:t};this.props.onPolicyUpdate(this.props.linkMetadata,n)};const{getRLPolicyDict:t}=Oa(this.props.intl),{link_permissions:n}=e.linkMetadata,a="folder"===e.linkMetadata.file_type,i="collection"===e.linkMetadata.file_type;this.getPolicyDict=e=>t(e,n.link_access_level,a,i)}render(){const{linkMetadata:e,linkPolicy:t,onPolicyUpdate:n,intl:a,readOnlyPolicy:i,onLinkClicked:r,...o}=this.props;return $.createElement("div",{...o},$.createElement(Aa,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:i}),$.createElement(ka,{intl:this.props.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:i}),$.createElement(Ta,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:i}),$.createElement($a,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:this.props.onLinkClicked,readOnlyPolicy:i,isPaperDoc:this.props.isPaperDoc,banner:$.createElement(Pa,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))}}Zl.displayName="SharingSettingsRighteousLinkPolicyView";class Jl extends $.Component{constructor(e){super(e),this.handleMultiplePolicyUpdate=e=>{const t={...this.props.linkPolicy,...e};this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const n={...this.props.linkPolicy,[e]:t};this.props.onPolicyUpdate(this.props.linkMetadata,n)};const{getShmodelInMultipleLinksPolicyDict:t}=Oa(this.props.intl),n="folder"==e.linkMetadata.file_type;this.getPolicyDict=e=>t(e,n)}render(){const{linkMetadata:e,linkPolicy:t,onPolicyUpdate:n,intl:a,readOnlyPolicy:i,...r}=this.props,{link_permissions:o}=this.props.linkMetadata;return $.createElement("div",{...r},$.createElement(Aa,{intl:this.props.intl,linkPermissions:o,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:i}),$.createElement(ka,{intl:this.props.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:i}),$.createElement($a,{intl:a,linkPermissions:o,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:this.props.onLinkClicked,readOnlyPolicy:i,isPaperDoc:this.props.isPaperDoc}))}}Jl.displayName="SharingSettingsShmodelLinkPolicyView";const ec=u.define({name:"sharing.create_shared_link_with_settings"},(e=>t=>u.handler(e.sharingAlphaCreateSharedLinkWithSettings(t)))),tc=u.define({name:"sharing.revokeSharedLink"},(e=>t=>u.handler(e.sharingRevokeSharedLink(t)))),nc=u.define({name:"sharing.unshareFile"},(e=>t=>u.handler(e.sharingUnshareFile(t)))),ac=u.define({name:"sharing.unshareFolder"},(e=>t=>u.handler(e.sharingUnshareFolder(t)))),ic=({objectMetadata:e,objectIdentifier:t,contentName:a,open:i,onCancel:r,onConfirm:o,onClose:l,onObjectIdentifierChanged:c,onRefreshModal:d,onConfirmationModalShownChange:m})=>{const f=s.useIntl(),p=u.useSnackbar(),h=u.useEndpoint(ac),_=u.useEndpoint(nc),y=u.useEndpoint(g.sharingCheckJobStatus),E=u.useLogger(),[b,v]=$.useState(!1),w=u.usePlatform(),k=w!==u.Platforms.DESKTOP,S=n.getIsFile(e)?(e=>e.formatMessage({id:"+HG1Rr",defaultMessage:"Everyone will be removed from this file. Youll still keep a copy of this file in your Dropbox."}))(f):(e=>e.formatMessage({id:"SO6vAJ",defaultMessage:"Everyone will be removed from this folder. Youll still keep a copy of this folder in your Dropbox."}))(f),C=$.useCallback((async a=>{var i,r;if(o(a),w!==u.Platforms.DESKTOP&&l(),p.showInProgress({intl:f,message:Fl(f,n.getName(e))}),"file"===t[".tag"]){E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const a=await _({file:t.fileId});"SUCCESS"===a.status?(E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:a}),p.showCompleted({intl:f,message:Bl(f,n.getName(e))})):("ERROR"===a.status?E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:a}):E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:a}),p.showFailure({intl:f,message:jl(f)}))}else if("shared_folder"===t[".tag"]){E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const o=await h({shared_folder_id:t.sharedFolderId,leave_a_copy:a});if("SUCCESS"===o.status){if("complete"===o.output[".tag"])p.showCompleted({intl:f,message:Bl(f,n.getName(e))}),E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:o}),await c({".tag":"file_folder",path:n.isNewApiMetadata(e)?"":null!==(i=e.path_lower)&&void 0!==i?i:"",name:n.getName(e)});else if("async_job_id"===o.output[".tag"]){const t=o.output.async_job_id;"COMPLETE"===(await u.poll((async()=>{const a={async_job_id:t},i=await y(a);return"SUCCESS"===i.status&&"in_progress"===i.output[".tag"]?{status:"RETRY"}:(p.showCompleted({intl:f,message:Bl(f,n.getName(e))}),{status:"COMPLETE",output:i})}),{interval:1e3,timeout:18e4})).status&&(p.showCompleted({intl:f,message:Bl(f,n.getName(e))}),E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:o}),await c({".tag":"file_folder",path:n.isNewApiMetadata(e)?"":null!==(r=e.path_lower)&&void 0!==r?r:"",name:n.getName(e)}))}}else"ERROR"===o.status?E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:o}):(p.showFailure({intl:f,message:jl(f)}),E("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:o}))}w===u.Platforms.DESKTOP&&await Promise.resolve(d())}),[f,E,t,e,l,o,c,d,w,p,y,_,h]);return $.useEffect((()=>{m(i)}),[i,m]),$.createElement(n.Modal,{open:i,isCentered:!0,withCloseButton:k?Ql(f):void 0,onRequestClose:r,overlayStyles:w===u.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},$.createElement(n.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},$.createElement(n.Modal.Title,null,((e,t)=>e.formatMessage({id:"C6YnHl",defaultMessage:"Unshare {content_name}?"},{content_name:u.Emstring.em_snippet(t,n.SNIPPET_SIZES.FILENAME)}))(f,a))),$.createElement(n.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},S,n.getIsSharedFolder(e)&&$.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"24px"}},$.createElement(n.Checkbox,{checked:b,onChange:()=>v(!b),style:{marginRight:"8px"}}),(e=>e.formatMessage({id:"N3y1Hr",defaultMessage:"Let removed members keep a copy of this shared folder."}))(f))),$.createElement(n.Modal.Footer,{"data-sharing-sdk":"1"},$.createElement(n.Button,{variant:"opacity",onClick:r,autoFocus:!0},f.formatMessage({id:"nSbXzb",defaultMessage:"Cancel"})),$.createElement(n.Button,{variant:"primary",onClick:()=>C(b)},f.formatMessage({id:"obuuKH",defaultMessage:"Unshare"}))))};ic.displayName="UnshareConfirmationModal";const rc=e=>m.useInitStore(e,(e=>{const t=m.proxy((()=>e.get().accessLevel)),a=m.proxy((()=>e.get().accountMetadata)),i=m.proxy((()=>e.get().compatLinkMetadata)),r=m.proxy((()=>e.get().compatLinkPolicy)),o=m.proxy((()=>e.get().linkMetadata)),s=m.proxy((()=>e.get().objectIdentifier)),l=m.proxy((()=>e.get().objectMetadata)),c=m.proxy((()=>e.get().originalCompatLinkPolicy)),d=m.proxy((()=>e.get().sharingPrefs)),g=m.proxy((()=>e.get().isSavable)),f=m.proxy((()=>e.get().isSaving)),p=m.proxy((()=>{const e=l.get(),i=t.get();return n.getCanCreateLink(e,i,a.get().is_tmr_member)})),h=m.proxy((()=>n.getCanDeleteLink(o.get()))),_=m.proxy((()=>{const e=i.get(),t=c.get();return null!==e&&null!==t&&((e,t)=>u.isReadOnlyPolicy(t,e.link_permissions))(e,t)})),y=m.proxy((()=>{const e=i.get();return null===e?null:(t=e,n.isRighteousLink(t.link_permissions));var t})),E=m.proxy((()=>a.get().is_family_user||!1)),b=m.proxy((()=>u.getIsTeam(a.get()))),v=m.proxy((()=>{var e;return null!==(e=a.get().is_freemium_team_member)&&void 0!==e&&e})),w=m.store(!1),k=m.store(!1),S=m.store(!1),C=m.store(!1),M=m.store(!1),T=m.proxy((()=>{const e=l.get(),t=o.get(),a=n.getIsFolder(e),i=n.getIsSharedFolder(e),r=n.getIsCollection(e);return n.getCanUnshareObject(e)&&(!a||i)&&null!==t&&!r}));return{$accessLevel:t,$accountMetadata:a,$compatLinkPolicy:r,$compatLinkMetadata:i,$linkMetadata:o,$objectIdentifier:s,$objectMetadata:l,$originalCompatLinkPolicy:c,$sharingPrefs:d,$isSavable:g,$isSaving:f,$canCreateLink:p,$canDeleteLink:h,$isFamilyUser:E,$isReadOnlyPolicy:_,$isRighteousLink:y,$isTeamUser:b,$isFreemiumTeamMember:v,$isConfirmationModalOpen:w,$isCreatingLink:k,$isDeletingLink:S,$isDowngradeBannerVisible:C,$shouldShowUnshare:T,$isUnshareConfirmationModalOpen:M,$props:e}})),oc=({store:e})=>{const t=s.useIntl(),a=u.usePlatform(),i=e.$objectMetadata.get(),r=$.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]),o=a===u.Platforms.DESKTOP;return $.createElement("div",{style:{display:"flex",alignItems:"center"}},$.createElement("span",null,((e,t,a)=>e.formatMessage({id:"fghTgF",defaultMessage:"Deleted link to <st>{name}</st>."},{st:e=>$.createElement("strong",null,e),name:u.Emstring.em_snippet(t,a?n.SNIPPET_SIZES.DESKTOP_FILENAME:n.SNIPPET_SIZES.FILENAME)}))(t,n.getName(i),o)),$.createElement("span",{style:{flex:"1"}}),$.createElement(n.Button,{variant:"transparent",inverse:!0,onClick:r},(e=>e.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}))(t)))};oc.displayName="DeleteLinkSnackbarMessage";const sc=({store:e})=>{const t=s.useIntl(),a=m.useStore(e.$isSavable),i=m.useStore(e.$isSaving),r=m.useStore(e.$isReadOnlyPolicy),o=m.useStore(e.$shouldShowUnshare),l=m.useStore(e.$objectMetadata),c=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),d=(e=>$.useCallback((()=>{e.$props.get().onSave()}),[e]))(e),u=(e=>$.useCallback((()=>{e.$props.get().onCancel()}),[e]))(e);return $.createElement($.Fragment,null,o?$.createElement($.Fragment,null,$.createElement(n.Button,{variant:"transparent",onClick:c},Hl(t,l)),$.createElement("div",{style:{flex:1}})):null,$.createElement(n.Button,{variant:"opacity",onClick:u},ml(t)),$.createElement(n.Button,{variant:"primary",onClick:d,disabled:i||!a||r},i?gl(t):fl(t)))};sc.displayName="LinkSettingsActions";const lc=({store:e})=>{const t=m.useStore(e.$objectMetadata),a=m.useStore(e.$objectIdentifier),i=m.useStore(e.$isUnshareConfirmationModalOpen),r=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>$.useCallback((()=>e.$props.get().onRefreshModal()),[e]))(e),l=(e=>$.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>$.useCallback((t=>{e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>$.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return $.createElement(ic,{objectMetadata:t,objectIdentifier:a,contentName:n.getName(t),onConfirm:o,onCancel:r,open:i,onRefreshModal:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};lc.displayName="UnshareConfirmationModalWrapper";const cc=({store:e})=>{const t=s.useIntl(),a="editor"===m.useStore(e.$accessLevel)[".tag"]?(e=>e.formatMessage({id:"0daJiL",defaultMessage:"There isnt a link for editing."}))(t):(e=>e.formatMessage({id:"TEAu9g",defaultMessage:"There isnt a link for viewing."}))(t),i=m.useStore(e.$canCreateLink),r=(e=>{const t=u.useEndpoint(ec),a=u.useSnackbar(),i=u.useLogger(),r=s.useIntl();return $.useCallback((async()=>{const o=e.$accessLevel.get(),s=e.$linkMetadata.get(),l=e.$isCreatingLink.get(),c=e.$isDeletingLink.get();if(null!==s||l||c)return;i("SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK",null),e.$isCreatingLink.set(!0);const d=a.showInProgress({intl:r,message:Il(r,o)});i("SHARE_MODAL_SETTINGS__CREATE_LINK_API_START",null);const u=e.$objectIdentifier.get(),m=n.getContentIdOrPathFromObjectIdentifier(u),g=await t({path:m,settings:{access:o}});return await e.$props.get().onRefreshLinksMetadata(),"ERROR"===g.status?(e.$isCreatingLink.set(!1),i("SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR",{response:g}),"shared_link_already_exists"===g.error[".tag"]?void d():"access_denied"===g.error[".tag"]?void a.showFailure({intl:r,message:Al(r)}):void a.showFailure({intl:r,message:xl(r)})):"FATAL"===g.status?(e.$isCreatingLink.set(!1),i("SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL",{response:g}),void a.showFailure({intl:r,message:xl(r)})):(i("SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS",{response:g}),a.showCompleted({intl:r,message:Pl(r,o)}),void e.$isCreatingLink.set(!1))}),[e,t,r,a,i])})(e);return i?$.createElement("span",null,a," ",$.createElement(n.Link,{href:"#",onClick:r,"aria-label":yl(t)},yl(t))):$.createElement("span",null,(e=>e.formatMessage({id:"ZMB2hv",defaultMessage:"Link not available."}))(t))};cc.displayName="CreateLinkSection";const dc=({store:e})=>{const t=s.useIntl();return m.useStore(e.$isCreatingLink)?$.createElement("div",{style:{fontSize:"12px",textAlign:"center"}},(e=>e.formatMessage({id:"6WeHGE",defaultMessage:"Creating link"}))(t)," ",$.createElement("span",{style:{display:"inline-block"}},$.createElement(Ra,null))):$.createElement("div",{style:{fontSize:"12px",paddingTop:"20px",paddingBottom:"20px",lineHeight:"22px",textAlign:"center"}},$.createElement(cc,{store:e}))};dc.displayName="EmptyLinkPolicy";const uc=({store:e})=>{const t=s.useIntl(),a=m.useStore(e.$isConfirmationModalOpen),i=(e=>$.useCallback((()=>{e.$isConfirmationModalOpen.set(!1)}),[e]))(e),r=m.useStore(e.$objectMetadata),o=(e=>{const t=s.useIntl(),a=u.useEndpoint(tc),i=u.useSnackbar(),r=u.useLogger(),o=u.usePlatform();return $.useCallback((async()=>{const s=e.$linkMetadata.get(),l=e.$objectMetadata.get(),c=e.$isDeletingLink.get(),d=o===u.Platforms.DESKTOP;if(c||null===s)return;m.batch((()=>{e.$isConfirmationModalOpen.set(!1),e.$isDeletingLink.set(!0)})),i.showInProgress({intl:t,message:Dl(t,n.getName(l),d)}),r("SHARE_MODAL_SETTINGS__DELETE_LINK_API_START",null);const g=await a({url:s.url});await e.$props.get().onRefreshLinksMetadata(),"SUCCESS"===g.status?(r("SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS",{response:g}),i.showCompleted({intl:t,message:$.createElement(oc,{store:e})})):("ERROR"===g.status?r("SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR",{response:g}):r("SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL",{response:g}),i.showFailure({intl:t,message:Ll(t)})),e.$isDeletingLink.set(!1)}),[e,a,i,r,t,o])})(e),l=u.usePlatform(),c=l!==u.Platforms.DESKTOP;return $.useEffect((()=>{e.$props.get().onConfirmationModalShownChange(a)}),[a,e.$props]),$.createElement(n.Modal,{open:a,isCentered:!0,withCloseButton:c?Ql(t):void 0,onRequestClose:i,"data-testid":"delete-confirmation-modal",overlayStyles:l===u.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},$.createElement(n.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},$.createElement(n.Modal.Title,null,t.formatMessage({id:"hAG2ph",defaultMessage:"Delete link to {object_name}?"},{object_name:u.Emstring.em_snippet(n.getName(r),n.SNIPPET_SIZES.FILENAME)}))),$.createElement(n.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},(e=>e.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."}))(t)),$.createElement(n.Modal.Footer,{"data-sharing-sdk":"1"},$.createElement(n.Button,{variant:"opacity",onClick:i,autoFocus:!0},ml(t)),$.createElement(n.Button,{variant:"primary",onClick:o},(e=>e.formatMessage({id:"2xr+8c",defaultMessage:"Delete"}))(t))))};uc.displayName="DeleteLinkConfirmationModal";const mc=({store:e})=>{const t=s.useIntl(),a=(e=>{const t=m.useStore(e.$accountMetadata),n=m.useStore(e.$isFamilyUser),a=m.useStore(e.$isTeamUser);return t.can_use_extended_sharing_controls||n?null:a?"/team/upgrade":t.is_paid?"/buy/essentials?_tk=sg_pro_bundle_header":"/try/essentials?_tk=sg_pro_bundle_header"})(e),i=((e,t)=>{const n=u.useLogger(),a=u.useOpenUrl();return $.useCallback((()=>{null!==t&&(a(t),n("SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED",{href:t}))}),[t,n,a])})(0,a),r=m.useStore(e.$isTeamUser),o=m.useStore(e.$sharingPrefs),l=m.useStore(e.$isFreemiumTeamMember);if(((e,t)=>{const n=u.useLogger();$.useEffect((()=>{null!==t&&n("SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED",{href:t})}),[t,n])})(0,a),u.usePlatform()===u.Platforms.MS_TEAMS_MOBILE)return null;if(null===a&&!l)return null;const c=$.createElement("div",null,l?t.formatMessage({id:"Ujf2E1",defaultMessage:"These settings arent available in your current plan."}):$.createElement(n.Link,{onClick:i,href:a,target:"_blank",rel:"noopener noreferrer"},((e,t,n)=>{const a=t?n.product_business:n.product_essentials;if("string"==typeof a){const t=s.defineMessage({id:"gh2r5j",defaultMessage:"Upgrade to {product_name} to enable all link settings."});return e.formatMessage(t,{product_name:a})}return e.formatMessage({id:"QYqjgv",defaultMessage:"Upgrade to enable all link settings."})})(t,r,o)));return $.createElement("div",{style:{margin:"15px 0px 24px 0px",borderRadius:"4px",borderTop:"1px solid #e6e8eb",overflow:"hidden"}},$.createElement(Ut,{className:"sharing-settings-modal__banner",type:"default",message:c}))};mc.displayName="LinkSettingsUpsellBanner";const gc=({store:e})=>{const t=s.useIntl(),a=m.useStore(e.$compatLinkMetadata),i=m.useStore(e.$compatLinkPolicy),r=(e=>$.useCallback(((t,a)=>{const i=e.$compatLinkPolicy.get(),r=e.$isRighteousLink.get();"folder"===t.file_type&&r&&a.audience&&(null==i?void 0:i.audience)&&n.isLinkAudienceLowerAccess(a.audience,null==i?void 0:i.audience)&&e.$isDowngradeBannerVisible.set(!0),e.$props.get().onCompatLinkPolicyChange(a)}),[e]))(e),o=(e=>$.useCallback((t=>{e.$props.get().onLinkClicked(t)}),[e]))(e),l=m.useStore(e.$isReadOnlyPolicy),c=m.useStore(e.$isRighteousLink),d=n.getIsPaperDoc(e.$objectMetadata.get());return null===a||null===i||null===c?$.createElement(dc,{store:e}):c?$.createElement(Zl,{isPaperDoc:d,linkMetadata:a,linkPolicy:i,onPolicyUpdate:r,intl:t,onLinkClicked:o,readOnlyPolicy:l,"data-testid":"righteous-link-policy"}):$.createElement(Jl,{isPaperDoc:d,linkMetadata:a,linkPolicy:i,onPolicyUpdate:r,onLinkClicked:o,readOnlyPolicy:l,intl:t,"data-testid":"shmodel-link-policy"})};gc.displayName="LinkSettingsPolicies";const fc=({store:e})=>{const t=s.useIntl(),n=m.useStore(e.$isDowngradeBannerVisible),a=(e=>$.useCallback((()=>{e.$isDowngradeBannerVisible.set(!1)}),[e]))(e),i=(e=>$.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]))(e);return n?$.createElement("div",{style:{marginTop:"16px"}},$.createElement(Va,{header:Nl(t),subheader:$l(t),outlineButtonLabel:Ol(t),transparentButtonLabel:Rl(t),onClickOutlineButton:a,onClickCloseButton:a,onClickTransparentButton:i,showCloseButton:!0})):null};fc.displayName="DowngradeAudienceBanner";const pc=({store:e})=>{const t=s.useIntl(),n=m.useStore(e.$compatLinkPolicy),a=m.useStore(e.$originalCompatLinkPolicy),i=m.useStore(e.$compatLinkMetadata);if(null===i||null===n||null===a)return null;const r=u.getLinkControlPolicyWarningText(a,n,i.link_permissions,t);return r?$.createElement("div",{style:{margin:"15px 0px 24px 0px",borderRadius:"4px",borderTop:"1px solid #e6e8eb",overflow:"hidden"}},$.createElement(Ut,{type:"warn",message:r})):null};pc.displayName="LinkControlPolicyWarning";const hc=({store:e})=>{const t=m.useStore(e.$linkMetadata),a=(e=>$.useCallback((()=>{e.$isConfirmationModalOpen.set(!0),e.$props.get().onConfirmationModalShownChange(!0)}),[e]))(e),i=s.useIntl();return t&&e.$canDeleteLink.get()?$.createElement(n.Button,{variant:"transparent",style:{fontSize:"12px"},onClick:a,"aria-label":_l(i)},_l(i)):null};hc.displayName="LinkCardActions";const _c=({store:e})=>{const t=s.useIntl(),n=m.useStore(e.$accessLevel);return $.createElement("div",{style:{marginTop:"2em",marginBottom:"24px"}},$.createElement(Ht,{icon:"editor"===n[".tag"]?$.createElement(Ha,{variant:"edit","aria-hidden":"true"}):$.createElement(Ha,{variant:"view","aria-hidden":"true"}),title:"editor"===n[".tag"]?pl(t):hl(t),actions:$.createElement(hc,{store:e})},$.createElement(gc,{store:e})))};_c.displayName="LinkSettingsBody";const yc=e=>{const t=rc(e);return $.createElement($.Fragment,null,$.createElement(mc,{store:t}),$.createElement(pc,{store:t}),$.createElement(fc,{store:t}),$.createElement(_c,{store:t}),$.createElement(uc,{store:t}),$.createElement(lc,{store:t}),$.createElement(n.Modal.Footer,null,$.createElement(sc,{store:t})))};yc.displayName="LinkSettings";const Ec=u.define({name:"sharing.updateFilePolicy"},(e=>t=>u.handler(e.sharingAlphaUpdateFilePolicy(t)))),bc=u.define({name:"sharing.updateFolderPolicy"},(e=>t=>u.handler(e.sharingAlphaUpdateFolderPolicyV2(t)))),vc=(e,t,n)=>n?t?e.formatMessage({id:"7q/x94",defaultMessage:"Show who viewed files in this folder to team members and people who can edit."}):e.formatMessage({id:"4WvHo7",defaultMessage:"Show who viewed this file to team members and people who can edit."}):t?e.formatMessage({id:"6+ghYo",defaultMessage:"Show whos viewing files in this folder to people who can edit."}):e.formatMessage({id:"ikqTVO",defaultMessage:"Show whos viewing this file to people who can edit."}),wc=(e,t)=>t?e.formatMessage({id:"PnplKf",defaultMessage:"Limit who can be added as a member of folders."}):e.formatMessage({id:"tIVUrd",defaultMessage:"Limit who can be added as a member of this folder."}),kc=(e,t)=>t?e.formatMessage({id:"DOny3W",defaultMessage:"Choose who can add people to folders."}):e.formatMessage({id:"j6WPfe",defaultMessage:"Choose who can add people to this folder."}),Sc=e=>({getPolicyDict(t,a,i){switch(t){case Ct:return{title:e.formatMessage({id:"fP66/I",defaultMessage:"Folder membership"}),description:wc(e,n.getOwnerTeam(i)),optionsDict:{anyone:{label:e.formatMessage({id:"fCoK4r",defaultMessage:"Anyone"})},team:{label:e.formatMessage({id:"7OP28A",defaultMessage:"Only team members"})}},type:Nt};case Mt:return{title:e.formatMessage({id:"FNEmDZ",defaultMessage:"Viewer info"}),description:vc(e,a,n.getOwnerTeam(i)),optionsDict:{enabled:{label:e.formatMessage({id:"2QJJN/",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"bxF53X",defaultMessage:"Off"}),value:!1}},type:$t};case Pt:return{title:e.formatMessage({id:"Pf7Gdo",defaultMessage:"Manage access"}),description:kc(e,n.getOwnerTeam(i)),optionsDict:{editors:{label:n.getIsTeamFolderTree(i)||n.getIsTeamMemberFolder(i)?e.formatMessage({id:"FSMn0f",defaultMessage:"Team members who can edit"}):e.formatMessage({id:"Y/OGdX",defaultMessage:"Folder members"}),description:n.getIsTeamFolderTree(i)||n.getIsTeamMemberFolder(i)?e.formatMessage({id:"uIRufc",defaultMessage:"Team members with edit access can add people."}):e.formatMessage({id:"fFxXXV",defaultMessage:"Members with edit access can add people."})},owner:{label:n.getIsTeamFolderTree(i)?e.formatMessage({id:"WFlZYD",defaultMessage:"Only Team Admins"}):e.formatMessage({id:"S2dbUj",defaultMessage:"Only the owner"}),description:n.getIsTeamFolderTree(i)?e.formatMessage({id:"SQ8IGZ",defaultMessage:"Only Team Admins."}):e.formatMessage({id:"FXj04X",defaultMessage:"Only the owner can add people."})}},type:Nt};case Tt:if(!n.getOwnerTeam(i))throw new Error("Policy only valid for teams");return"team"===n.getLinkAudiencePolicy(i)?((e,t)=>{if(!t)throw new Error("Policy only valid for teams");return{title:e.formatMessage({id:"2/keN+",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"hQVplF",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:e.formatMessage({id:"M2hohn",defaultMessage:"No restrictions"}),description:e.formatMessage({id:"VWGUB4",defaultMessage:"Show all access options for links."})},members:{label:e.formatMessage({id:"fJsIEz",defaultMessage:"Invite-only"}),description:e.formatMessage({id:"w/Er4c",defaultMessage:"Show Only invited members only."})},team:{label:e.formatMessage({id:"BhDP0/",defaultMessage:"Team only"}),description:e.formatMessage({id:"p/lywD",defaultMessage:"Show Only people at {team_name}."},{team_name:u.Emstring.em_snippet(t.name,12)})}},type:Nt}})(e,n.getOwnerTeam(i)):{title:e.formatMessage({id:"rAsVLm",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"HdBdUS",defaultMessage:"Prevent non-members from accessing this folder via link."}),optionsDict:{members:{label:e.formatMessage({id:"Vz90Vu",defaultMessage:"On"}),value:!0},anyone:{label:e.formatMessage({id:"lcDiuF",defaultMessage:"Off"}),value:!1}},type:$t};default:throw new Error("Policy name not found")}}}),Cc=e=>{const{isPolicyEnabled:t,canDisableViewerInfo:n,canEnableViewerInfo:a}=e;return t?n:a},Mc=e=>{const{isPolicyEnabled:t,onPolicyChange:n}=e,a=t?"enabled":"disabled",i=Tc({...e})(Mt);return $.createElement(Ea,{currentValue:a,optionsDict:i.optionsDict,onOptionChange:(e,t)=>{n(e)},disabled:!Cc(e),ariaLabel:i.title})},Tc=e=>{const{intl:t,isFolder:n,objectMetadata:a}=e,i=Sc(t);return e=>i.getPolicyDict(e,n,a)},Dc=e=>{const t=$.createElement(Mc,{...e}),n=Tc({...e})(Mt);return $.createElement(_a,{policyName:Mt,policyDict:n,selector:t})},Lc=e=>{const{currentPolicy:t,onPolicyChange:a,disabled:i}=e,r=Ic({...e})(Ct);return $.createElement(Ft,{currentValue:t,optionsDict:r.optionsDict,valuesList:Object.keys(r.optionsDict),onValueSelected:e=>{const t=n.create(e);a(t)},disabled:i,ariaLabel:r.title})},Ic=e=>{const{intl:t,isFolder:n,objectMetadata:a}=e,i=Sc(t);return e=>i.getPolicyDict(e,n,a)},Ac=e=>{const t=$.createElement(Lc,{...e}),n=Ic({...e})(Ct);return $.createElement(_a,{policyName:Ct,policyDict:n,selector:t})},xc=e=>{const{currentPolicy:t,onPolicyChange:a,disabled:i}=e,r=Pc({...e})(Pt);return $.createElement(Ft,{currentValue:t,optionsDict:r.optionsDict,valuesList:Object.keys(r.optionsDict),onValueSelected:e=>{const t=n.create(e);a(t)},disabled:i,ariaLabel:r.title})},Pc=e=>{const{intl:t,isFolder:n,objectMetadata:a}=e,i=Sc(t);return e=>i.getPolicyDict(e,n,a)},Nc=e=>{const t=$.createElement(xc,{...e}),n=Pc({...e})(Pt);return $.createElement(_a,{policyName:Pt,policyDict:n,selector:t})},$c=e=>{const{intl:t,isFolder:n,objectMetadata:a}=e,i=Sc(t);return e=>i.getPolicyDict(e,n,a)},Oc=e=>{const{currentPolicy:t,disabled:n,onPolicyChange:a,resolvedMemberPolicy:i}=e,r=$c({...e})(Tt),o=r.optionsDict;return"team"===i?$.createElement(Ft,{currentValue:t,optionsDict:o,valuesList:Object.keys(o),onValueSelected:e=>{a(e)},disabled:n,ariaLabel:r.title}):$.createElement(Ea,{currentValue:t,optionsDict:o,onOptionChange:(e,t)=>{a(e?"members":"anyone")},disabled:n,ariaLabel:r.title})},Rc=e=>{const t=$.createElement(Oc,{...e}),n=$c({...e})(Tt);return $.createElement(_a,{policyName:Tt,policyDict:n,selector:t})},Uc=({store:e})=>{const{msg:t,bannerType:a}=(e=>{const t=s.useIntl(),a=m.useStore(e.$canChangeOptions),i=m.useStore(e.$viewerInfoPolicyEnabled),r=m.useStore(e.$objectMetadata);return $.useMemo((()=>{if(a)return{msg:Tl(t),bannerType:"default"};let e;if(i){const t=n.getPermissionInfo(r,n.DISABLE_VIEWER_INFO_TAG);e=t?t.reason:""}else{const t=n.getPermissionInfo(r,n.ENABLE_VIEWER_INFO_TAG);e=t?t.reason:""}switch(e){case"restricted_by_parent_folder":return{msg:Sl(t),bannerType:"error"};case"restricted_by_team":return{msg:Cl(t),bannerType:"error"};default:return{msg:Ml(t),bannerType:"error"}}}),[a,i,r,t])})(e);return $.createElement("div",{style:{margin:"15px 24px 24px 24px",borderRadius:"4px",borderTop:"1px solid #e6e8eb",overflow:"hidden"}},$.createElement(Ut,{type:a,message:t}))};Uc.displayName="FileSettingsBanner";const Fc=({store:e})=>{const t=(e=>{const t=s.useIntl(),a=m.useStore(e.$canChangeOptions),i=m.useStore(e.$objectMetadata),r=m.useStore(e.$accountMetadata),o=u.useOpenUrl();return $.useMemo((()=>{const e=r.team_id===n.getOwnerTeamId(i);return n.getIsTeamSharedFolder(i)&&e?u.getIsTeamAdmin(r)?{msg:ql(t,n.getName(i)),actionMsg:Vl(t,o)}:{msg:Wl(t,n.getName(i)),actionMsg:Yl(t,o)}:n.getIsInsideTeamFolderTree(i)?e?{msg:Wl(t,n.getName(i)),actionMsg:Yl(t,o)}:{msg:zl(t,n.getName(i))}:a?void 0:{msg:zl(t,n.getName(i))}}),[r,i,a,t,o])})(e),a=(e=>{const t=s.useIntl(),a=m.useStore(e.$canChangeOptions),i=m.useStore(e.$objectMetadata),r=m.useStore(e.$accountMetadata),o=$.useMemo((()=>u.convertAccountMetadataToUser(r)),[r]);return $.useMemo((()=>{if(a&&!o.is_team_admin)return n.getIsInsideTeamFolderTree(i)?{msg:Kl(t),bannerType:"error"}:n.getIsOwner(i)?{msg:Gl(t,n.getName(i))}:{msg:zl(t,n.getName(i))}}),[a,o.is_team_admin,i,t])})(e);return $.createElement("div",{style:{margin:"24px 24px 24px 24px",borderRadius:"4px",borderTop:"1px solid #e6e8eb",overflow:"hidden"}},t&&$.createElement(n.Banner,{type:"attention","data-testid":"dig-banner"},$.createElement(n.Banner.Message,null,t.msg),$.createElement(n.Banner.Actions,null,t.actionMsg)),a&&$.createElement(n.Banner,{type:"error"===(null==a?void 0:a.bannerType)?"alert":"attention","data-testid":"dig-banner"},$.createElement(n.Banner.Message,null,a.msg)))};Fc.displayName="FolderSettingsBanner";const Bc=e=>$.useCallback((t=>{e.$viewerInfoPolicyEnabledUpdated.set(t)}),[e]),jc=({store:e})=>{const t=s.useIntl(),a=m.useStore(e.$objectMetadata),i=m.useStore(e.$viewerInfoPolicyEnabledUpdated),r=m.useStore(e.$memberPolicyUpdated),o=m.useStore(e.$aclUpdatePolicyUpdated),l=m.useStore(e.$linkAudiencePolicyUpdated),c=m.useStore(e.$resolvedMemberPolicy),d=m.useStore(e.$canDisableViewerInfo),u=m.useStore(e.$canEnableViewerInfo),g=m.useStore(e.$canChangeOptions),f="members"===m.useStore(e.$blanketLinkRestrictionsPolicy),p=m.useStore(e.$isFreemiumTeamMember),h=Bc(e),_=(e=>$.useCallback((t=>{e.$memberPolicyUpdated.set(t[".tag"])}),[e]))(e),y=(e=>$.useCallback((t=>{e.$aclUpdatePolicyUpdated.set(t[".tag"])}),[e]))(e),E=(e=>$.useCallback((t=>{e.$linkAudiencePolicyUpdated.set(t)}),[e]))(e);return $.createElement("div",{style:{marginTop:"24px",marginBottom:"24px",borderLeft:"24px solid transparent",borderRight:"24px solid transparent"}},n.getOwnerTeam(a)&&$.createElement(Ac,{intl:t,isFolder:!1,currentPolicy:r,objectMetadata:a,onPolicyChange:_,disabled:!g}),$.createElement(Nc,{intl:t,isFolder:!1,currentPolicy:o,objectMetadata:a,onPolicyChange:y,disabled:!g}),n.getOwnerTeam(a)&&$.createElement(Rc,{intl:t,currentPolicy:l,resolvedMemberPolicy:c,onPolicyChange:E,disabled:!g||f||p,isFolder:!1,objectMetadata:a}),$.createElement(Dc,{intl:t,isFolder:!1,isPolicyEnabled:i,canDisableViewerInfo:d,canEnableViewerInfo:u,onPolicyChange:h,objectMetadata:a}))};jc.displayName="FolderSettingsPolicies";const Hc=({store:e})=>{const t=s.useIntl(),n=m.useStore(e.$objectMetadata),a=m.useStore(e.$viewerInfoPolicyEnabledUpdated),i=m.useStore(e.$canDisableViewerInfo),r=m.useStore(e.$canEnableViewerInfo),o=Bc(e);return $.createElement("div",{style:{marginTop:"24px",marginBottom:"24px",borderLeft:"24px solid transparent",borderRight:"24px solid transparent"}},$.createElement(Dc,{intl:t,isFolder:!1,isPolicyEnabled:a,canDisableViewerInfo:i,canEnableViewerInfo:r,objectMetadata:n,onPolicyChange:o}))};Hc.displayName="FileSettingsPolicies";const qc=e=>$.useCallback((()=>e.$props.get().onRefreshModal()),[e]),Vc=({store:e})=>{const t=s.useIntl(),a=(e=>$.useCallback((()=>{e.$props.get().onCancelled()}),[e]))(e),i=m.useStore(e.$isSubmitting),r=m.useStore(e.$hasPolicyChanged),o=m.useStore(e.$shouldShowUnshare),l=m.useStore(e.$objectMetadata),c=m.useStore(e.$isUnshareDisabled),d=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),g=(e=>{const t=s.useIntl(),a=u.useEndpoint(Ec),i=u.useEndpoint(bc),r=u.useEndpoint(u.shareFolder),o=u.useEndpoint(u.checkShareInternalJobStatus),l=u.useSnackbar(),c=u.useLogger(),d=qc(e);return $.useCallback((async()=>{var s;if(e.$hasPolicyChanged.get()){let m=e.$objectMetadata.get();const g=e.$objectIdentifier.get();if("file_folder"===g[".tag"]){e.$isSubmitting.set(!0);const n={path:g.path};l.showInProgress({intl:t,message:vl(t)});const a=await r(n);if("SUCCESS"===a.status){if("complete"===a.output[".tag"])await e.$props.get().onObjectIdentifierChanged({".tag":"shared_folder",sharedFolderId:a.output.shared_folder_id});else if("async_job_id"===a.output[".tag"]){const t=a.output.async_job_id,n=await u.poll((async()=>{const e={async_job_id:t},n=await o(e);return"SUCCESS"===n.status&&"in_progress"===n.output[".tag"]?{status:"RETRY"}:{status:"COMPLETE",output:n}}),{interval:1e3,timeout:3e4});"COMPLETE"===n.status&&"SUCCESS"===(null===(s=n.output)||void 0===s?void 0:s.status)&&"complete"===n.output.output[".tag"]&&await e.$props.get().onObjectIdentifierChanged({".tag":"shared_folder",sharedFolderId:n.output.output.shared_folder_id})}}else"ERROR"===a.status&&("bad_path"===a.error[".tag"]&&"already_shared"===a.error.bad_path[".tag"]?await e.$props.get().onObjectIdentifierChanged({".tag":"shared_folder",sharedFolderId:a.error.bad_path.shared_folder_id}):"no_permission"===a.error[".tag"]&&(e.$isSubmitting.set(!1),l.showFailure({intl:t,message:wl(t)})));await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),m=e.$objectMetadata.get()}if(n.getIsFile(m)){e.$isSubmitting.set(!0),c("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_START",null);const i=await a({file:n.isNewApiMetadata(m)?"":m.id,actions:[n.CHANGE_OPTIONS_TAG,n.CREATE_VIEW_LINK_TAG,n.CREATE_EDIT_LINK_TAG,n.DISABLE_VIEWER_INFO_TAG,n.ENABLE_VIEWER_INFO_TAG,n.INVITE_VIEWER_TAG,n.INVITE_EDITOR_TAG,n.INVITE_VIEWER_NO_COMMENT_TAG,n.RELINQUISH_MEMBERSHIP_TAG,n.REMOVE_DOWNLOAD_POLICY_TAG,n.SET_DOWNLOAD_POLICY_TAG,n.UNSHARE_TAG,n.SHARE_MESSAGE_AS_COMMENT_TAG],viewer_info_policy:e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}});await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),"SUCCESS"===i.status?(c("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_SUCCESS",null),l.showCompleted({intl:t,message:bl(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved()):("ERROR"===i.status?c("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_ERROR",{error:i.error}):c("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_FATAL",{error:i.error}),l.showFailure({intl:t,message:El(t)}),e.$isSubmitting.set(!1))}else if(n.getIsSharedFolder(m)){e.$isSubmitting.set(!0),c("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_START",null);const a=await i({shared_folder_id:m.shared_folder_id,actions:[n.CHANGE_OPTIONS_TAG,n.DISABLE_VIEWER_INFO_TAG,n.ENABLE_VIEWER_INFO_TAG,n.INVITE_VIEWER_TAG,n.INVITE_EDITOR_TAG,n.INVITE_VIEWER_NO_COMMENT_TAG,n.RELINQUISH_MEMBERSHIP_TAG,n.REMOVE_DOWNLOAD_POLICY_TAG,n.SET_DOWNLOAD_POLICY_TAG,n.UNSHARE_TAG],viewer_info_policy:e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"},member_policy:n.getOwnerTeam(m)?{".tag":e.$memberPolicyUpdated.get()}:void 0,shared_link_policy:{".tag":e.$linkAudiencePolicyUpdated.get()},acl_update_policy:{".tag":e.$aclUpdatePolicyUpdated.get()}});await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),"SUCCESS"===a.status?(c("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_SUCCESS",null),l.showCompleted({intl:t,message:kl(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved(),await Promise.resolve(d())):("ERROR"===a.status?c("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_ERROR",{error:a.error}):c("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_FATAL",{error:a.error}),l.showFailure({intl:t,message:El(t)}),e.$isSubmitting.set(!1))}}}),[e,a,i,l,c,t,d,r,o])})(e);return $.createElement($.Fragment,null,o?$.createElement($.Fragment,null,c?$.createElement(n.Tooltip,{title:Xl(t),placement:"right",maxWidth:125},$.createElement(n.Box,{style:{marginLeft:0,marginRight:"auto"}},$.createElement(n.Button,{variant:"transparent",onClick:d,disabled:c},Hl(t,l)))):$.createElement(n.Button,{variant:"transparent",onClick:d,disabled:c},Hl(t,l)),$.createElement("div",{style:{flex:1}})):null,$.createElement(n.Button,{variant:"opacity",onClick:a},ml(t)),$.createElement(n.Button,{variant:"primary",disabled:!r||i,onClick:g},i?gl(t):fl(t)))};Vc.displayName="ObjectSettingsActions";const Wc=({store:e})=>{const t=m.useStore(e.$objectMetadata),a=m.useStore(e.$objectIdentifier),i=m.useStore(e.$isUnshareConfirmationModalOpen),r=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>$.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=qc(e),l=(e=>$.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>$.useCallback((t=>{e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>$.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return $.createElement(ic,{objectMetadata:t,objectIdentifier:a,contentName:n.getName(t),onConfirm:o,onCancel:r,open:i,onRefreshModal:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};Wc.displayName="UnshareConfirmationModalWrapper";const Yc=e=>{const t=(e=>m.useInitStore(e,(e=>{const t=m.proxy((()=>e.get().objectIdentifier)),a=m.proxy((()=>e.get().objectMetadata)),i=m.proxy((()=>e.get().accountMetadata)),r=m.proxy((()=>e.get().linksMetadata)),o=m.proxy((()=>e.get().members)),s=m.proxy((()=>n.getIsFolder(a.get()))),l=m.store(!1),c=m.proxy((()=>n.getCanChangeOptions(a.get()))),d=m.proxy((()=>n.getCanEnableViewerInfo(a.get()))),u=m.proxy((()=>n.getCanDisableViewerInfo(a.get()))),g=m.proxy((()=>n.getLinkAudiencePolicy(a.get()))),f=m.proxy((()=>n.getViewerInfoPolicyEnabled(a.get()))),p=m.store(f.get()),h=m.proxy((()=>{const e=a.get();return n.isNewApiMetadata(e)?null:e.owner_team_policies||null})),_=m.proxy((()=>{var e;return null===(e=h.get())||void 0===e?void 0:e.shared_folder_link_restriction_policy[".tag"]})),y=m.proxy((()=>"members"===_.get()?"members":n.getLinkAudiencePolicy(a.get()))),E=m.store(y.get()),b=m.proxy((()=>{var e;const t=null===(e=n.getFolderPolicy(a.get()))||void 0===e?void 0:e.member_policy;return t?t[".tag"]:"other"})),v=m.store(b.get()),w=m.proxy((()=>{var e;const t=null===(e=n.getFolderPolicy(a.get()))||void 0===e?void 0:e.acl_update_policy;return t?t[".tag"]:"other"})),k=m.store(w.get()),S=m.proxy((()=>f.get()!==p.get()||b.get()!==v.get()||w.get()!==k.get()||y.get()!==E.get())),C=m.proxy((()=>{const e=a.get(),t=n.getIsFolder(e),i=n.getIsSharedFolder(e),r=n.getIsCollection(e);return n.getCanUnshareObject(e)&&(!t||i)&&!r})),M=m.proxy((()=>{const e=r.get(),t=o.get(),s=a.get(),l=n.getIsFolder(s),c=0!==e.links.length;if(!l&&!c){const e=t.invitees.length+t.groups.length+t.users.length;if(!e)return!0;if(1===e&&1===t.users.length){const e=t.users[0],n=i.get();return e.user.account_id===n.account_id}return!1}return!1})),T=m.store(!1),D=m.proxy((()=>{var e;return null!==(e=i.get().is_freemium_team_member)&&void 0!==e&&e}));return{$objectIdentifier:t,$objectMetadata:a,$accountMetadata:i,$linksMetadata:r,$members:o,$canChangeOptions:c,$isSubmitting:l,$resolvedMemberPolicy:g,$viewerInfoPolicyEnabled:f,$isFolder:s,$viewerInfoPolicyEnabledUpdated:p,$memberPolicy:b,$memberPolicyUpdated:v,$aclUpdatePolicy:w,$aclUpdatePolicyUpdated:k,$linkAudiencePolicy:y,$linkAudiencePolicyUpdated:E,$canEnableViewerInfo:d,$canDisableViewerInfo:u,$hasPolicyChanged:S,$isUnshareConfirmationModalOpen:T,$shouldShowUnshare:C,$blanketLinkRestrictionsPolicy:_,$isUnshareDisabled:M,$isFreemiumTeamMember:D,$props:e}})))(e),a=t.$isFolder.get();return $.createElement($.Fragment,null,a?$.createElement($.Fragment,null,$.createElement(Fc,{store:t}),$.createElement(jc,{store:t})):$.createElement($.Fragment,null,$.createElement(Uc,{store:t}),$.createElement(Hc,{store:t})),$.createElement(n.Modal.Footer,null,$.createElement(Vc,{store:t})),$.createElement(Wc,{store:t}))};Yc.displayName="ObjectSettings";const Gc={".tag":"editor"},zc={".tag":"viewer"},Kc="object_settings",Qc="edit_link_settings",Xc="view_link_settings",Zc=e=>{const t=s.useIntl(),n=u.useSnackbar(),a=u.useLogger(),i=u.useEndpoint(rl);return $.useCallback((async()=>{if(!e.$hasUnsavedLinkChanges.get())return!0;let r=null;const o=e.$viewLinkCompatMetadata.get(),s=e.$viewLinkCompatPolicy.get(),l=e.$viewLinkCompatPolicyDraft.get();null!==o&&null!==s&&null!==l&&(r=sl(t,o,s,l));let c=null;const d=e.$editLinkCompatMetadata.get(),u=e.$editLinkCompatPolicy.get(),m=e.$editLinkCompatPolicyDraft.get();if(null!==d&&null!==u&&null!==m&&(c=sl(t,d,u,m)),r&&"error"in r)return n.showFailure({intl:t,message:r.error}),!1;if(c&&"error"in c)return n.showFailure({intl:t,message:c.error}),!1;const g=[...null===r?[]:[r],...null===c?[]:[c]];if(0===g.length)return e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),!0;e.$isUpdatingLinkSettings.set(!0),r&&s&&l&&s.audience&&l.audience&&s.audience!==l.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:zc,previous:ol(s.audience),next:ol(l.audience)}),c&&u&&m&&u.audience&&m.audience&&u.audience!==m.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:Gc,previous:ol(u.audience),next:ol(m.audience)});const f=await Promise.all([...g.map((e=>i((e=>{const t={url:e.url,remove_expiration:e.remove_expiration,settings:{}};return e.settings.access&&(t.settings.access={".tag":e.settings.access}),void 0!==e.settings.allow_download&&(t.settings.allow_download=e.settings.allow_download),e.settings.audience&&(t.settings.audience={".tag":e.settings.audience}),e.settings.expires&&(t.settings.expires=e.settings.expires),e.settings.link_password&&(t.settings.link_password=e.settings.link_password),void 0!==e.settings.require_password&&(t.settings.require_password=e.settings.require_password),t})(e))))]);return await e.$props.get().onRefreshLinksMetadata(),e.$isUpdatingLinkSettings.set(!1),f.every((e=>"SUCCESS"===e.status))?(e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),n.showCompleted({intl:t,message:Ul(t)}),!0):(n.showFailure({intl:t,message:xl(t)}),!1)}),[e,t,i,n,a])},Jc=e=>$.useCallback((async()=>{await e.$props.get().onRefreshObjectMetadata()}),[e]),ed=e=>$.useCallback((async()=>{await e.$props.get().onRefreshModal()}),[e]),td=e=>$.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]),nd=e=>$.useCallback((async()=>{e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),await e.$props.get().onRefreshLinksMetadata()}),[e]),ad=e=>{const t=Zc(e);return $.useCallback((async()=>{await t()&&e.$props.get().onManageLinkAccess()}),[e,t])},id=e=>{const t=Zc(e);return $.useCallback((async()=>{await t()&&e.$props.get().onComplete(!0)}),[e,t])},rd=e=>$.useCallback((()=>{e.$props.get().onCancel(!0)}),[e]),od=e=>$.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]),sd=e=>{const t=u.useOpenUrl();return $.useCallback((e=>{t(e)}),[t])},ld=e=>$.useCallback((()=>{e.$props.get().onClose()}),[e]),cd=(e,t)=>$.useCallback((n=>{"editor"===t[".tag"]?e.$editLinkCompatPolicyDraft.set(n):"viewer"===t[".tag"]&&e.$viewLinkCompatPolicyDraft.set(n)}),[e,t]),dd=({store:e})=>{const t=m.useStore(e.$objectIdentifier),n=m.useStore(e.$objectMetadata),a=m.useStore(e.$accountMetadata),i=m.useStore(e.$linksMetadata),r=m.useStore(e.$members),o=(e=>$.useCallback((()=>{e.$props.get().onCancel(!1)}),[e]))(e),s=(e=>$.useCallback((()=>{e.$props.get().onComplete(!1)}),[e]))(e),l=Jc(e),c=td(e),d=(e=>$.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),u=ed(e),g=od(e);return $.createElement(Yc,{objectIdentifier:t,objectMetadata:n,accountMetadata:a,linksMetadata:i,members:r,onClose:d,onSaved:s,onCancelled:o,onRefreshObjectMetadata:l,onObjectIdentifierChanged:c,onRefreshModal:u,onConfirmationModalShownChange:g})};dd.displayName="ObjectSettingsWrapper";const ud=({store:e})=>{const t=Gc,n=m.useStore(e.$accountMetadata),a=m.useStore(e.$editLinkCompatMetadata),i=m.useStore(e.$editLinkCompatPolicy),r=m.useStore(e.$editLinkCompatPolicyDraft),o=m.useStore(e.$editLinkMetadata),s=m.useStore(e.$objectIdentifier),l=m.useStore(e.$objectMetadata),c=m.useStore(e.$sharingPrefs),d=m.useStore(e.$hasUnsavedLinkChanges),u=m.useStore(e.$isUpdatingLinkSettings),g=id(e),f=rd(e),p=sd(),h=nd(e),_=cd(e,Gc),y=ad(e),E=Jc(e),b=td(e),v=od(e),w=ed(e),k=ld(e);return $.createElement(yc,{accountMetadata:n,accessLevel:t,compatLinkMetadata:a,compatLinkPolicy:r||i,originalCompatLinkPolicy:i,linkMetadata:o,objectIdentifier:s,objectMetadata:l,sharingPrefs:c,isSavable:d,isSaving:u,onSave:g,onCancel:f,onOpenManageAccess:y,onLinkClicked:p,onRefreshLinksMetadata:h,onCompatLinkPolicyChange:_,onObjectIdentifierChanged:b,onRefreshObjectMetadata:E,onRefreshModal:w,onClose:k,onConfirmationModalShownChange:v})};ud.displayName="EditLinkSettingsWrapper";const md=({store:e})=>{const t=zc,n=m.useStore(e.$accountMetadata),a=m.useStore(e.$viewLinkCompatMetadata),i=m.useStore(e.$viewLinkCompatPolicy),r=m.useStore(e.$viewLinkCompatPolicyDraft),o=m.useStore(e.$viewLinkMetadata),s=m.useStore(e.$objectMetadata),l=m.useStore(e.$objectIdentifier),c=m.useStore(e.$sharingPrefs),d=m.useStore(e.$hasUnsavedLinkChanges),u=m.useStore(e.$isUpdatingLinkSettings),g=id(e),f=rd(e),p=sd(),h=nd(e),_=cd(e,zc),y=ad(e),E=Jc(e),b=td(e),v=ed(e),w=ld(e),k=od(e);return $.createElement(yc,{accountMetadata:n,accessLevel:t,compatLinkMetadata:a,compatLinkPolicy:r||i,originalCompatLinkPolicy:i,linkMetadata:o,objectIdentifier:l,objectMetadata:s,sharingPrefs:c,isSavable:d,isSaving:u,onSave:g,onCancel:f,onLinkClicked:p,onOpenManageAccess:y,onRefreshLinksMetadata:h,onCompatLinkPolicyChange:_,onObjectIdentifierChanged:b,onRefreshObjectMetadata:E,onRefreshModal:v,onClose:w,onConfirmationModalShownChange:k})};md.displayName="ViewLinkSettingsWrapper";const gd=({store:e})=>{const t=s.useIntl(),a=m.useStore(e.$currentTab),i=m.useStore(e.$objectMetadata),r=m.useStore(e.$shouldShowViewLinkTab),o=m.useStore(e.$shouldShowEditLinkTab),l=m.useStore(e.$shouldShowObjectSettingsTab),c=(e=>{const t=u.useLogger();return $.useCallback((a=>{e.$currentTab.set(a),t("SHARE_MODAL_SETTINGS__TAB_CHANGE",{selected_tab:ul(a,n.getIsFile(e.$objectMetadata.get()))})}),[e,t])})(e),d=n.getIsFile(i),g=u.useLogger();return $.useEffect((()=>{const t=ul(a,n.getIsFile(e.$objectMetadata.get()));g("SHARE_MODAL_SETTINGS__PAGE_VIEW",{selected_tab:t})}),[]),$.createElement($.Fragment,null,$.createElement(D.Tabs,{selectedTab:a,onSelection:c},$.createElement(D.Tabs.Group,{variant:"justified"},l?$.createElement(D.Tabs.Tab,{id:Kc,key:Kc},d?t.formatMessage({id:"TdlC4Q",defaultMessage:"File settings"}):t.formatMessage({id:"jR9e/q",defaultMessage:"Folder settings"})):null,o?$.createElement(D.Tabs.Tab,{id:Qc,key:Qc},t.formatMessage({id:"DIbS2E",defaultMessage:"Link for editing"})):null,r?$.createElement(D.Tabs.Tab,{id:Xc,key:Xc},t.formatMessage({id:"rvYosE",defaultMessage:"Link for viewing"})):null),$.createElement($.Fragment,null,l?$.createElement(D.Tabs.Panel,{tabId:Kc,key:Kc},$.createElement(dd,{store:e})):null,o?$.createElement(D.Tabs.Panel,{tabId:Qc,key:Qc},$.createElement(ud,{store:e})):null,r?$.createElement(D.Tabs.Panel,{tabId:Xc,key:Xc},$.createElement(md,{store:e})):null)))};gd.displayName="ShareModalSettingsInner";const fd=e=>{const t=(e=>{const t=s.useIntl();return m.useInitStore(e,(e=>{const a=m.proxy((()=>e.get().accountMetadata)),i=m.proxy((()=>e.get().linksMetadata)),r=m.proxy((()=>e.get().objectMetadata)),o=m.proxy((()=>e.get().objectIdentifier)),s=m.proxy((()=>e.get().sharingPrefs)),l=m.proxy((()=>e.get().members)),c=m.proxy((()=>n.getByAccessLevel(e.get().linksMetadata,{".tag":"editor"}))),d=m.proxy((()=>cl(r.get(),c.get()))),u=m.proxy((()=>dl(t,d.get()))),g=m.store(null),f=m.proxy((()=>n.getByAccessLevel(e.get().linksMetadata,{".tag":"viewer"}))),p=m.proxy((()=>cl(r.get(),f.get()))),h=m.proxy((()=>dl(t,p.get()))),_=m.store(null),y=m.proxy((()=>null!==_.get()||null!==g.get())),E=e=>{let t;if(e===Gc)t=c;else{if(e!==zc)return!1;t=f}const i=null!==t.get(),o=n.getCanCreateLink(r.get(),e,a.get().is_tmr_member);return n.getIsConfidentialFolder(r.get())||i||o},b=n.getIsLinkOnlyMode(r.get()),v=m.proxy((()=>!b&&E(Gc))),w=m.proxy((()=>E(zc))),k=m.proxy((()=>!(n.getIsCollection(r.get())||n.getIsLinkOnlyMode(r.get())))),S=m.store(!1),C=m.store(Kc);return e.get().initialTab===Qc&&v.get()?C.set(Qc):e.get().initialTab===Xc&&w.get()&&C.set(Xc),{$accountMetadata:a,$linksMetadata:i,$objectMetadata:r,$objectIdentifier:o,$sharingPrefs:s,$members:l,$editLinkMetadata:c,$editLinkCompatMetadata:d,$editLinkCompatPolicy:u,$editLinkCompatPolicyDraft:g,$viewLinkMetadata:f,$viewLinkCompatMetadata:p,$viewLinkCompatPolicy:h,$viewLinkCompatPolicyDraft:_,$hasUnsavedLinkChanges:y,$shouldShowEditLinkTab:v,$shouldShowViewLinkTab:w,$shouldShowObjectSettingsTab:k,$isUpdatingLinkSettings:S,$currentTab:C,$props:e}}))})(e);return $.createElement(gd,{store:t})};fd.displayName="ShareModalSettings";const pd=()=>$.createElement("div",{style:{height:"200px",padding:"64px 0px 64px 0px"}},$.createElement(n.Interstitial,{in:!0,isIndeterminate:!0,onComplete:()=>{}}));pd.displayName="LoadingState";const hd=()=>$.createElement("div",null,"Err");hd.displayName="ErrorState";const _d=e=>{const t=n.useLegacySharingObjectMetadata(e.objectIdentifier),a=n.useObjectMembers(e.objectIdentifier),i=g.useListSharedLinks(e.objectIdentifier),r=n.useSharingPrefs(),o=u.useSharingAccountInfo(),s=$.useCallback((()=>n.invalidateSharingObjectMetadata(e.objectIdentifier)),[e.objectIdentifier]),l=$.useCallback((()=>g.invalidateListSharedLinks(e.objectIdentifier)),[e.objectIdentifier]);if(t.isLoading)return $.createElement(pd,null);if(t.isError)return $.createElement(hd,null);const c=t.output;if(!a.isFirstPageLoaded)return $.createElement(pd,null);if(a.hadContinuationError)return $.createElement(hd,null);if(!a.isFirstPageOnly&&a.isLoading)return $.createElement(pd,null);const d=a.isFirstPageOnly?a.firstPage:a.allMembers;if(i.isLoading)return $.createElement(pd,null);if(i.isError)return $.createElement(hd,null);const m=i.output;if(r.isLoading)return $.createElement(pd,null);if(r.isError)return $.createElement(hd,null);const f=r.data.apiData;if(o.isLoading)return $.createElement(pd,null);if(o.isError)return $.createElement(hd,null);const p=o.output;return $.createElement(fd,{accountMetadata:p,linksMetadata:m,objectMetadata:c,sharingPrefs:f,members:d,onRefreshObjectMetadata:s,onRefreshLinksMetadata:l,...e})};_d.displayName="SettingsPageWithoutCss";const yd=n.requireCssWithComponent(_d,["/static/typescript/component_libraries/spectrum-sharing/src/index.web-vflLHhQkG.css","/static/metaserver/static/css/dig-components/index.web-vflD1hFtb.css","/static/metaserver/static/css/dig-illustrations/index.web-vflye-46V.css","/static/metaserver/static/css/maestro_layout-vflBd7CZb.css","/static/metaserver/static/css/foundation-vflH6wwwv.css"]);yd.displayName="SettingsPage";const Ed=({store:e})=>{const t=m.useStore(e.$initialSettingsTab),n=m.useStore(e.$objectIdentifier),a=tr(),i=$.useCallback((e=>{window.console.log("onObjectIdentifierChanged",e),"loaded"===a.status&&a.onObjectIdentifierChanged(e)}),[a]),r=$.useCallback((()=>{}),[]),o=$.useCallback((async()=>{"loaded"===a.status&&await a.refreshModal()}),[a]),s=$.useCallback((()=>{e.$props.get().manageAccessHandler()}),[e]),l=$.useCallback((()=>{e.$props.get().onRequestClose()}),[e]),c=$.useCallback((()=>{e.$props.get().onRequestClose()}),[e]),d=$.useCallback((()=>{}),[]);return $.createElement(yd,{objectIdentifier:n,initialTab:t,onClose:l,onCancel:c,onComplete:d,onManageLinkAccess:s,onConfirmationModalShownChange:r,onObjectIdentifierChanged:i,onRefreshModal:o})};Ed.displayName="SettingsScreen";const bd=({store:e})=>{const t=m.useStore(e.$props),i=m.useStore(e.$currentScreen),r=m.useStore(e.$isExitingMainToQr),o=m.useStore(e.$isEnteringQr),s=m.useStore(e.$isEnteringInband),l=m.useStore(e.$isInbandStarted),g=m.useStore(e.$isClickawayLocked),f=m.useStore(e.$isSuggestionsOpen),p=m.useStore(e.$componentViewTime),h=m.useStore(e.$displayMode),_=m.useStore(e.$isInterstitialVisible),y=u.usePlatform()===u.Platforms.METASERVER,E=t.isOpen,b=t.fileOrFolder,v=t.onRequestClose,w=Gs(),k=tr();$.useEffect((()=>{E&&(w.select(Vs).emit(null),e.$componentViewTime.set(Date.now()),n.publishEvent(n.CampaignEvents.SHARE_MODAL_OPENED))}),[E,w,e.$componentViewTime]);const S="loaded"===k.status&&k.accountMetadata.is_sharing_banned;$.useEffect((()=>{if(S){v();const a=t.referrerLoggingMetadata;e={actionSurface:null==a?void 0:a.actionSurface,actionElement:null==a?void 0:a.actionElement},n.UDCL.logEvent({class:"share",action:"shown",object:"sharing_banned_modal",properties:{actionSurface:e.actionSurface,actionElement:e.actionElement}}),n.mountModal($.default.createElement(Ti,{onAfterClose:()=>{n.UDCL.logEvent({class:"share",action:"dismiss",object:"sharing_banned_modal",properties:{actionSurface:e.actionSurface,actionElement:e.actionElement}}),n.unmountModal(void 0,Mi)}}),void 0,Mi)}var e}),[S]);const C=$.useCallback((()=>{if(g||f)return;const e=Date.now()-p,t=l?"clickaway_from_inband":"clickaway";w.select(Hs).emit({timeSinceView:e,action:t}),v()}),[g,f,p,l,w,v]),M=$.useCallback((()=>{const t=e.$props.get();"integrated_v1"!==t.settingsMode?(t.settingsHandler({shouldOpenLinkSettings:!0}),t.onActionClicked()):m.batch((()=>{e.$initialSettingsTab.set("view_link_settings"),e.$currentScreen.set(yr.SETTINGS)}))}),[e]),T=$.useCallback((()=>{r&&o&&(e.$isExitingMainToQr.set(!1),e.$currentScreen.set(yr.QRCODE))}),[o,r,e.$currentScreen,e.$isExitingMainToQr]),D=$.useCallback((t=>{o&&t.animationName===c.classes.fadeIn&&e.$isEnteringQr.set(!1)}),[e.$isEnteringQr,o]),L=$.useCallback((t=>{s&&t.animationName===c.classes.expandOuterWrapperInband&&e.$isEnteringInband.set(!1)}),[s,e.$isEnteringInband]),I=$.useCallback((()=>e.$displayMode.set({displayMode:"centered_v1"})),[e.$displayMode]),A=$.useMemo((()=>a.is_mobile_or_tablet()?{displayMode:"drawer",hasScrollLock:!_}:"anchored_v1"===h.displayMode?{displayMode:"anchored_v1",anchorRef:h.displayModeRef,offsetDistance:5,placement:h.displayModePositioning,onAnchorInvalid:I}:{displayMode:"centered_v1"}),[h,I,_]),x=t.canUserCreateStack,P=d.isContentEligibleForStack(b),N=!!x&&P,O=i!==yr.COPY_LINK?$.createElement(tl,{store:e}):null;return $.createElement(ki,{onEscape:C,onClickOutside:C,isOpen:E,currentScreen:i,isExitingMainToQr:r,onOverlayOrModalAnimationEnd:T,header:O,...A},$.createElement("div",{className:n.cx("oa-pulsar-effect-SHARE_MODAL_TOKENIZER")},i===yr.INBAND&&$.createElement("div",{onAnimationEnd:L,className:n.cx({[c.classes.inbandScreenExpand]:s}),style:{padding:"6px",minHeight:"310px"}},$.createElement(nl,{store:e})),i===yr.MAIN&&$.createElement($.Fragment,null,$.createElement(Si,null,y&&$.createElement(ei,{onRedirect:()=>{const e=Date.now()-p;w.select(Ws).emit({timeSinceView:e,action:"over_quota_share_banner_upgrade"}),v()}})),$.createElement(Si,null,$.createElement($r,{store:e})),$.createElement(Si,null,$.createElement(Ci,null,$.createElement(Er,{store:e})),$.createElement(Ci,null,$.createElement(po,{store:e}))),N&&$.createElement(Si,null,$.createElement(Nr,{store:e})),$.createElement(Si,{styleName:n.cx(c.classes.utilityButtonRow,c.classes.buttonRowBmusQr)},$.createElement(Wr,{store:e,buttonVariant:"filled",onRequestClose:()=>{v()}}),$.createElement(to,{store:e,buttonVariant:"filled"}))),i===yr.QRCODE&&$.createElement("div",{className:n.cx({[c.classes.qrScreenExpand]:!r&&o}),onAnimationEnd:D},$.createElement(vi,{file:b,onSettingsClick:M,onGetQrCodeError:()=>{v()}})),i===yr.MANAGE_ACCESS&&$.createElement(il,{store:e}),i===yr.COPY_LINK&&$.createElement(As,{store:e}),i===yr.SETTINGS&&$.createElement(Ed,{store:e})))};bd.displayName="Inner";e.ACL_UPDATE_POLICY=Pt,e.Card=Ht,e.DROPDOWN=Nt,e.DatePickerInput=ha,e.DisableDownloadsBanner=Pa,e.EDIT_LINK_SETTINGS="edit_link_settings",e.FILE_SETTINGS="file_settings",e.FOLDER_LINK_AUDIENCE_POLICY=Tt,e.FOLDER_SETTINGS="folder_settings",e.IconLink=Ha,e.MEMBER_POLICY=Ct,e.Main=e=>{const t=(e=>m.useInitStore(e,(t=>{const n=m.proxy((()=>t.get().objectIdentifier)),a=m.proxy((()=>t.get().progressiveInbandVariant)),i=m.proxy((()=>t.get().canUserUseTransfer)),r=m.proxy((()=>t.get().canContentUseTransfer)),o=m.proxy((()=>t.get().canUserEnableTransfer)),s=m.proxy((()=>t.get().isTransferEligibilityLoading)),l=m.proxy((()=>t.get().isFolderFileCountOverLimit)),c=m.proxy((()=>t.get().contents)),d=m.store(0),u=m.store(!1),g=m.store(!1),f=m.store(yr.MAIN),p=m.store(!1),h=m.store(!1),_=m.store(!1),y=m.store(!1),E=m.store("anchored_v1"===e.initialDisplayMode?{displayMode:e.initialDisplayMode,displayModePositioning:e.displayModePositioning,displayModeRef:e.displayModeRef}:{displayMode:e.initialDisplayMode}),b=m.store([]),v=m.store(""),w=m.store(void 0),k=m.store(!1),S=m.store("object_settings");return{$props:t,$objectIdentifier:n,$progressiveInbandVariant:a,$canUserUseTransfer:i,$canContentUseTransfer:r,$canUserEnableTransfer:o,$isTransferEligibilityLoading:s,$componentViewTime:d,$isClickawayLocked:u,$isInbandStarted:g,$currentScreen:f,$isExitingMainToQr:p,$isEnteringInband:_,$isEnteringQr:h,$isSuggestionsOpen:y,$displayMode:E,$inviteTargets:b,$inviteMessage:v,$clipboardWriter:w,$isFolderFileCountOverLimit:l,$contents:c,$isInterstitialVisible:k,$initialSettingsTab:S}})))(e),{isOpen:a,onRequestClose:i}=e,r=u.usePlatform()===u.Platforms.METASERVER;return a?r?$.createElement(o.ShareBlockingWrapper,{action:n.LockedStateModalAction.SHARE_MODAL,onStatusChange:e=>{e===n.Status.USER_ABORTED_ACTION&&i()}},$.createElement(al,null,$.createElement(bd,{store:t}))):$.createElement(al,null,$.createElement(bd,{store:t})):null},e.Provider=er,e.ScooterLoader=Ra,e.SettingDropdown=Ft,e.SharingModalBanner=Ut,e.SharingModalDowngradeBanner=Va,e.SharingModalSettingsRow=Bt,e.SharingSettingsAudience=Aa,e.SharingSettingsDownload=$a,e.SharingSettingsExpire=ka,e.SharingSettingsLinkPolicies=Oa,e.SharingSettingsPassword=Ta,e.TOGGLE=$t,e.VIEWER_INFO_POLICY=Mt,e.VIEW_LINK_SETTINGS="view_link_settings",e.useData=tr}));
//# sourceMappingURL=c_shareme24_main.js-vflznnP2X.map

//# debugId=86142ebf-0bff-37f2-9f1a-f7e409eef196